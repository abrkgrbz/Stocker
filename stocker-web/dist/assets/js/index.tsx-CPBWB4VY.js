var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(s,a,i)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[a]=i,l=(e,s,a)=>new Promise((i,n)=>{var t=e=>{try{l(a.next(e))}catch(s){n(s)}},r=e=>{try{l(a.throw(e))}catch(s){n(s)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(t,r);l((a=a.apply(e,s)).next())});import{ag as o,j as c,G as d,F as m,ah as p,ai as u,aj as h,J as g,v as y,ak as x,S as j,al as f}from"./chunk-BcRR0ED4.js";import{u as v}from"../index-C7F-vNHz.js";import{a as b}from"./chunk-C6D13DTt.js";import{u as k,i as N}from"./chunk-nBmrMGrr.js";import"./chunk-BsETiAjl.js";const C=new class{createCompany(e){return l(this,null,function*(){const l=yield b.post("/api/companies",(o=((e,s)=>{for(var a in s||(s={}))n.call(s,a)&&r(e,a,s[a]);if(i)for(var a of i(s))t.call(s,a)&&r(e,a,s[a]);return e})({},e),c={address:{country:e.country,city:e.city,district:e.district,postalCode:e.postalCode,addressLine:e.addressLine},foundedDate:e.foundedYear?new Date(e.foundedYear,0,1).toISOString():(new Date).toISOString()},s(o,a(c))));var o,c;return l.data})}getCompany(){return l(this,null,function*(){try{return(yield b.get("/api/companies/current")).data}catch(e){return null}})}updateCompany(e,s){return l(this,null,function*(){return(yield b.put(`/api/companies/${e}`,s)).data})}checkCompanyExists(){return l(this,null,function*(){try{return!!(yield this.getCompany())}catch(e){return!1}})}uploadLogo(e){return l(this,null,function*(){const s=new FormData;s.append("logo",e);return(yield b.post("/api/companies/logo",s,{headers:{"Content-Type":"multipart/form-data"}})).data})}},{Title:S,Text:w}=m,z=()=>{const e=k(),s=N(),{login:a,isLoading:i}=v(),[n]=o.useForm();return c.jsxs("div",{className:"login-page",children:[c.jsxs("div",{className:"login-background",children:[c.jsx("div",{className:"login-bg-shape login-bg-shape-1"}),c.jsx("div",{className:"login-bg-shape login-bg-shape-2"}),c.jsx("div",{className:"login-bg-shape login-bg-shape-3"}),c.jsx("div",{className:"login-bg-shape login-bg-shape-4"})]}),c.jsx("div",{className:"login-container",children:c.jsxs("div",{className:"login-box",children:[c.jsx("div",{className:"login-logo",children:c.jsx(d,{style:{fontSize:48,color:"#667eea"}})}),c.jsxs("div",{className:"login-header",children:[c.jsx(S,{level:2,style:{margin:0,color:"#1a1a1a"},children:"Hoş Geldiniz"}),c.jsx(w,{type:"secondary",style:{fontSize:16},children:"Stocker'a devam etmek için giriş yapın"})]}),c.jsxs(o,{form:n,name:"login",onFinish:i=>l(null,null,function*(){var n,t,r,l;try{i.tenantCode&&localStorage.setItem("X-Tenant-Code",i.tenantCode);const o={email:i.email,password:i.password,tenantCode:i.tenantCode};yield a(o),f.success("Giriş başarılı!");const c=null==(t=null==(n=v.getState().user)?void 0:n.roles)?void 0:t[0],d=null==(l=null==(r=s.state)?void 0:r.from)?void 0:l.pathname;if("SystemAdmin"!==c){if(!(yield C.checkCompanyExists()))return void e("/company-setup",{replace:!0})}e(d||("SystemAdmin"===c?"/master":"TenantAdmin"===c||"Admin"===c?"/admin":"/app/default"),{replace:!0})}catch(o){f.error(o.message||"Giriş başarısız. Lütfen tekrar deneyin.")}}),layout:"vertical",size:"large",className:"login-form",children:[c.jsx(o.Item,{name:"tenantCode",rules:[{required:!1,message:"Lütfen kiracı kodunu girin!"}],children:c.jsx(p,{prefix:c.jsx(u,{style:{color:"#667eea"}}),placeholder:"Kiracı Kodu (örn: test)",autoComplete:"organization",className:"login-input"})}),c.jsx(o.Item,{name:"email",rules:[{required:!0,message:"Lütfen email adresinizi girin!"},{type:"email",message:"Lütfen geçerli bir email adresi girin!"}],children:c.jsx(p,{prefix:c.jsx(h,{style:{color:"#667eea"}}),placeholder:"Email adresi",autoComplete:"email",type:"email",className:"login-input"})}),c.jsx(o.Item,{name:"password",rules:[{required:!0,message:"Lütfen şifrenizi girin!"}],children:c.jsx(p.Password,{prefix:c.jsx(g,{style:{color:"#667eea"}}),placeholder:"Şifre",autoComplete:"current-password",className:"login-input"})}),c.jsx(o.Item,{style:{marginBottom:16},children:c.jsx(y,{type:"primary",htmlType:"submit",loading:i,block:!0,size:"large",icon:c.jsx(x,{}),className:"login-button",children:"Giriş Yap"})}),c.jsxs("div",{className:"login-links",children:[c.jsx("a",{href:"/forgot-password",children:"Şifremi unuttum"}),c.jsx("span",{className:"separator",children:"•"}),c.jsx("a",{href:"/register",children:"Hesap oluştur"})]})]}),c.jsxs("div",{className:"demo-section",children:[c.jsx(w,{type:"secondary",style:{fontSize:12,textAlign:"center",display:"block",marginBottom:12},children:"DEMO HESAPLARI"}),c.jsxs(j,{direction:"vertical",style:{width:"100%"},size:"small",children:[c.jsxs("div",{className:"demo-credential",onClick:()=>{n.setFieldsValue({email:"admin@stocker.com",password:"Admin@123456"})},children:[c.jsx("div",{className:"demo-icon",children:"👨‍💼"}),c.jsxs("div",{className:"demo-info",children:[c.jsx(w,{strong:!0,style:{fontSize:13},children:"Sistem Yöneticisi"}),c.jsx(w,{type:"secondary",style:{fontSize:11,display:"block"},children:"admin@stocker.com"})]}),c.jsx(w,{className:"demo-hint",children:"Doldurmak için tıkla"})]}),c.jsxs("div",{className:"demo-credential",onClick:()=>{n.setFieldsValue({email:"tenant@example.com",password:"Tenant@123456"})},children:[c.jsx("div",{className:"demo-icon",children:"👤"}),c.jsxs("div",{className:"demo-info",children:[c.jsx(w,{strong:!0,style:{fontSize:13},children:"Kiracı Yöneticisi"}),c.jsx(w,{type:"secondary",style:{fontSize:11,display:"block"},children:"tenant@example.com"})]}),c.jsx(w,{className:"demo-hint",children:"Doldurmak için tıkla"})]})]})]})]})})]})};export{z as LoginPage};
