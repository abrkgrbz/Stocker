var e=(e,s,a)=>new Promise((i,t)=>{var n=e=>{try{l(a.next(e))}catch(s){t(s)}},r=e=>{try{l(a.throw(e))}catch(s){t(s)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,r);l((a=a.apply(e,s)).next())});import{au as s,j as a,t as i,a5 as t,v as n,bA as r,bx as l,bB as d,ar as c,bi as o,D as m,br as u,T as x,L as h,M as j,O as y,G as p,J as v,b3 as g,B as k,bw as f,b2 as b,aU as T,u as N,bs as D,bC as P,bD as F,bj as A,av as S,aL as Y,I as C,ac as z}from"./chunk-Bf7f0GK8.js";import{j as B,u as M,r as w}from"./chunk-nBmrMGrr.js";import{f as I,a as R}from"./chunk-Cw84YSTg.js";import"../index-BwqpPS9r.js";import"./chunk-BsETiAjl.js";const{Title:O,Text:G,Paragraph:H}=p,K=()=>{const{id:p}=B(),K=M(),[E,V]=w.useState(null),[$,q]=w.useState(!0),[L,U]=w.useState(!1),[J,Q]=w.useState(!1);w.useEffect(()=>{p&&W()},[p]);const W=()=>e(null,null,function*(){try{q(!0);V({id:p,invoiceNumber:"INV-2024-001",customerId:"1",customerName:"ABC Teknoloji A.Ş.",customerEmail:"muhasebe@abcteknoloji.com",customerPhone:"+90 212 555 0100",customerAddress:"Maslak Mah. Teknoloji Cad. No:15\nSarıyer/İstanbul",customerTaxNumber:"1234567890",customerTaxOffice:"Sarıyer",invoiceDate:"2024-01-15T00:00:00",dueDate:"2024-02-15T00:00:00",subTotal:1e4,taxAmount:1800,discountAmount:500,totalAmount:11300,currency:"TRY",status:"Paid",paidDate:"2024-02-10T00:00:00",paymentMethod:"BankTransfer",notes:"Ödeme IBAN: TR12 0001 2345 6789 0123 4567 89",items:[{id:"1",productId:"1",productName:"Yazılım Lisansı - Pro",description:"Yıllık yazılım lisansı",quantity:2,unitPrice:3e3,taxRate:18,discountRate:5,totalPrice:5700},{id:"2",productId:"2",productName:"Destek Paketi",description:"7/24 teknik destek hizmeti",quantity:1,unitPrice:4e3,taxRate:18,discountRate:0,totalPrice:4720}],createdAt:"2024-01-15T10:30:00",createdBy:"Ahmet Yılmaz",updatedAt:"2024-02-10T14:20:00",updatedBy:"Mehmet Demir"})}catch(e){s.error("Fatura detayları yüklenemedi")}finally{q(!1)}}),X=[{key:"duplicate",label:"Kopyala",icon:a.jsx(D,{}),onClick:()=>{s.info("Fatura kopyalandı"),K("/app/tenant/invoices/new")}},{key:"share",label:"Paylaş",icon:a.jsx(P,{})},{key:"export-excel",label:"Excel Olarak İndir",icon:a.jsx(F,{})},{type:"divider"},{key:"delete",label:"Sil",icon:a.jsx(A,{}),danger:!0,onClick:()=>Q(!0)}],Z=[{title:"#",dataIndex:"index",key:"index",width:50,render:(e,s,a)=>a+1},{title:"Ürün/Hizmet",dataIndex:"productName",key:"productName",render:(e,s)=>a.jsxs("div",{children:[a.jsx(G,{strong:!0,children:e}),s.description&&a.jsx("div",{children:a.jsx(G,{type:"secondary",style:{fontSize:12},children:s.description})})]})},{title:"Miktar",dataIndex:"quantity",key:"quantity",width:100,align:"center"},{title:"Birim Fiyat",dataIndex:"unitPrice",key:"unitPrice",width:120,align:"right",render:e=>R(e)},{title:"İndirim %",dataIndex:"discountRate",key:"discountRate",width:100,align:"center",render:e=>e>0?`%${e}`:"-"},{title:"KDV %",dataIndex:"taxRate",key:"taxRate",width:100,align:"center",render:e=>`%${e}`},{title:"Toplam",dataIndex:"totalPrice",key:"totalPrice",width:150,align:"right",render:e=>a.jsx(G,{strong:!0,children:R(e)})}];return $?a.jsx("div",{className:"invoice-detail-loading",children:a.jsx(i,{size:"large"})}):E?a.jsxs("div",{className:"invoice-detail-page",children:[a.jsx(r,{ghost:!1,onBack:()=>K(-1),title:`Fatura #${E.invoiceNumber}`,tags:a.jsx(x,{color:(_=E.status,{Draft:"default",Sent:"processing",Paid:"success",Overdue:"error",Cancelled:"warning",PartiallyPaid:"warning"}[_]||"default"),icon:(e=>({Draft:a.jsx(o,{}),Sent:a.jsx(z,{}),Paid:a.jsx(C,{}),Overdue:a.jsx(Y,{}),Cancelled:a.jsx(S,{})}[e]||null))(E.status),children:"Paid"===E.status?"Ödendi":"Overdue"===E.status?"Gecikmiş":"Sent"===E.status?"Gönderildi":"Draft"===E.status?"Taslak":"Cancelled"===E.status?"İptal":E.status}),extra:[a.jsx(n,{icon:a.jsx(l,{}),onClick:()=>{window.print()},children:"Yazdır"},"print"),a.jsx(n,{icon:a.jsx(d,{}),onClick:()=>e(null,null,function*(){try{s.loading("PDF oluşturuluyor..."),setTimeout(()=>{s.success("PDF başarıyla indirildi")},1500)}catch(e){s.error("PDF indirilemedi")}}),children:"PDF İndir"},"download"),a.jsx(n,{type:"primary",icon:a.jsx(c,{}),onClick:()=>e(null,null,function*(){U(!0)}),children:"Email Gönder"},"send"),a.jsx(n,{icon:a.jsx(o,{}),onClick:()=>{K(`/app/${p}/invoices/${p}/edit`)},children:"Düzenle"},"edit"),a.jsx(m,{menu:{items:X},placement:"bottomRight",children:a.jsx(n,{icon:a.jsx(u,{})})},"more")]}),a.jsx("div",{className:"invoice-detail-content",children:a.jsxs(h,{gutter:[24,24],children:[a.jsx(j,{xs:24,lg:16,children:a.jsxs(y,{className:"invoice-main-card",children:[a.jsxs("div",{className:"invoice-header",children:[a.jsxs("div",{className:"invoice-logo",children:[a.jsx(O,{level:3,children:"STOCKER"}),a.jsx(G,{type:"secondary",children:"Profesyonel Fatura"})]}),a.jsxs("div",{className:"invoice-header-info",children:[a.jsx(O,{level:2,style:{margin:0},children:"FATURA"}),a.jsxs(G,{strong:!0,style:{fontSize:16},children:["#",E.invoiceNumber]})]})]}),a.jsx(v,{}),a.jsxs(h,{gutter:48,children:[a.jsx(j,{span:12,children:a.jsxs("div",{className:"info-section",children:[a.jsx(G,{type:"secondary",children:"Faturayı Kesen:"}),a.jsx(O,{level:5,children:"Stocker Yazılım A.Ş."}),a.jsxs(H,{children:["Teknoloji Mah. İnovasyon Cad. No:42",a.jsx("br",{}),"Şişli/İstanbul",a.jsx("br",{}),"Tel: +90 212 555 0200",a.jsx("br",{}),"Email: fatura@stocker.com"]})]})}),a.jsx(j,{span:12,children:a.jsxs("div",{className:"info-section",children:[a.jsx(G,{type:"secondary",children:"Fatura Edilen:"}),a.jsx(O,{level:5,children:E.customerName}),a.jsxs(H,{children:[E.customerAddress,a.jsx("br",{}),"Tel: ",E.customerPhone,a.jsx("br",{}),"Email: ",E.customerEmail,a.jsx("br",{}),E.customerTaxNumber&&a.jsxs(a.Fragment,{children:["VKN: ",E.customerTaxNumber,a.jsx("br",{}),"V.D.: ",E.customerTaxOffice]})]})]})})]}),a.jsx(v,{}),a.jsxs(h,{gutter:48,style:{marginBottom:24},children:[a.jsx(j,{span:8,children:a.jsxs("div",{className:"detail-item",children:[a.jsx(G,{type:"secondary",children:"Fatura Tarihi:"}),a.jsx("div",{children:a.jsx(G,{strong:!0,children:I(E.invoiceDate)})})]})}),a.jsx(j,{span:8,children:a.jsxs("div",{className:"detail-item",children:[a.jsx(G,{type:"secondary",children:"Vade Tarihi:"}),a.jsx("div",{children:a.jsx(G,{strong:!0,children:I(E.dueDate)})})]})}),a.jsx(j,{span:8,children:a.jsxs("div",{className:"detail-item",children:[a.jsx(G,{type:"secondary",children:"Ödeme Yöntemi:"}),a.jsx("div",{children:a.jsx(G,{strong:!0,children:"BankTransfer"===E.paymentMethod?"Banka Havalesi":"CreditCard"===E.paymentMethod?"Kredi Kartı":"Cash"===E.paymentMethod?"Nakit":E.paymentMethod})})]})})]}),a.jsx(g,{dataSource:E.items,columns:Z,pagination:!1,rowKey:"id",className:"invoice-items-table"}),a.jsx(h,{justify:"end",style:{marginTop:24},children:a.jsx(j,{span:10,children:a.jsxs("div",{className:"invoice-summary",children:[a.jsxs("div",{className:"summary-item",children:[a.jsx(G,{children:"Ara Toplam:"}),a.jsx(G,{children:R(E.subTotal)})]}),E.discountAmount>0&&a.jsxs("div",{className:"summary-item",children:[a.jsx(G,{children:"İndirim:"}),a.jsxs(G,{type:"danger",children:["-",R(E.discountAmount)]})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx(G,{children:"KDV (%18):"}),a.jsx(G,{children:R(E.taxAmount)})]}),a.jsx(v,{style:{margin:"12px 0"}}),a.jsxs("div",{className:"summary-item total",children:[a.jsx(O,{level:4,children:"Genel Toplam:"}),a.jsx(O,{level:4,style:{color:"#1890ff"},children:R(E.totalAmount)})]})]})})}),E.notes&&a.jsxs(a.Fragment,{children:[a.jsx(v,{}),a.jsxs("div",{className:"invoice-notes",children:[a.jsx(O,{level:5,children:"Notlar:"}),a.jsx(H,{children:E.notes})]})]}),a.jsx(v,{}),a.jsx("div",{className:"invoice-footer",children:a.jsxs(G,{type:"secondary",children:["Bu fatura ",I(E.createdAt,"DD.MM.YYYY HH:mm")," tarihinde oluşturulmuştur."]})})]})}),a.jsxs(j,{xs:24,lg:8,children:[a.jsxs(y,{className:"status-card",style:{marginBottom:16},children:[a.jsx(O,{level:5,children:"Fatura Durumu"}),a.jsxs("div",{className:"status-content",children:[a.jsx(k,{status:"Paid"===E.status?"success":"processing",text:a.jsx(G,{strong:!0,style:{fontSize:16},children:"Paid"===E.status?"Ödendi":"Overdue"===E.status?"Gecikmiş":"Sent"===E.status?"Gönderildi":E.status})}),E.paidDate&&a.jsxs("div",{style:{marginTop:12},children:[a.jsx(G,{type:"secondary",children:"Ödeme Tarihi:"}),a.jsx("div",{children:a.jsx(G,{children:I(E.paidDate)})})]})]}),"Paid"!==E.status&&a.jsx(n,{type:"primary",block:!0,style:{marginTop:16},onClick:()=>e(null,null,function*(){try{s.success("Fatura ödendi olarak işaretlendi"),W()}catch(e){s.error("İşlem başarısız")}}),children:"Ödendi Olarak İşaretle"})]}),a.jsxs(y,{className:"payment-info-card",style:{marginBottom:16},children:[a.jsx(O,{level:5,children:"Ödeme Bilgileri"}),a.jsxs(f,{column:1,size:"small",children:[a.jsx(f.Item,{label:"Toplam Tutar",children:a.jsx(G,{strong:!0,style:{fontSize:18,color:"#1890ff"},children:R(E.totalAmount)})}),a.jsx(f.Item,{label:"Ödeme Yöntemi",children:"BankTransfer"===E.paymentMethod?"Banka Havalesi":"CreditCard"===E.paymentMethod?"Kredi Kartı":E.paymentMethod}),a.jsx(f.Item,{label:"Vade Tarihi",children:I(E.dueDate)})]})]}),a.jsxs(y,{className:"activity-card",children:[a.jsx(O,{level:5,children:"İşlem Geçmişi"}),a.jsx(b,{items:[{color:"green",children:a.jsxs(a.Fragment,{children:[a.jsx(G,{strong:!0,children:"Ödeme alındı"}),a.jsx("div",{children:a.jsx(G,{type:"secondary",style:{fontSize:12},children:I(E.paidDate,"DD.MM.YYYY HH:mm")})})]})},{color:"blue",children:a.jsxs(a.Fragment,{children:[a.jsx(G,{strong:!0,children:"Fatura gönderildi"}),a.jsx("div",{children:a.jsx(G,{type:"secondary",style:{fontSize:12},children:I(E.invoiceDate,"DD.MM.YYYY HH:mm")})})]})},{color:"gray",children:a.jsxs(a.Fragment,{children:[a.jsx(G,{strong:!0,children:"Fatura oluşturuldu"}),a.jsx("div",{children:a.jsxs(G,{type:"secondary",style:{fontSize:12},children:[E.createdBy," • ",I(E.createdAt,"DD.MM.YYYY HH:mm")]})})]})}]})]})]})]})}),a.jsx(T,{title:"Fatura Gönder",open:L,onOk:()=>{s.success("Fatura email ile gönderildi"),U(!1)},onCancel:()=>U(!1),okText:"Gönder",cancelText:"İptal",children:a.jsx(N,{message:"Fatura müşteriye email olarak gönderilecek",description:`${E.customerEmail} adresine fatura gönderilecektir.`,type:"info",showIcon:!0})}),a.jsx(T,{title:"Faturayı Sil",open:J,onOk:()=>e(null,null,function*(){try{s.success("Fatura başarıyla silindi"),K(-1)}catch(e){s.error("Fatura silinemedi")}}),onCancel:()=>Q(!1),okText:"Sil",cancelText:"İptal",okButtonProps:{danger:!0},children:a.jsx(N,{message:"Bu işlem geri alınamaz!",description:"Faturayı silmek istediğinizden emin misiniz?",type:"warning",showIcon:!0})})]}):a.jsx(t,{status:"404",title:"Fatura Bulunamadı",subTitle:"Aradığınız fatura bulunamadı veya silinmiş olabilir.",extra:a.jsx(n,{type:"primary",onClick:()=>K(-1),children:"Geri Dön"})});var _};export{K as InvoiceDetail,K as default};
