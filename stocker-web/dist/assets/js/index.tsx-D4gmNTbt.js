var be=Object.defineProperty,ve=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var O=(t,i,r)=>i in t?be(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r,_=(t,i)=>{for(var r in i||(i={}))ke.call(i,r)&&O(t,r,i[r]);if(q)for(var r of q(i))we.call(i,r)&&O(t,r,i[r]);return t},W=(t,i)=>ve(t,Se(i));var b=(t,i,r)=>new Promise((w,y)=>{var L=u=>{try{I(r.next(u))}catch(T){y(T)}},A=u=>{try{I(r.throw(u))}catch(T){y(T)}},I=u=>u.done?w(u.value):Promise.resolve(u.value).then(L,A);I((r=r.apply(t,i)).next())});import{ag as n,am as f,j as e,S as z,v as N,b1 as Ae,bu as Ie,M as v,N as o,O as S,aT as C,i as Te,_ as E,R as De,a5 as Ne,ah as x,b7 as Ye,a_ as F,aW as Re,aO as K,aj as Pe,aB as Me,Y as ze,ba as Ce,an as Ke,aK as re,b9 as j,A as J,aE as Z,T as Q,F as Fe,Z as ee,aX as Le,b5 as se,e as $e,aF as le,b2 as Ee,bd as Ve,J as Ue,be as Ge,b6 as He,D as Xe,bc as Be,B as ae}from"./chunk-CQugYT0Y.js";import{r as h}from"./chunk-a6Wk6XzP.js";import{P as qe}from"./chunk-B9mzwAwt.js";import{b as te,f as k}from"./chunk-03cX8L2l.js";import{f as d}from"./chunk-DDRBbOma.js";import"../index-BEW7Pg8Q.js";import"./chunk-CX9aqCgN.js";const{Title:Oe,Text:p,Paragraph:as}=Fe,{Option:m}=F,{TabPane:V}=re,ts=()=>{const[t,i]=h.useState([]),[r,w]=h.useState(!1),[y,L]=h.useState(""),[A,I]=h.useState("all"),[u,T]=h.useState("all"),[a,U]=h.useState(null),[ie,Y]=h.useState(!1),[ne,R]=h.useState(!1),[oe,$]=h.useState(!1),[P,G]=h.useState(null),[g]=n.useForm(),[D]=n.useForm(),ce=[{id:"1",email:"admin@company.com",firstName:"Ahmet",lastName:"Yılmaz",fullName:"Ahmet Yılmaz",phoneNumber:"+90 532 111 2233",role:"Admin",department:"Yönetim",title:"Genel Müdür",isActive:!0,emailVerified:!0,lastLogin:"2024-01-15T10:30:00",createdAt:"2023-06-01T00:00:00",permissions:["users.create","users.edit","users.delete","invoices.*","settings.*"]},{id:"2",email:"muhasebe@company.com",firstName:"Ayşe",lastName:"Demir",fullName:"Ayşe Demir",phoneNumber:"+90 533 444 5566",role:"Accountant",department:"Muhasebe",title:"Muhasebe Uzmanı",isActive:!0,emailVerified:!0,lastLogin:"2024-01-15T09:15:00",createdAt:"2023-07-15T00:00:00",permissions:["invoices.*","reports.view"]},{id:"3",email:"satis@company.com",firstName:"Mehmet",lastName:"Kaya",fullName:"Mehmet Kaya",phoneNumber:"+90 534 777 8899",role:"Sales",department:"Satış",title:"Satış Temsilcisi",isActive:!0,emailVerified:!1,lastLogin:"2024-01-14T16:45:00",createdAt:"2023-09-01T00:00:00",permissions:["customers.*","orders.create","orders.view"]},{id:"4",email:"depo@company.com",firstName:"Fatma",lastName:"Öz",fullName:"Fatma Öz",phoneNumber:"+90 535 222 3344",role:"Staff",department:"Depo",title:"Depo Sorumlusu",isActive:!1,emailVerified:!0,lastLogin:"2024-01-10T11:20:00",createdAt:"2023-10-01T00:00:00",permissions:["inventory.*"]}];h.useEffect(()=>{M()},[]);const M=()=>b(null,null,function*(){w(!0);try{setTimeout(()=>{i(ce),w(!1)},1e3)}catch(s){f.error("Kullanıcılar yüklenemedi"),w(!1)}}),de=()=>{G(null),g.resetFields(),Y(!0)},H=s=>{G(s),g.setFieldsValue(W(_({},s),{sendWelcomeEmail:!1})),Y(!0)},me=s=>b(null,null,function*(){try{f.success("Kullanıcı silindi"),M()}catch(l){f.error("Kullanıcı silinemedi")}}),ue=(s,l)=>b(null,null,function*(){try{f.success(l?"Kullanıcı aktifleştirildi":"Kullanıcı pasifleştirildi"),M()}catch(c){f.error("İşlem başarısız")}}),xe=s=>b(null,null,function*(){try{f.success("Şifre güncellendi"),$(!1),D.resetFields()}catch(l){f.error("Şifre güncellenemedi")}}),he=()=>b(null,null,function*(){try{const s=yield g.validateFields();P?f.success("Kullanıcı güncellendi"):(f.success("Kullanıcı oluşturuldu"),s.sendWelcomeEmail&&f.info("Hoşgeldin e-postası gönderildi")),Y(!1),g.resetFields(),M()}catch(s){}}),fe=s=>{U(s),R(!0)},je=s=>{U(s),D.resetFields(),$(!0)},X=s=>({Admin:"red",Accountant:"blue",Sales:"green",Staff:"default",Manager:"purple"})[s]||"default",B=s=>s?e.jsx(ae,{status:"success",text:"Aktif"}):e.jsx(ae,{status:"error",text:"Pasif"}),pe=[{title:"Kullanıcı",key:"user",fixed:"left",width:280,render:(s,l)=>e.jsxs(z,{children:[e.jsxs(J,{size:40,style:{backgroundColor:"#667eea"},icon:e.jsx($e,{}),children:[l.firstName[0],l.lastName[0]]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(p,{strong:!0,children:l.fullName}),!l.emailVerified&&e.jsx(le,{title:"E-posta doğrulanmamış",children:e.jsx(Z,{style:{color:"#faad14",marginLeft:8}})})]}),e.jsx(p,{type:"secondary",style:{fontSize:12},children:l.email})]})]})},{title:"Rol",dataIndex:"role",key:"role",width:120,filters:[{text:"Admin",value:"Admin"},{text:"Muhasebe",value:"Accountant"},{text:"Satış",value:"Sales"},{text:"Personel",value:"Staff"}],render:s=>e.jsx(Q,{color:X(s),children:s==="Admin"?"Yönetici":s==="Accountant"?"Muhasebe":s==="Sales"?"Satış":s==="Staff"?"Personel":s})},{title:"Departman",dataIndex:"department",key:"department",width:120,render:s=>s||"-"},{title:"Ünvan",dataIndex:"title",key:"title",width:150,ellipsis:!0,render:s=>s||"-"},{title:"Telefon",dataIndex:"phoneNumber",key:"phoneNumber",width:140,render:s=>te(s)||"-"},{title:"Son Giriş",dataIndex:"lastLogin",key:"lastLogin",width:150,sorter:!0,render:s=>s?e.jsx(le,{title:k(s,"DD.MM.YYYY HH:mm"),children:k(s,"DD.MM.YYYY")}):"-"},{title:"Durum",dataIndex:"isActive",key:"isActive",width:100,filters:[{text:"Aktif",value:!0},{text:"Pasif",value:!1}],render:s=>B(s)},{title:"İşlemler",key:"actions",fixed:"right",width:120,render:(s,l)=>{const c=[{key:"view",label:"Detayları Gör",icon:e.jsx(Ee,{}),onClick:()=>fe(l)},{key:"edit",label:"Düzenle",icon:e.jsx(se,{}),onClick:()=>H(l)},{key:"password",label:"Şifre Değiştir",icon:e.jsx(Ve,{}),onClick:()=>je(l)},{type:"divider"},{key:"toggle",label:l.isActive?"Pasifleştir":"Aktifleştir",icon:l.isActive?e.jsx(Ue,{}):e.jsx(Ge,{}),onClick:()=>ue(l.id,!l.isActive)},{key:"delete",label:"Sil",icon:e.jsx(He,{}),danger:!0,onClick:()=>{K.confirm({title:"Kullanıcıyı Sil",content:`${l.fullName} adlı kullanıcıyı silmek istediğinizden emin misiniz?`,okText:"Sil",cancelText:"İptal",okType:"danger",onOk:()=>me(l.id)})}}];return e.jsx(Xe,{menu:{items:c},trigger:["click"],children:e.jsx(N,{type:"text",icon:e.jsx(Be,{})})})}}],ye=t.filter(s=>{const l=s.fullName.toLowerCase().includes(y.toLowerCase())||s.email.toLowerCase().includes(y.toLowerCase()),c=A==="all"||s.role===A,ge=u==="all"||(u==="active"?s.isActive:!s.isActive);return l&&c&&ge});return e.jsxs("div",{className:"tenant-users-page",children:[e.jsx(qe,{title:"Kullanıcı Yönetimi",subtitle:`Toplam ${t.length} kullanıcı`,breadcrumbs:[{title:"Ana Sayfa",path:"/app/tenant"},{title:"Kullanıcılar"}],extra:e.jsxs(z,{children:[e.jsx(N,{icon:e.jsx(Ae,{}),children:"Dışa Aktar"}),e.jsx(N,{type:"primary",icon:e.jsx(Ie,{}),onClick:de,children:"Yeni Kullanıcı"})]})}),e.jsxs(v,{gutter:16,style:{marginBottom:24},children:[e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(S,{children:e.jsx(C,{title:"Toplam Kullanıcı",value:t.length,prefix:e.jsx(Te,{})})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(S,{children:e.jsx(C,{title:"Aktif Kullanıcı",value:t.filter(s=>s.isActive).length,prefix:e.jsx(E,{}),valueStyle:{color:"#52c41a"}})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(S,{children:e.jsx(C,{title:"Yönetici",value:t.filter(s=>s.role==="Admin").length,prefix:e.jsx(De,{}),valueStyle:{color:"#1890ff"}})})}),e.jsx(o,{xs:24,sm:12,md:6,children:e.jsx(S,{children:e.jsx(C,{title:"Son 7 Gün Giriş",value:t.filter(s=>{if(!s.lastLogin)return!1;const l=new Date(s.lastLogin),c=new Date;return c.setDate(c.getDate()-7),l>c}).length,prefix:e.jsx(Ne,{})})})})]}),e.jsx(S,{style:{marginBottom:24},children:e.jsxs(v,{gutter:16,children:[e.jsx(o,{xs:24,sm:12,md:8,children:e.jsx(x,{placeholder:"Ad, soyad veya email ile ara...",prefix:e.jsx(Ye,{}),value:y,onChange:s=>L(s.target.value),allowClear:!0})}),e.jsx(o,{xs:24,sm:12,md:8,children:e.jsxs(F,{style:{width:"100%"},placeholder:"Rol Seçin",value:A,onChange:I,children:[e.jsx(m,{value:"all",children:"Tüm Roller"}),e.jsx(m,{value:"Admin",children:"Yönetici"}),e.jsx(m,{value:"Accountant",children:"Muhasebe"}),e.jsx(m,{value:"Sales",children:"Satış"}),e.jsx(m,{value:"Staff",children:"Personel"})]})}),e.jsx(o,{xs:24,sm:12,md:8,children:e.jsxs(F,{style:{width:"100%"},placeholder:"Durum Seçin",value:u,onChange:T,children:[e.jsx(m,{value:"all",children:"Tüm Durumlar"}),e.jsx(m,{value:"active",children:"Aktif"}),e.jsx(m,{value:"inactive",children:"Pasif"})]})})]})}),e.jsx(S,{children:e.jsx(Re,{columns:pe,dataSource:ye,rowKey:"id",loading:r,scroll:{x:1200},pagination:{showSizeChanger:!0,showTotal:s=>`Toplam ${s} kullanıcı`}})}),e.jsx(K,{title:P?"Kullanıcı Düzenle":"Yeni Kullanıcı",open:ie,onOk:he,onCancel:()=>{Y(!1),g.resetFields()},width:700,okText:P?"Güncelle":"Oluştur",cancelText:"İptal",children:e.jsxs(n,{form:g,layout:"vertical",initialValues:{role:"Staff",isActive:!0,sendWelcomeEmail:!0},children:[e.jsxs(v,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(n.Item,{name:"firstName",label:"Ad",rules:[d.required("Ad zorunludur")],children:e.jsx(x,{placeholder:"Ad"})})}),e.jsx(o,{span:12,children:e.jsx(n.Item,{name:"lastName",label:"Soyad",rules:[d.required("Soyad zorunludur")],children:e.jsx(x,{placeholder:"Soyad"})})})]}),e.jsxs(v,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(n.Item,{name:"email",label:"E-posta",rules:[d.required("E-posta zorunludur"),d.email("Geçerli bir e-posta giriniz")],children:e.jsx(x,{prefix:e.jsx(Pe,{}),placeholder:"ornek@email.com"})})}),e.jsx(o,{span:12,children:e.jsx(n.Item,{name:"phoneNumber",label:"Telefon",rules:[d.phone()],children:e.jsx(x,{prefix:e.jsx(Me,{}),placeholder:"+90 5XX XXX XX XX"})})})]}),e.jsxs(v,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(n.Item,{name:"role",label:"Rol",rules:[d.required("Rol zorunludur")],children:e.jsxs(F,{children:[e.jsx(m,{value:"Admin",children:"Yönetici"}),e.jsx(m,{value:"Accountant",children:"Muhasebe"}),e.jsx(m,{value:"Sales",children:"Satış"}),e.jsx(m,{value:"Staff",children:"Personel"})]})})}),e.jsx(o,{span:12,children:e.jsx(n.Item,{name:"department",label:"Departman",children:e.jsx(x,{placeholder:"Departman"})})})]}),e.jsx(n.Item,{name:"title",label:"Ünvan",children:e.jsx(x,{placeholder:"Ünvan"})}),!P&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{}),e.jsxs(v,{gutter:16,children:[e.jsx(o,{span:12,children:e.jsx(n.Item,{name:"password",label:"Şifre",rules:[d.required("Şifre zorunludur"),d.min(8,"En az 8 karakter olmalıdır")],children:e.jsx(x.Password,{placeholder:"Şifre"})})}),e.jsx(o,{span:12,children:e.jsx(n.Item,{name:"confirmPassword",label:"Şifre Tekrar",dependencies:["password"],rules:[d.required("Şifre tekrarı zorunludur"),({getFieldValue:s})=>({validator(l,c){return!c||s("password")===c?Promise.resolve():Promise.reject(new Error("Şifreler eşleşmiyor"))}})],children:e.jsx(x.Password,{placeholder:"Şifre Tekrar"})})})]}),e.jsxs(n.Item,{name:"sendWelcomeEmail",valuePropName:"checked",children:[e.jsx(Ce,{})," Hoşgeldin e-postası gönder"]})]})]})}),e.jsxs(K,{title:"Şifre Değiştir",open:oe,onOk:()=>D.submit(),onCancel:()=>{$(!1),D.resetFields()},okText:"Değiştir",cancelText:"İptal",children:[e.jsx(Ke,{message:`${a==null?void 0:a.fullName} için yeni şifre belirleyin`,type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsxs(n,{form:D,layout:"vertical",onFinish:xe,children:[e.jsx(n.Item,{name:"newPassword",label:"Yeni Şifre",rules:[d.required("Yeni şifre zorunludur"),d.min(8,"En az 8 karakter olmalıdır")],children:e.jsx(x.Password,{placeholder:"Yeni şifre"})}),e.jsx(n.Item,{name:"confirmPassword",label:"Yeni Şifre Tekrar",dependencies:["newPassword"],rules:[d.required("Şifre tekrarı zorunludur"),({getFieldValue:s})=>({validator(l,c){return!c||s("newPassword")===c?Promise.resolve():Promise.reject(new Error("Şifreler eşleşmiyor"))}})],children:e.jsx(x.Password,{placeholder:"Yeni şifre tekrar"})})]})]}),e.jsx(K,{title:"Kullanıcı Detayları",open:ne,onCancel:()=>R(!1),footer:[e.jsx(N,{onClick:()=>R(!1),children:"Kapat"},"close"),e.jsx(N,{type:"primary",icon:e.jsx(se,{}),onClick:()=>{R(!1),H(a)},children:"Düzenle"},"edit")],width:700,children:a&&e.jsxs(re,{defaultActiveKey:"1",children:[e.jsx(V,{tab:"Genel Bilgiler",children:e.jsxs(j,{bordered:!0,column:2,children:[e.jsx(j.Item,{label:"Ad Soyad",span:2,children:e.jsxs(z,{children:[e.jsxs(J,{style:{backgroundColor:"#667eea"},children:[a.firstName[0],a.lastName[0]]}),a.fullName]})}),e.jsxs(j.Item,{label:"E-posta",children:[a.email,a.emailVerified?e.jsx(E,{style:{color:"#52c41a",marginLeft:8}}):e.jsx(Z,{style:{color:"#faad14",marginLeft:8}})]}),e.jsx(j.Item,{label:"Telefon",children:te(a.phoneNumber)||"-"}),e.jsx(j.Item,{label:"Rol",children:e.jsx(Q,{color:X(a.role),children:a.role})}),e.jsx(j.Item,{label:"Departman",children:a.department||"-"}),e.jsx(j.Item,{label:"Ünvan",children:a.title||"-"}),e.jsx(j.Item,{label:"Durum",children:B(a.isActive)}),e.jsx(j.Item,{label:"Kayıt Tarihi",children:k(a.createdAt)}),e.jsx(j.Item,{label:"Son Giriş",children:a.lastLogin?k(a.lastLogin,"DD.MM.YYYY HH:mm"):"-"})]})},"1"),e.jsxs(V,{tab:"Yetkiler",children:[e.jsx(Oe,{level:5,children:"Rol Yetkileri"}),e.jsx(ee,{dataSource:a.permissions||[],renderItem:s=>e.jsx(ee.Item,{children:e.jsxs(z,{children:[e.jsx(E,{style:{color:"#52c41a"}}),e.jsx(p,{children:s})]})}),locale:{emptyText:"Yetki tanımlanmamış"}})]},"2"),e.jsx(V,{tab:"Aktivite Geçmişi",children:e.jsx(Le,{items:[{color:"green",children:e.jsxs(e.Fragment,{children:[e.jsx(p,{strong:!0,children:"Son giriş yapıldı"}),e.jsx("div",{children:e.jsx(p,{type:"secondary",style:{fontSize:12},children:a.lastLogin?k(a.lastLogin,"DD.MM.YYYY HH:mm"):"-"})})]})},{color:"blue",children:e.jsxs(e.Fragment,{children:[e.jsx(p,{strong:!0,children:"Profil güncellendi"}),e.jsx("div",{children:e.jsx(p,{type:"secondary",style:{fontSize:12},children:"10.01.2024 14:30"})})]})},{color:"gray",children:e.jsxs(e.Fragment,{children:[e.jsx(p,{strong:!0,children:"Hesap oluşturuldu"}),e.jsx("div",{children:e.jsx(p,{type:"secondary",style:{fontSize:12},children:k(a.createdAt)})})]})}]})},"3")]})})]})};export{ts as TenantUsers,ts as default};
