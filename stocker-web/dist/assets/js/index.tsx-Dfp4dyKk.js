var e,t,s,i,a,n,r,l,o,c,h,d,u,p,m,f,v,x,y,j,b,g,k,S,w,T,O,C,R,A,I,E,D,P,M=Object.defineProperty,q=Object.defineProperties,K=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,Q=e=>{throw TypeError(e)},U=(e,t,s)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,L=(e,t)=>{for(var s in t||(t={}))F.call(t,s)&&U(e,s,t[s]);if(z)for(var s of z(t))W.call(t,s)&&U(e,s,t[s]);return e},_=(e,t)=>q(e,K(t)),B=(e,t,s)=>t.has(e)||Q("Cannot "+s),$=(e,t,s)=>(B(e,t,"read from private field"),s?s.call(e):t.get(e)),G=(e,t,s)=>t.has(e)?Q("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),H=(e,t,s,i)=>(B(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),Y=(e,t,s)=>(B(e,t,"access private method"),s);import{am as N,ag as V,j as X,aS as J,L as Z,M as ee,N as te,aT as se,i as ie,_ as ae,aE as ne,an as re,ah as le,b7 as oe,a_ as ce,u as he,v as de,t as ue,b8 as pe,aW as me,aO as fe,aK as ve,b9 as xe,T as ye,e as je,aX as be,b5 as ge,ba as ke,bb as Se,b1 as we,aY as Te,S as Oe,E as Ce,aa as Re,aj as Ae,aB as Ie,D as Ee,bc as De,b2 as Pe,bd as Me,I as qe,be as Ke,b6 as ze,bf as Fe}from"./chunk-BpbpYdEY.js";import{r as We}from"./chunk-nBmrMGrr.js";import{S as Qe,p as Ue,r as Le,s as _e,c as Be,d as $e,i as Ge,e as He,t as Ye,f as Ne,g as Ve,h as Xe,j as Je,k as Ze,l as et,m as tt,o as st,b as it}from"../index-zploVIrm.js";import"./chunk-BsETiAjl.js";var at=(T=class extends Qe{constructor(v,x){super(),G(this,f),G(this,e),G(this,t),G(this,s),G(this,i),G(this,a),G(this,n),G(this,r),G(this,l),G(this,o),G(this,c),G(this,h),G(this,d),G(this,u),G(this,p),G(this,m,new Set),this.options=x,H(this,e,v),H(this,l,null),H(this,r,Ue()),this.options.experimental_prefetchInRender||$(this,r).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(x)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&($(this,t).addObserver(this),nt($(this,t),this.options)?Y(this,f,v).call(this):this.updateResult(),Y(this,f,b).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return rt($(this,t),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rt($(this,t),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Y(this,f,g).call(this),Y(this,f,k).call(this),$(this,t).removeObserver(this)}setOptions(s){const i=this.options,a=$(this,t);if(this.options=$(this,e).defaultQueryOptions(s),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof Le(this.options.enabled,$(this,t)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Y(this,f,S).call(this),$(this,t).setOptions(this.options),i._defaulted&&!_e(this.options,i)&&$(this,e).getQueryCache().notify({type:"observerOptionsUpdated",query:$(this,t),observer:this});const n=this.hasListeners();n&&lt($(this,t),a,this.options,i)&&Y(this,f,v).call(this),this.updateResult(),!n||$(this,t)===a&&Le(this.options.enabled,$(this,t))===Le(i.enabled,$(this,t))&&Be(this.options.staleTime,$(this,t))===Be(i.staleTime,$(this,t))||Y(this,f,x).call(this);const r=Y(this,f,y).call(this);!n||$(this,t)===a&&Le(this.options.enabled,$(this,t))===Le(i.enabled,$(this,t))&&r===$(this,p)||Y(this,f,j).call(this,r)}getOptimisticResult(s){const r=$(this,e).getQueryCache().build($(this,e),s),l=this.createResult(r,s);return function(e,t){if(!_e(e.getCurrentResult(),t))return!0;return!1}(this,l)&&(H(this,i,l),H(this,n,this.options),H(this,a,$(this,t).state)),l}getCurrentResult(){return $(this,i)}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),null==t||t(s),Reflect.get(e,s))})}trackProp(e){$(this,m).add(e)}getCurrentQuery(){return $(this,t)}refetch(e={}){var t=((e,t)=>{var s={};for(var i in e)F.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&z)for(var i of z(e))t.indexOf(i)<0&&W.call(e,i)&&(s[i]=e[i]);return s})(e,[]);return this.fetch(L({},t))}fetchOptimistic(t){const s=$(this,e).defaultQueryOptions(t),i=$(this,e).getQueryCache().build($(this,e),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(e){var t;return Y(this,f,v).call(this,_(L({},e),{cancelRefetch:null==(t=e.cancelRefetch)||t})).then(()=>(this.updateResult(),$(this,i)))}createResult(e,d){var u;const p=$(this,t),m=this.options,f=$(this,i),v=$(this,a),x=$(this,n),y=e!==p?e.state:$(this,s),{state:j}=e;let b,g=L({},j),k=!1;if(d._optimisticResults){const t=this.hasListeners(),s=!t&&nt(e,d),i=t&&lt(e,p,d,m);(s||i)&&(g=L(L({},g),Ve(j.data,e.options))),"isRestoring"===d._optimisticResults&&(g.fetchStatus="idle")}let{error:S,errorUpdatedAt:w,status:T}=g;b=g.data;let O=!1;if(void 0!==d.placeholderData&&void 0===b&&"pending"===T){let e;(null==f?void 0:f.isPlaceholderData)&&d.placeholderData===(null==x?void 0:x.placeholderData)?(e=f.data,O=!0):e="function"==typeof d.placeholderData?d.placeholderData(null==(u=$(this,h))?void 0:u.state.data,$(this,h)):d.placeholderData,void 0!==e&&(T="success",b=Xe(null==f?void 0:f.data,e,d),k=!0)}if(d.select&&void 0!==b&&!O)if(f&&b===(null==v?void 0:v.data)&&d.select===$(this,o))b=$(this,c);else try{H(this,o,d.select),b=d.select(b),b=Xe(null==f?void 0:f.data,b,d),H(this,c,b),H(this,l,null)}catch(P){H(this,l,P)}$(this,l)&&(S=$(this,l),b=$(this,c),w=Date.now(),T="error");const C="fetching"===g.fetchStatus,R="pending"===T,A="error"===T,I=R&&C,E=void 0!==b,D={status:T,fetchStatus:g.fetchStatus,isPending:R,isSuccess:"success"===T,isError:A,isInitialLoading:I,isLoading:I,data:b,dataUpdatedAt:g.dataUpdatedAt,error:S,errorUpdatedAt:w,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>y.dataUpdateCount||g.errorUpdateCount>y.errorUpdateCount,isFetching:C,isRefetching:C&&!R,isLoadingError:A&&!E,isPaused:"paused"===g.fetchStatus,isPlaceholderData:k,isRefetchError:A&&E,isStale:ot(e,d),refetch:this.refetch,promise:$(this,r),isEnabled:!1!==Le(d.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===D.status?e.reject(D.error):void 0!==D.data&&e.resolve(D.data)},s=()=>{const e=H(this,r,D.promise=Ue());t(e)},i=$(this,r);switch(i.status){case"pending":e.queryHash===p.queryHash&&t(i);break;case"fulfilled":"error"!==D.status&&D.data===i.value||s();break;case"rejected":"error"===D.status&&D.error===i.reason||s()}}return D}updateResult(){const e=$(this,i),s=this.createResult($(this,t),this.options);if(H(this,a,$(this,t).state),H(this,n,this.options),void 0!==$(this,a).data&&H(this,h,$(this,t)),_e(s,e))return;H(this,i,s);Y(this,f,w).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!$(this,m).size)return!0;const a=new Set(null!=s?s:$(this,m));return this.options.throwOnError&&a.add("error"),Object.keys($(this,i)).some(t=>{const s=t;return $(this,i)[s]!==e[s]&&a.has(s)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Y(this,f,b).call(this)}},e=new WeakMap,t=new WeakMap,s=new WeakMap,i=new WeakMap,a=new WeakMap,n=new WeakMap,r=new WeakMap,l=new WeakMap,o=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakMap,m=new WeakMap,f=new WeakSet,v=function(e){Y(this,f,S).call(this);let s=$(this,t).fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(s=s.catch($e)),s},x=function(){Y(this,f,g).call(this);const e=Be(this.options.staleTime,$(this,t));if(Ge||$(this,i).isStale||!He(e))return;const s=Ye($(this,i).dataUpdatedAt,e);H(this,d,setTimeout(()=>{$(this,i).isStale||this.updateResult()},s+1))},y=function(){var e;return null!=(e="function"==typeof this.options.refetchInterval?this.options.refetchInterval($(this,t)):this.options.refetchInterval)&&e},j=function(e){Y(this,f,k).call(this),H(this,p,e),!Ge&&!1!==Le(this.options.enabled,$(this,t))&&He($(this,p))&&0!==$(this,p)&&H(this,u,setInterval(()=>{(this.options.refetchIntervalInBackground||Ne.isFocused())&&Y(this,f,v).call(this)},$(this,p)))},b=function(){Y(this,f,x).call(this),Y(this,f,j).call(this,Y(this,f,y).call(this))},g=function(){$(this,d)&&(clearTimeout($(this,d)),H(this,d,void 0))},k=function(){$(this,u)&&(clearInterval($(this,u)),H(this,u,void 0))},S=function(){const i=$(this,e).getQueryCache().build($(this,e),this.options);if(i===$(this,t))return;const a=$(this,t);H(this,t,i),H(this,s,i.state),this.hasListeners()&&(null==a||a.removeObserver(this),i.addObserver(this))},w=function(s){Je.batch(()=>{s.listeners&&this.listeners.forEach(e=>{e($(this,i))}),$(this,e).getQueryCache().notify({query:$(this,t),type:"observerResultsUpdated"})})},T);function nt(e,t){return function(e,t){return!1!==Le(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&rt(e,t,t.refetchOnMount)}function rt(e,t,s){if(!1!==Le(t.enabled,e)&&"static"!==Be(t.staleTime,e)){const i="function"==typeof s?s(e):s;return"always"===i||!1!==i&&ot(e,t)}return!1}function lt(e,t,s,i){return(e!==t||!1===Le(i.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&ot(e,s)}function ot(e,t){return!1!==Le(t.enabled,e)&&e.isStaleByTime(Be(t.staleTime,e))}var ct=(P=class extends Qe{constructor(e,t){super(),G(this,I),G(this,O),G(this,C),G(this,R),G(this,A),H(this,O,e),this.setOptions(t),this.bindMethods(),Y(this,I,E).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=$(this,O).defaultMutationOptions(e),_e(this.options,s)||$(this,O).getMutationCache().notify({type:"observerOptionsUpdated",mutation:$(this,R),observer:this}),(null==s?void 0:s.mutationKey)&&this.options.mutationKey&&Ze(s.mutationKey)!==Ze(this.options.mutationKey)?this.reset():"pending"===(null==(t=$(this,R))?void 0:t.state.status)&&$(this,R).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||null==(e=$(this,R))||e.removeObserver(this)}onMutationUpdate(e){Y(this,I,E).call(this),Y(this,I,D).call(this,e)}getCurrentResult(){return $(this,C)}reset(){var e;null==(e=$(this,R))||e.removeObserver(this),H(this,R,void 0),Y(this,I,E).call(this),Y(this,I,D).call(this)}mutate(e,t){var s;return H(this,A,t),null==(s=$(this,R))||s.removeObserver(this),H(this,R,$(this,O).getMutationCache().build($(this,O),this.options)),$(this,R).addObserver(this),$(this,R).execute(e)}},O=new WeakMap,C=new WeakMap,R=new WeakMap,A=new WeakMap,I=new WeakSet,E=function(){var e,t;const s=null!=(t=null==(e=$(this,R))?void 0:e.state)?t:et();H(this,C,_(L({},s),{isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset}))},D=function(e){Je.batch(()=>{var t,s,i,a,n,r,l,o;if($(this,A)&&this.hasListeners()){const c=$(this,C).variables,h=$(this,C).context;"success"===(null==e?void 0:e.type)?(null==(s=(t=$(this,A)).onSuccess)||s.call(t,e.data,c,h),null==(a=(i=$(this,A)).onSettled)||a.call(i,e.data,null,c,h)):"error"===(null==e?void 0:e.type)&&(null==(r=(n=$(this,A)).onError)||r.call(n,e.error,c,h),null==(o=(l=$(this,A)).onSettled)||o.call(l,void 0,e.error,c,h))}this.listeners.forEach(e=>{e($(this,C))})})},P),ht=We.createContext(!1);ht.Provider;var dt=We.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),ut=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function pt(e,t,s){var i,a,n,r,l;const o=We.useContext(ht),c=We.useContext(dt),h=st(),d=h.defaultQueryOptions(e);null==(a=null==(i=h.getDefaultOptions().queries)?void 0:i._experimental_beforeQuery)||a.call(i,d),d._optimisticResults=o?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=e=>"static"===e?e:Math.max(null!=e?e:1e3,1e3),s=e.staleTime;e.staleTime="function"==typeof s?(...e)=>t(s(...e)):t(s),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}})(d),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(d,c),(e=>{We.useEffect(()=>{e.clearReset()},[e])})(c);const u=!h.getQueryCache().get(d.queryHash),[p]=We.useState(()=>new t(h,d)),m=p.getOptimisticResult(d),f=!o&&!1!==e.subscribed;if(We.useSyncExternalStore(We.useCallback(e=>{const t=f?p.subscribe(Je.batchCalls(e)):$e;return p.updateResult(),t},[p,f]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),We.useEffect(()=>{p.setOptions(d)},[d,p]),((e,t)=>(null==e?void 0:e.suspense)&&t.isPending)(d,m))throw ut(d,p,c);if((({result:e,errorResetBoundary:t,throwOnError:s,query:i,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(a&&void 0===e.data||tt(s,[e.error,i])))({result:m,errorResetBoundary:c,throwOnError:d.throwOnError,query:h.getQueryCache().get(d.queryHash),suspense:d.suspense}))throw m.error;if(null==(r=null==(n=h.getDefaultOptions().queries)?void 0:n._experimental_afterQuery)||r.call(n,d,m),d.experimental_prefetchInRender&&!Ge&&((e,t)=>e.isLoading&&e.isFetching&&!t)(m,o)){const e=u?ut(d,p,c):null==(l=h.getQueryCache().get(d.queryHash))?void 0:l.promise;null==e||e.catch($e).finally(()=>{p.updateResult()})}return d.notifyOnChangeProps?m:p.trackResult(m)}function mt(e,t){return pt(e,at)}function ft(e,t){const s=st(),[i]=We.useState(()=>new ct(s,e));We.useEffect(()=>{i.setOptions(e)},[i,e]);const a=We.useSyncExternalStore(We.useCallback(e=>i.subscribe(Je.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),n=We.useCallback((e,t)=>{i.mutate(e,t).catch($e)},[i]);if(a.error&&tt(i.options.throwOnError,[a.error]))throw a.error;return _(L({},a),{mutate:n,mutateAsync:a.mutate})}const vt=e=>{const t=new URLSearchParams;return(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.pageSize)&&t.append("pageSize",e.pageSize.toString()),(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.sortBy)&&t.append("sortBy",e.sortBy),(null==e?void 0:e.sortOrder)&&t.append("sortOrder",e.sortOrder),it.get(`/api/master/tenants?${t.toString()}`)},xt=e=>it.get(`/api/master/tenants/${e}`),yt=e=>it.post("/api/master/tenants",e),jt=(e,t)=>it.put(`/api/master/tenants/${e}`,t),bt=e=>it.delete(`/api/master/tenants/${e}`),gt=(e,t)=>it.post(`/api/master/tenants/${e}/suspend`,{reason:t}),kt=e=>it.post(`/api/master/tenants/${e}/activate`),St=e=>it.post(`/api/master/tenants/${e}/reset-password`),wt=e=>it.get(`/api/master/tenants/${e}/usage`),Tt=e=>it.get(`/api/master/tenants/${e}/activity`),Ot=e=>it.post(`/api/master/tenants/${e}/impersonate`),Ct={all:["master","tenants"],lists:()=>[...Ct.all,"list"],list:e=>[...Ct.lists(),e],details:()=>[...Ct.all,"detail"],detail:e=>[...Ct.details(),e],usage:e=>[...Ct.all,"usage",e],activity:e=>[...Ct.all,"activity",e]},{Search:Rt}=le,{RangePicker:At}=Fe,{TabPane:It}=ve,{Title:Et,Text:Dt,Paragraph:Pt}=Ce,Mt=()=>{var e,t,s,i,a;const[n,r]=We.useState(null),[l,o]=We.useState(!1),[c,h]=We.useState(!1),[d,u]=We.useState(""),[p,m]=We.useState("all"),[f,v]=We.useState(1),[x,y]=We.useState(10),[j]=V.useForm(),{data:b,isLoading:g,error:k,refetch:S}=(w={page:f,pageSize:x,status:"all"===p?void 0:p,search:d},mt({queryKey:Ct.list(w),queryFn:()=>vt(w),staleTime:3e5}));var w;const{data:T}=(O=(null==n?void 0:n.id)||"",mt({queryKey:Ct.detail(O),queryFn:()=>xt(O),enabled:!!O}));var O;const{data:C}=(e=>mt({queryKey:Ct.usage(e),queryFn:()=>wt(e),enabled:!!e}))((null==n?void 0:n.id)||""),{data:R}=(e=>mt({queryKey:Ct.activity(e),queryFn:()=>Tt(e),enabled:!!e}))((null==n?void 0:n.id)||""),A=(()=>{const e=st();return ft({mutationFn:e=>yt(e),onSuccess:()=>{e.invalidateQueries({queryKey:Ct.lists()}),N.success("Tenant başarıyla oluşturuldu")},onError:e=>{var t,s;N.error((null==(s=null==(t=e.response)?void 0:t.data)?void 0:s.message)||"Tenant oluşturulamadı")}})})(),I=(()=>{const e=st();return ft({mutationFn:({id:e,data:t})=>jt(e,t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:Ct.lists()}),e.invalidateQueries({queryKey:Ct.detail(s.id)}),N.success("Tenant başarıyla güncellendi")},onError:e=>{var t,s;N.error((null==(s=null==(t=e.response)?void 0:t.data)?void 0:s.message)||"Tenant güncellenemedi")}})})(),E=(()=>{const e=st();return ft({mutationFn:e=>bt(e),onSuccess:()=>{e.invalidateQueries({queryKey:Ct.lists()}),N.success("Tenant başarıyla silindi")},onError:e=>{var t,s;N.error((null==(s=null==(t=e.response)?void 0:t.data)?void 0:s.message)||"Tenant silinemedi")}})})(),D=(()=>{const e=st();return ft({mutationFn:({id:e,reason:t})=>gt(e,t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:Ct.lists()}),e.invalidateQueries({queryKey:Ct.detail(s.id)}),N.success("Tenant askıya alındı")},onError:e=>{var t,s;N.error((null==(s=null==(t=e.response)?void 0:t.data)?void 0:s.message)||"Tenant askıya alınamadı")}})})(),P=(()=>{const e=st();return ft({mutationFn:e=>kt(e),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:Ct.lists()}),e.invalidateQueries({queryKey:Ct.detail(s)}),N.success("Tenant aktifleştirildi")},onError:e=>{var t,s;N.error((null==(s=null==(t=e.response)?void 0:t.data)?void 0:s.message)||"Tenant aktifleştirilemedi")}})})(),M=ft({mutationFn:e=>St(e),onSuccess:()=>{N.success("Şifre sıfırlama linki gönderildi")},onError:e=>{var t,s;N.error((null==(s=null==(t=e.response)?void 0:t.data)?void 0:s.message)||"Şifre sıfırlama linki gönderilemedi")}}),q=ft({mutationFn:e=>Ot(e),onSuccess:e=>{N.success("Tenant paneline yönlendiriliyorsunuz..."),e.data&&(localStorage.setItem("impersonation_token",e.data.token),window.location.href=`/app/${e.data.tenantId}`)},onError:e=>{var t,s;N.error((null==(s=null==(t=e.response)?void 0:t.data)?void 0:s.message)||"Tenant paneline giriş yapılamadı")}}),K=e=>{r(e),j.setFieldsValue(e),h(!0)},z=[{title:"Tenant",key:"tenant",render:(e,t)=>X.jsxs(Oe,{direction:"vertical",size:0,children:[X.jsx(Dt,{strong:!0,children:t.name}),X.jsxs(Dt,{type:"secondary",style:{fontSize:12},children:["Kod: ",t.code]}),t.domain&&X.jsxs(Dt,{type:"secondary",style:{fontSize:12},children:[X.jsx(Re,{})," ",t.domain]})]})},{title:"İletişim",key:"contact",render:(e,t)=>X.jsxs(Oe,{direction:"vertical",size:0,children:[X.jsx(Dt,{children:t.contactName}),X.jsxs(Dt,{type:"secondary",style:{fontSize:12},children:[X.jsx(Ae,{})," ",t.contactEmail]}),t.contactPhone&&X.jsxs(Dt,{type:"secondary",style:{fontSize:12},children:[X.jsx(Ie,{})," ",t.contactPhone]})]})},{title:"Plan",dataIndex:"subscriptionStatus",key:"plan",render:e=>{const t="Active"===e?"green":"Trial"===e?"blue":"default";return X.jsx(ye,{color:t,children:e})}},{title:"Durum",key:"status",render:(e,t)=>{const s=t.isActive,i={active:{color:"success",text:"Aktif",icon:X.jsx(ae,{})},inactive:{color:"error",text:"Pasif",icon:X.jsx(re,{})}},a=s?i.active:i.inactive;return X.jsx(ye,{color:a.color,icon:a.icon,children:a.text})}},{title:"Kullanım",key:"usage",render:(e,t)=>X.jsx(Oe,{direction:"vertical",size:0,children:X.jsxs(Dt,{children:[X.jsx(je,{})," ",t.userCount||0," kullanıcı"]})})},{title:"Tarihler",key:"dates",render:(e,t)=>X.jsxs(Oe,{direction:"vertical",size:0,children:[X.jsxs(Dt,{type:"secondary",style:{fontSize:12},children:["Kayıt: ",new Date(t.createdAt).toLocaleDateString("tr-TR")]}),t.updatedAt&&X.jsxs(Dt,{type:"secondary",style:{fontSize:12},children:["Güncelleme: ",new Date(t.updatedAt).toLocaleDateString("tr-TR")]})]})},{title:"İşlemler",key:"actions",fixed:"right",width:120,render:(e,t)=>X.jsx(Ee,{menu:{items:[{key:"view",label:"Detayları Gör",icon:X.jsx(Pe,{}),onClick:()=>(r(t),void o(!0))},{key:"edit",label:"Düzenle",icon:X.jsx(ge,{}),onClick:()=>K(t)},{type:"divider"},{key:"login",label:"Tenant'a Giriş Yap",icon:X.jsx(Me,{}),onClick:()=>{return e=t,void q.mutate(e.id);var e}},{key:"reset",label:"Şifre Sıfırla",icon:X.jsx(qe,{}),onClick:()=>{return e=t,void fe.confirm({title:"Şifre Sıfırlama",content:`${e.contactEmail} adresine şifre sıfırlama linki gönderilecek.`,okText:"Gönder",cancelText:"İptal",onOk:()=>{M.mutate(e.id)}});var e}},{type:"divider"},{key:"suspend",label:t.isActive?"Pasifleştir":"Aktifleştir",icon:t.isActive?X.jsx(qe,{}):X.jsx(Ke,{}),danger:t.isActive,onClick:()=>{return e=t,void fe.confirm({title:"Tenant'ı Askıya Al",content:`${e.name} adlı tenant'ı askıya almak istediğinizden emin misiniz?`,okText:"Askıya Al",okType:"danger",cancelText:"İptal",onOk:()=>{"suspended"===e.status?P.mutate(e.id):D.mutate({id:e.id})}});var e}},{key:"delete",label:"Sil",icon:X.jsx(ze,{}),danger:!0,onClick:()=>{return e=t,void E.mutate(e.id);var e}}]},children:X.jsx(de,{icon:X.jsx(De,{})})})}],F=(null==(e=null==b?void 0:b.data)?void 0:e.data)||(null==b?void 0:b.data)||[],W=Array.isArray(F)?F.length:0,Q={all:W,active:F.filter(e=>e.isActive).length,inactive:F.filter(e=>!e.isActive).length,trial:F.filter(e=>"Trial"===e.subscriptionStatus).length};return X.jsxs(J,{title:"Tenant Yönetimi",subTitle:"Tüm tenant'ları görüntüle ve yönet",extra:[X.jsx(de,{icon:X.jsx(Se,{}),onClick:()=>S(),loading:g,children:"Yenile"},"refresh"),X.jsx(de,{icon:X.jsx(we,{}),children:"Dışa Aktar"},"export"),X.jsx(de,{type:"primary",icon:X.jsx(Te,{}),onClick:()=>{r(null),j.resetFields(),h(!0)},children:"Yeni Tenant"},"add")],children:[X.jsxs(Z,{gutter:[16,16],style:{marginBottom:24},children:[X.jsx(ee,{xs:24,sm:12,md:6,children:X.jsx(te,{children:X.jsx(se,{title:"Toplam Tenant",value:Q.all,prefix:X.jsx(ie,{}),valueStyle:{color:"#1890ff"}})})}),X.jsx(ee,{xs:24,sm:12,md:6,children:X.jsx(te,{children:X.jsx(se,{title:"Aktif",value:Q.active,prefix:X.jsx(ae,{}),valueStyle:{color:"#52c41a"}})})}),X.jsx(ee,{xs:24,sm:12,md:6,children:X.jsx(te,{children:X.jsx(se,{title:"Deneme",value:Q.trial,prefix:X.jsx(ne,{}),valueStyle:{color:"#faad14"}})})}),X.jsx(ee,{xs:24,sm:12,md:6,children:X.jsx(te,{children:X.jsx(se,{title:"Pasif",value:Q.inactive,prefix:X.jsx(re,{}),valueStyle:{color:"#ff4d4f"}})})})]}),X.jsx(te,{style:{marginBottom:24},children:X.jsxs(Z,{gutter:[16,16],children:[X.jsx(ee,{xs:24,sm:12,md:8,children:X.jsx(Rt,{placeholder:"Tenant ara...",allowClear:!0,enterButton:X.jsx(oe,{}),size:"large",onSearch:u,loading:g})}),X.jsx(ee,{xs:24,sm:12,md:4,children:X.jsxs(ce,{style:{width:"100%"},size:"large",placeholder:"Durum",value:p,onChange:m,children:[X.jsx(ce.Option,{value:"all",children:"Tümü"}),X.jsx(ce.Option,{value:"active",children:"Aktif"}),X.jsx(ce.Option,{value:"inactive",children:"Pasif"}),X.jsx(ce.Option,{value:"trial",children:"Deneme"})]})})]})}),X.jsx(te,{children:k?X.jsx(he,{message:"Hata",description:`Tenant'lar yüklenirken bir hata oluştu: ${k}`,type:"error",showIcon:!0,action:X.jsx(de,{size:"small",danger:!0,onClick:()=>S(),children:"Tekrar Dene"})}):g?X.jsx("div",{style:{textAlign:"center",padding:50},children:X.jsx(ue,{size:"large"})}):0===F.length?X.jsx(pe,{description:"Tenant bulunamadı"}):X.jsx(me,{columns:z,dataSource:F,rowKey:"id",pagination:{current:f,pageSize:x,total:W,onChange:(e,t)=>{v(e),y(t||10)},showSizeChanger:!0,showTotal:e=>`Toplam ${e} tenant`},scroll:{x:1200},loading:g})}),X.jsx(fe,{title:"Tenant Detayları",open:l,onCancel:()=>o(!1),width:800,footer:[X.jsx(de,{onClick:()=>o(!1),children:"Kapat"},"close"),X.jsx(de,{type:"primary",icon:X.jsx(ge,{}),onClick:()=>{o(!1),K(n)},children:"Düzenle"},"edit")],children:n&&X.jsxs(ve,{defaultActiveKey:"1",children:[X.jsx(It,{tab:"Genel Bilgiler",children:X.jsxs(xe,{bordered:!0,column:2,children:[X.jsx(xe.Item,{label:"Tenant Adı",children:n.name}),X.jsx(xe.Item,{label:"Kod",children:n.code}),X.jsx(xe.Item,{label:"Domain",children:n.domain||"-"}),X.jsx(xe.Item,{label:"Durum",children:X.jsx(ye,{color:n.isActive?"success":"error",children:n.isActive?"Aktif":"Pasif"})}),X.jsx(xe.Item,{label:"Abonelik Durumu",children:n.subscriptionStatus||"-"}),X.jsx(xe.Item,{label:"Kullanıcı Sayısı",children:n.userCount||0}),X.jsx(xe.Item,{label:"Kayıt Tarihi",children:new Date(n.createdAt).toLocaleString("tr-TR")})]})},"1"),X.jsx(It,{tab:"İletişim Bilgileri",children:X.jsxs(xe,{bordered:!0,column:1,children:[X.jsx(xe.Item,{label:"İletişim Adı",children:n.contactName}),X.jsx(xe.Item,{label:"E-posta",children:n.contactEmail}),X.jsx(xe.Item,{label:"Telefon",children:n.contactPhone||"-"}),X.jsx(xe.Item,{label:"Adres",children:n.address||"-"}),X.jsx(xe.Item,{label:"Şehir",children:n.city||"-"}),X.jsx(xe.Item,{label:"Ülke",children:n.country||"-"})]})},"2"),C&&X.jsx(It,{tab:"Kullanım İstatistikleri",children:X.jsxs(Z,{gutter:[16,16],children:[X.jsx(ee,{span:8,children:X.jsx(te,{children:X.jsx(se,{title:"Toplam Kullanıcı",value:(null==(t=C.data)?void 0:t.userCount)||0,prefix:X.jsx(je,{})})})}),X.jsx(ee,{span:8,children:X.jsx(te,{children:X.jsx(se,{title:"Depolama",value:(null==(s=C.data)?void 0:s.storageUsed)||0,suffix:"GB"})})}),X.jsx(ee,{span:8,children:X.jsx(te,{children:X.jsx(se,{title:"API Çağrısı",value:(null==(i=C.data)?void 0:i.apiCalls)||0})})})]})},"3"),R&&X.jsx(It,{tab:"İşlem Geçmişi",children:X.jsx(be,{children:null==(a=R.data)?void 0:a.map((e,t)=>X.jsxs(be.Item,{color:"success"===e.type?"green":"error"===e.type?"red":"blue",children:[e.description," - ",new Date(e.createdAt).toLocaleString("tr-TR")]},t))})},"4")]})}),X.jsx(fe,{title:n?"Tenant Düzenle":"Yeni Tenant",open:c,onCancel:()=>h(!1),onOk:()=>{j.validateFields().then(e=>{n?I.mutate({id:n.id,data:e}):A.mutate(e),h(!1)})},width:600,confirmLoading:A.isPending||I.isPending,children:X.jsxs(V,{form:j,layout:"vertical",children:[X.jsxs(Z,{gutter:16,children:[X.jsx(ee,{span:12,children:X.jsx(V.Item,{name:"name",label:"Tenant Adı",rules:[{required:!0}],children:X.jsx(le,{})})}),X.jsx(ee,{span:12,children:X.jsx(V.Item,{name:"code",label:"Kod",rules:[{required:!0}],children:X.jsx(le,{})})})]}),X.jsx(V.Item,{name:"domain",label:"Domain",children:X.jsx(le,{addonBefore:"https://",addonAfter:".stocker.app"})}),X.jsxs(Z,{gutter:16,children:[X.jsx(ee,{span:12,children:X.jsx(V.Item,{name:"contactName",label:"İletişim Adı",rules:[{required:!0}],children:X.jsx(le,{})})}),X.jsx(ee,{span:12,children:X.jsx(V.Item,{name:"contactEmail",label:"E-posta",rules:[{required:!0,type:"email"}],children:X.jsx(le,{})})})]}),X.jsx(V.Item,{name:"contactPhone",label:"Telefon",children:X.jsx(le,{})}),X.jsxs(Z,{gutter:16,children:[X.jsx(ee,{span:12,children:X.jsx(V.Item,{name:"city",label:"Şehir",children:X.jsx(le,{})})}),X.jsx(ee,{span:12,children:X.jsx(V.Item,{name:"country",label:"Ülke",children:X.jsx(le,{})})})]}),X.jsx(V.Item,{name:"address",label:"Adres",children:X.jsx(le.TextArea,{rows:2})}),X.jsx(V.Item,{name:"isActive",label:"Durum",valuePropName:"checked",children:X.jsx(ke,{checkedChildren:"Aktif",unCheckedChildren:"Pasif"})})]})})]})};export{Mt as MasterTenantsPage};
