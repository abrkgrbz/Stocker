var e=(e,r,t)=>new Promise((a,o)=>{var n=e=>{try{l(t.next(e))}catch(r){o(r)}},s=e=>{try{l(t.throw(e))}catch(r){o(r)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);l((t=t.apply(e,r)).next())});import{a as r}from"./chunk-BsETiAjl.js";import{ar as t}from"./chunk-CUCWWrQt.js";const a=r.create({baseURL:"https://api.stoocker.app/api",timeout:3e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{const r=localStorage.getItem("access_token");r&&(e.headers.Authorization=`Bearer ${r}`);const t=localStorage.getItem("tenant_id");return t&&(e.headers["X-Tenant-Id"]=t),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,r=>e(null,null,function*(){var e,a;const{response:o}=r;if(o)switch(o.status){case 401:t.error("Oturumunuz sona erdi. Lütfen tekrar giriş yapın."),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login";break;case 403:t.error("Bu işlem için yetkiniz bulunmamaktadır.");break;case 404:t.error("İstenen kaynak bulunamadı.");break;case 422:if(null==(e=o.data)?void 0:e.errors){const e=o.data.errors,r=Object.values(e).flat().join(", ");t.error(r)}else t.error("Girdiğiniz bilgileri kontrol edin.");break;case 500:t.error("Sunucu hatası oluştu. Lütfen daha sonra tekrar deneyin.");break;default:t.error((null==(a=o.data)?void 0:a.message)||"Bir hata oluştu.")}else r.request?t.error("Sunucuya bağlanılamıyor. İnternet bağlantınızı kontrol edin."):t.error("Beklenmeyen bir hata oluştu.");return Promise.reject(r)}));const o={get:(e,r)=>a.get(e,r),post:(e,r,t)=>a.post(e,r,t),put:(e,r,t)=>a.put(e,r,t),patch:(e,r,t)=>a.patch(e,r,t),delete:(e,r)=>a.delete(e,r),upload:(e,r,t)=>{const o=new FormData;return o.append("file",r),a.post(e,o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(t&&e.total){const r=Math.round(100*e.loaded/e.total);t(r)}}})},download:(r,o)=>e(null,null,function*(){try{const e=yield a.get(r,{responseType:"blob"}),t=new Blob([e.data]),n=window.URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=o||"download",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(n)}catch(e){throw t.error("Dosya indirilemedi."),e}})};export{o as a};
