var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,n=(e,n)=>{for(var l in n||(n={}))a.call(n,l)&&r(e,l,n[l]);if(t)for(var l of t(n))s.call(n,l)&&r(e,l,n[l]);return e},l=(e,t,a)=>new Promise((s,r)=>{var n=e=>{try{i(a.next(e))}catch(t){r(t)}},l=e=>{try{i(a.throw(e))}catch(t){r(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,l);i((a=a.apply(e,t)).next())});import{aD as i,j as o,s as c,q as d,o as h,b5 as p,Z as x,S as m,b6 as u,b7 as g,c as j,b8 as y,ao as v,a2 as f,a3 as b,a5 as k,b9 as S,ba as N,bb as w,bc as C,bd as T,be as P,R as A,$,aU as O,F,a4 as R,bf as I,A as z,Y as D,B,D as M,aa as E,aZ as U}from"./chunk-BkH-3fqb.js";import{r as G}from"./chunk-nBmrMGrr.js";import{C as L}from"./chunk-BHgm5-pG.js";import{b as H}from"../index-u6BN1-eL.js";import{A as J,P as K}from"./chunk-DoIar8Ay.js";import"./chunk-BsETiAjl.js";import"./chunk-DZXpKKs0.js";const Y={getStats:()=>H.get("/api/master/dashboard/stats"),getSystemHealth:()=>H.get("/api/master/dashboard/system-health"),getRevenueChart:(e="monthly")=>H.get(`/api/master/dashboard/revenue?period=${e}`),getRecentEvents:()=>H.get("/api/master/dashboard/events")},W={getAll:e=>{const t=new URLSearchParams;return(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.pageSize)&&t.append("pageSize",e.pageSize.toString()),(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.sortBy)&&t.append("sortBy",e.sortBy),(null==e?void 0:e.sortOrder)&&t.append("sortOrder",e.sortOrder),H.get(`/api/master/tenants?${t.toString()}`)},getById:e=>H.get(`/api/master/tenants/${e}`),create:e=>H.post("/api/master/tenants",e),update:(e,t)=>H.put(`/api/master/tenants/${e}`,t),delete:e=>H.delete(`/api/master/tenants/${e}`),toggleStatus:e=>H.post(`/api/master/tenants/${e}/toggle-status`).then(e=>e).catch(e=>{throw e}),suspend:(e,t)=>H.post(`/api/master/tenants/${e}/toggle-status`).then(e=>e).catch(e=>{throw e}),activate:e=>H.post(`/api/master/tenants/${e}/toggle-status`).then(e=>e).catch(e=>{throw e}),resetPassword:e=>H.post(`/api/master/tenants/${e}/reset-password`),getUsageStats:e=>H.get(`/api/master/tenants/${e}/statistics`),getActivityLog:e=>Promise.resolve({data:{data:[]}}),loginAsTenant:e=>Promise.resolve({data:{success:!0,data:{tenantId:e,message:"Impersonate feature is not implemented yet. Redirecting to tenant dashboard..."}}})},{Title:Z,Text:q,Paragraph:Q}=x,{RangePicker:V}=g,X=()=>{const[e,t]=G.useState("month"),[a,s]=G.useState(!1),[r,x]=G.useState([]),[g,U]=G.useState(null),[H,X]=G.useState(!0),[_,ee]=G.useState(!0);G.useEffect(()=>{te(),ae()},[]);const te=()=>l(null,null,function*(){var e;try{X(!0);const t=yield W.getAll();if(null==(e=t.data)?void 0:e.items){const e=t.data.items.slice(0,5).map((e,t)=>({key:e.id,rank:t+1,name:e.name||e.companyName,plan:e.subscriptionPlan||"Free",users:e.userCount||Math.floor(200*Math.random())+50,revenue:e.revenue||Math.floor(5e4*Math.random())+1e4,growth:40*Math.random()-10,status:e.isActive?"active":"suspended"}));x(e)}}catch(t){i.error("Failed to load tenants data")}finally{X(!1)}}),ae=()=>l(null,null,function*(){try{ee(!0);const e=yield Y.getStats();e.data&&U(e.data)}catch(e){U({totalRevenue:524350,activeTenants:386,totalUsers:4823,conversionRate:68.3})}finally{ee(!1)}}),se=[{title:"Toplam Gelir",value:(null==g?void 0:g.totalRevenue)||524350,prefix:"₺",change:(null==g?void 0:g.revenueChange)||12.5,changeType:((null==g?void 0:g.revenueChange)||12.5)>0?"increase":"decrease",icon:o.jsx(c,{}),color:"#667eea",bgColor:"rgba(102, 126, 234, 0.1)",description:"geçen aya göre"},{title:"Aktif Tenantlar",value:(null==g?void 0:g.activeTenants)||386,change:(null==g?void 0:g.tenantsChange)||8.3,changeType:((null==g?void 0:g.tenantsChange)||8.3)>0?"increase":"decrease",icon:o.jsx(d,{}),color:"#50cd89",bgColor:"rgba(80, 205, 137, 0.1)",description:"bu ay yeni"},{title:"Toplam Kullanıcı",value:(null==g?void 0:g.totalUsers)||4823,change:(null==g?void 0:g.usersChange)||15.7,changeType:((null==g?void 0:g.usersChange)||15.7)>0?"increase":"decrease",icon:o.jsx(h,{}),color:"#ffc700",bgColor:"rgba(255, 199, 0, 0.1)",description:"aktif kullanıcı"},{title:"Dönüşüm Oranı",value:(null==g?void 0:g.conversionRate)||68.3,suffix:"%",change:(null==g?void 0:g.conversionChange)||3.2,changeType:((null==g?void 0:g.conversionChange)||-3.2)>0?"increase":"decrease",icon:o.jsx(p,{}),color:"#f1416c",bgColor:"rgba(241, 65, 108, 0.1)",description:"denemelerden"}],re={data:[{month:"Jan",revenue:32e4,profit:12e4},{month:"Feb",revenue:385e3,profit:145e3},{month:"Mar",revenue:412e3,profit:168e3},{month:"Apr",revenue:445e3,profit:178e3},{month:"May",revenue:478e3,profit:195e3},{month:"Jun",revenue:524350,profit:21e4}],xField:"month",yField:"revenue",height:300,smooth:!0,color:"l(0) 0:#667eea 1:#764ba2",areaStyle:{fillOpacity:.6},xAxis:{grid:null},yAxis:{label:{formatter:e=>`$${parseInt(e)/1e3}k`},grid:{line:{style:{stroke:"#f0f0f0",lineWidth:1,lineDash:[4,4]}}}},tooltip:{customContent:(e,t)=>`<div style="padding: 8px;">\n          <div style="margin-bottom: 4px; font-weight: 600;">${e}</div>\n          ${t.map(e=>`<div style="color: ${e.color};">Revenue: $${e.data.revenue.toLocaleString()}</div>\n             <div style="color: ${e.color};">Profit: $${e.data.profit.toLocaleString()}</div>`).join("")}\n        </div>`}},ne={data:[{type:"Enterprise",value:45,percentage:11.6},{type:"Professional",value:125,percentage:32.4},{type:"Starter",value:186,percentage:48.2},{type:"Free Trial",value:30,percentage:7.8}],angleField:"value",colorField:"type",radius:.8,innerRadius:.6,height:300,label:{type:"inner",offset:"-50%",content:"{value}",style:{textAlign:"center",fontSize:14,fill:"#fff"}},color:["#667eea","#50cd89","#ffc700","#f1416c"],interactions:[{type:"element-active"}],statistic:{title:!1,content:{style:{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"24px",fontWeight:"bold"},content:"386\nTenants"}},legend:{position:"bottom",flipPage:!1}},le=[{title:"Sıra",dataIndex:"rank",key:"rank",width:80,render:e=>{const t={1:o.jsx(E,{style:{color:"#ffd700",fontSize:18}}),2:o.jsx(E,{style:{color:"#c0c0c0",fontSize:18}}),3:o.jsx(E,{style:{color:"#cd7f32",fontSize:18}})};return o.jsxs(m,{children:[t[e],o.jsxs(q,{strong:!0,children:["#",e]})]})}},{title:"Tenant",dataIndex:"name",key:"name",render:(e,t)=>o.jsxs(m,{children:[o.jsx(z,{style:{backgroundColor:"#667eea"},children:e?e.substring(0,2).toUpperCase():"NA"}),o.jsxs("div",{children:[o.jsx(q,{strong:!0,children:e||"İsimsiz"}),o.jsx("br",{}),o.jsx(D,{color:"Enterprise"===t.plan?"purple":"Professional"===t.plan?"blue":"Starter"===t.plan?"green":"default",children:t.plan})]})]})},{title:"Kullanıcılar",dataIndex:"users",key:"users",render:e=>o.jsx(B,{count:e,showZero:!0,style:{backgroundColor:"#667eea"}})},{title:"Gelir",dataIndex:"revenue",key:"revenue",render:e=>o.jsxs(q,{strong:!0,style:{color:"#50cd89"},children:["₺",e.toLocaleString()]})},{title:"Büyüme",dataIndex:"growth",key:"growth",render:e=>o.jsxs(m,{children:[e>0?o.jsx(S,{style:{color:"#50cd89"}}):o.jsx(N,{style:{color:"#f1416c"}}),o.jsxs(q,{style:{color:e>0?"#50cd89":"#f1416c"},children:[Math.abs(e).toFixed(1),"%"]})]})},{title:"Durum",dataIndex:"status",key:"status",render:e=>o.jsx(D,{color:"active"===e?"success":"error",children:"active"===e?"AKTİF":"ASKIDA"})},{title:"İşlemler",key:"action",render:()=>o.jsx(M,{menu:{items:[{key:"view",label:"Detayları Gör"},{key:"edit",label:"Düzenle"},{key:"delete",label:"Sil",danger:!0}]},trigger:["click"],children:o.jsx(j,{type:"text",icon:o.jsx(C,{})})})}];return o.jsxs("div",{className:"metronic-dashboard",children:[o.jsxs("div",{className:"dashboard-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsx(Z,{level:3,className:"page-title",children:"Dashboard"}),o.jsx(Q,{className:"page-description",children:"Welcome back! Here's what's happening with your platform today."})]}),o.jsx("div",{className:"header-actions",children:o.jsxs(m,{children:[o.jsxs(u,{value:e,onChange:t,style:{width:120},children:[o.jsx(u.Option,{value:"today",children:"Bugün"}),o.jsx(u.Option,{value:"week",children:"Bu Hafta"}),o.jsx(u.Option,{value:"month",children:"Bu Ay"}),o.jsx(u.Option,{value:"year",children:"Bu Yıl"})]}),o.jsx(V,{}),o.jsx(j,{icon:o.jsx(y,{}),children:"Dışa Aktar"}),o.jsx(j,{type:"primary",icon:o.jsx(v,{}),onClick:()=>{s(!0),Promise.all([te(),ae()]).finally(()=>{s(!1),i.success("Dashboard refreshed")})},loading:a,children:"Yenile"})]})})]}),o.jsx(f,{gutter:[24,24],className:"stats-row",children:se.map((e,t)=>o.jsx(b,{xs:24,sm:12,lg:6,children:o.jsx(k,{className:"stat-card",loading:a,children:o.jsxs("div",{className:"stat-card-content",children:[o.jsx("div",{className:"stat-icon",style:{backgroundColor:e.bgColor,color:e.color},children:e.icon}),o.jsxs("div",{className:"stat-details",children:[o.jsx(q,{className:"stat-title",children:e.title}),o.jsxs("div",{className:"stat-value",children:[e.prefix,o.jsx(L,{end:e.value,duration:2,separator:",",decimals:"%"===e.suffix?1:0}),e.suffix]}),o.jsxs("div",{className:"stat-change",children:["increase"===e.changeType?o.jsx(S,{style:{color:"#50cd89"}}):o.jsx(N,{style:{color:"#f1416c"}}),o.jsxs("span",{className:`change-value ${e.changeType}`,children:[e.change,"%"]}),o.jsx("span",{className:"change-description",children:e.description})]})]})]})})},t))}),o.jsxs(f,{gutter:[24,24],className:"charts-row",children:[o.jsx(b,{xs:24,lg:16,children:o.jsx(k,{title:"Revenue Overview",extra:o.jsxs(m,{children:[o.jsx(j,{type:"text",icon:o.jsx(w,{}),children:"Filter"}),o.jsx(j,{type:"text",icon:o.jsx(C,{})})]}),className:"chart-card",loading:a,children:o.jsx(J,n({},re))})}),o.jsx(b,{xs:24,lg:8,children:o.jsx(k,{title:"Tenant Distribution",extra:o.jsx(j,{type:"text",icon:o.jsx(C,{})}),className:"chart-card",loading:a,children:o.jsx(K,n({},ne))})})]}),o.jsxs(f,{gutter:[24,24],className:"tables-row",children:[o.jsx(b,{xs:24,lg:16,children:o.jsx(k,{title:"En İyi Performans Gösteren Tenantlar",extra:o.jsxs(m,{children:[o.jsx(j,{type:"text",children:"Tümünü Gör"}),o.jsx(j,{type:"text",icon:o.jsx(C,{})})]}),className:"table-card",children:o.jsx(T,{columns:le,dataSource:r.length>0?r:[],pagination:!1,loading:H})})}),o.jsx(b,{xs:24,lg:8,children:o.jsx(k,{title:"Son Aktiviteler",extra:o.jsx(j,{type:"text",children:"Tümünü Gör"}),className:"activity-card",loading:a,children:o.jsx(P,{children:[{type:"success",title:"Yeni tenant kaydı",description:"TechCorp Solutions platforma katıldı",time:"2 dakika önce",user:"John Doe",avatar:null},{type:"info",title:"Ödeme alındı",description:"Fatura #1234 ödendi",time:"1 saat önce",user:"Jane Smith",avatar:null},{type:"warning",title:"Abonelik sona eriyor",description:"CloudFirst Inc aboneliği 3 gün içinde sona erecek",time:"3 saat önce",user:"Sistem",avatar:null},{type:"error",title:"Ödeme başarısız",description:"StartupHub için ödeme işlenemedi",time:"5 saat önce",user:"Sistem",avatar:null}].map((e,t)=>o.jsx(P.Item,{color:"success"===e.type?"green":"info"===e.type?"blue":"warning"===e.type?"orange":"red",children:o.jsxs("div",{className:"activity-item",children:[o.jsx(q,{strong:!0,children:e.title}),o.jsx("br",{}),o.jsx(q,{type:"secondary",children:e.description}),o.jsx("br",{}),o.jsxs(m,{className:"activity-meta",children:[o.jsx(A,{}),o.jsx(q,{type:"secondary",style:{fontSize:12},children:e.time}),e.user&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"•"}),o.jsxs(q,{type:"secondary",style:{fontSize:12},children:[e.user," tarafından"]})]})]})]})},t))})})})]}),o.jsx(f,{gutter:[24,24],className:"quick-stats-row",children:o.jsx(b,{xs:24,children:o.jsx(k,{title:"Platform Performance",className:"performance-card",children:o.jsxs(f,{gutter:[24,24],children:[o.jsx(b,{xs:24,sm:12,md:6,children:o.jsxs("div",{className:"performance-metric",children:[o.jsxs("div",{className:"metric-header",children:[o.jsx(q,{type:"secondary",children:"Server Uptime"}),o.jsx($,{style:{color:"#50cd89"}})]}),o.jsx(O,{percent:99.9,strokeColor:"#50cd89"}),o.jsx(q,{strong:!0,children:"99.9% Uptime"})]})}),o.jsx(b,{xs:24,sm:12,md:6,children:o.jsxs("div",{className:"performance-metric",children:[o.jsxs("div",{className:"metric-header",children:[o.jsx(q,{type:"secondary",children:"Response Time"}),o.jsx(F,{style:{color:"#ffc700"}})]}),o.jsx(O,{percent:85,strokeColor:"#ffc700"}),o.jsx(q,{strong:!0,children:"245ms Average"})]})}),o.jsx(b,{xs:24,sm:12,md:6,children:o.jsxs("div",{className:"performance-metric",children:[o.jsxs("div",{className:"metric-header",children:[o.jsx(q,{type:"secondary",children:"API Calls"}),o.jsx(R,{style:{color:"#667eea"}})]}),o.jsx(O,{percent:68,strokeColor:"#667eea"}),o.jsx(q,{strong:!0,children:"1.2M Today"})]})}),o.jsx(b,{xs:24,sm:12,md:6,children:o.jsxs("div",{className:"performance-metric",children:[o.jsxs("div",{className:"metric-header",children:[o.jsx(q,{type:"secondary",children:"Error Rate"}),o.jsx(I,{style:{color:"#f1416c"}})]}),o.jsx(O,{percent:2,strokeColor:"#f1416c"}),o.jsx(q,{strong:!0,children:"0.02% Errors"})]})})]})})})})]})},{Title:_,Text:ee,Paragraph:te}=x,{RangePicker:ae}=g,{TabPane:se}=U,re=()=>o.jsx(X,{});export{re as MasterDashboard,X as MetronicDashboard};
