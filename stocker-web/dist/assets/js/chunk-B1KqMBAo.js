var u=(e,t,r)=>new Promise((s,a)=>{var o=c=>{try{l(r.next(c))}catch(d){a(d)}},p=c=>{try{l(r.throw(c))}catch(d){a(d)}},l=c=>c.done?s(c.value):Promise.resolve(c.value).then(o,p);l((r=r.apply(e,t)).next())});import{a as m}from"./chunk-CX9aqCgN.js";import{am as n}from"./chunk-CQugYT0Y.js";const b="https://api.stoocker.app/api",i=m.create({baseURL:b,timeout:3e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{const t=localStorage.getItem("access_token");t&&(e.headers.Authorization=`Bearer ${t}`);const r=localStorage.getItem("tenant_id");return r&&(e.headers["X-Tenant-Id"]=r),e},e=>Promise.reject(e));i.interceptors.response.use(e=>e,e=>u(null,null,function*(){var r,s;const{response:t}=e;if(t)switch(t.status){case 401:n.error("Oturumunuz sona erdi. Lütfen tekrar giriş yapın."),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login";break;case 403:n.error("Bu işlem için yetkiniz bulunmamaktadır.");break;case 404:n.error("İstenen kaynak bulunamadı.");break;case 422:if((r=t.data)!=null&&r.errors){const a=t.data.errors,o=Object.values(a).flat().join(", ");n.error(o)}else n.error("Girdiğiniz bilgileri kontrol edin.");break;case 500:n.error("Sunucu hatası oluştu. Lütfen daha sonra tekrar deneyin.");break;default:n.error(((s=t.data)==null?void 0:s.message)||"Bir hata oluştu.")}else e.request?n.error("Sunucuya bağlanılamıyor. İnternet bağlantınızı kontrol edin."):n.error("Beklenmeyen bir hata oluştu.");return Promise.reject(e)}));const y={get:(e,t)=>i.get(e,t),post:(e,t,r)=>i.post(e,t,r),put:(e,t,r)=>i.put(e,t,r),patch:(e,t,r)=>i.patch(e,t,r),delete:(e,t)=>i.delete(e,t),upload:(e,t,r)=>{const s=new FormData;return s.append("file",t),i.post(e,s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:a=>{if(r&&a.total){const o=Math.round(a.loaded*100/a.total);r(o)}}})},download:(e,t)=>u(null,null,function*(){try{const r=yield i.get(e,{responseType:"blob"}),s=new Blob([r.data]),a=window.URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=t||"download",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}catch(r){throw n.error("Dosya indirilemedi."),r}})};export{y as a};
