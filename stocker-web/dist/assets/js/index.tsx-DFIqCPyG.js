var $t=Object.defineProperty,Kt=Object.defineProperties;var zt=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var ot=e=>{throw TypeError(e)};var at=(e,t,s)=>t in e?$t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,N=(e,t)=>{for(var s in t||(t={}))rt.call(t,s)&&at(e,s,t[s]);if(Ie)for(var s of Ie(t))lt.call(t,s)&&at(e,s,t[s]);return e},ke=(e,t)=>Kt(e,zt(t));var ct=(e,t)=>{var s={};for(var a in e)rt.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&Ie)for(var a of Ie(e))t.indexOf(a)<0&&lt.call(e,a)&&(s[a]=e[a]);return s};var Ke=(e,t,s)=>t.has(e)||ot("Cannot "+s);var n=(e,t,s)=>(Ke(e,t,"read from private field"),s?s.call(e):t.get(e)),y=(e,t,s)=>t.has(e)?ot("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),p=(e,t,s,a)=>(Ke(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),m=(e,t,s)=>(Ke(e,t,"access private method"),s);import{am as E,ag as M,j as i,aS as Ut,M as he,N as R,O as U,aT as te,i as qt,_ as ut,aE as _t,w as ht,ah as z,b7 as Lt,a_ as ge,an as Bt,v as se,t as Gt,b8 as Ht,aW as Nt,aO as Ae,aK as Ct,b9 as C,T as ze,e as dt,aX as ft,b5 as pt,ba as Vt,bb as Yt,b1 as Wt,aY as Jt,S as we,F as Xt,aa as Zt,aj as es,aB as ts,D as ss,bc as is,b2 as ns,bd as as,J as mt,be as rs,b6 as ls,bf as os}from"./chunk-CQugYT0Y.js";import{r as b}from"./chunk-a6Wk6XzP.js";import{S as It,p as xt,r as Q,s as De,c as je,d as Pe,i as Ue,e as yt,t as cs,f as us,g as hs,h as gt,j as Me,k as bt,l as ds,m as kt,o as re,b as F}from"../index-BEW7Pg8Q.js";import"./chunk-CX9aqCgN.js";var w,c,ve,I,ie,de,V,Y,Se,fe,pe,ne,ae,W,me,d,be,qe,_e,Le,Be,Ge,He,Ne,At,Tt,fs=(Tt=class extends It{constructor(t,s){super();y(this,d);y(this,w);y(this,c);y(this,ve);y(this,I);y(this,ie);y(this,de);y(this,V);y(this,Y);y(this,Se);y(this,fe);y(this,pe);y(this,ne);y(this,ae);y(this,W);y(this,me,new Set);this.options=s,p(this,w,t),p(this,Y,null),p(this,V,xt()),this.options.experimental_prefetchInRender||n(this,V).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(n(this,c).addObserver(this),jt(n(this,c),this.options)?m(this,d,be).call(this):this.updateResult(),m(this,d,Be).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ve(n(this,c),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ve(n(this,c),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,m(this,d,Ge).call(this),m(this,d,He).call(this),n(this,c).removeObserver(this)}setOptions(t){const s=this.options,a=n(this,c);if(this.options=n(this,w).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Q(this.options.enabled,n(this,c))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");m(this,d,Ne).call(this),n(this,c).setOptions(this.options),s._defaulted&&!De(this.options,s)&&n(this,w).getQueryCache().notify({type:"observerOptionsUpdated",query:n(this,c),observer:this});const h=this.hasListeners();h&&vt(n(this,c),a,this.options,s)&&m(this,d,be).call(this),this.updateResult(),h&&(n(this,c)!==a||Q(this.options.enabled,n(this,c))!==Q(s.enabled,n(this,c))||je(this.options.staleTime,n(this,c))!==je(s.staleTime,n(this,c)))&&m(this,d,qe).call(this);const l=m(this,d,_e).call(this);h&&(n(this,c)!==a||Q(this.options.enabled,n(this,c))!==Q(s.enabled,n(this,c))||l!==n(this,W))&&m(this,d,Le).call(this,l)}getOptimisticResult(t){const s=n(this,w).getQueryCache().build(n(this,w),t),a=this.createResult(s,t);return ms(this,a)&&(p(this,I,a),p(this,de,this.options),p(this,ie,n(this,c).state)),a}getCurrentResult(){return n(this,I)}trackResult(t,s){return new Proxy(t,{get:(a,h)=>(this.trackProp(h),s==null||s(h),Reflect.get(a,h))})}trackProp(t){n(this,me).add(t)}getCurrentQuery(){return n(this,c)}refetch(s={}){var t=ct(s,[]);return this.fetch(N({},t))}fetchOptimistic(t){const s=n(this,w).defaultQueryOptions(t),a=n(this,w).getQueryCache().build(n(this,w),s);return a.fetch().then(()=>this.createResult(a,s))}fetch(t){var s;return m(this,d,be).call(this,ke(N({},t),{cancelRefetch:(s=t.cancelRefetch)!=null?s:!0})).then(()=>(this.updateResult(),n(this,I)))}createResult(t,s){var Re;const a=n(this,c),h=this.options,l=n(this,I),o=n(this,ie),k=n(this,de),S=t!==a?t.state:n(this,ve),{state:T}=t;let f=N({},T),B=!1,g;if(s._optimisticResults){const A=this.hasListeners(),ce=!A&&jt(t,s),H=A&&vt(t,a,s,h);(ce||H)&&(f=N(N({},f),hs(T.data,t.options))),s._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:K,errorUpdatedAt:D,status:j}=f;g=f.data;let Z=!1;if(s.placeholderData!==void 0&&g===void 0&&j==="pending"){let A;l!=null&&l.isPlaceholderData&&s.placeholderData===(k==null?void 0:k.placeholderData)?(A=l.data,Z=!0):A=typeof s.placeholderData=="function"?s.placeholderData((Re=n(this,pe))==null?void 0:Re.state.data,n(this,pe)):s.placeholderData,A!==void 0&&(j="success",g=gt(l==null?void 0:l.data,A,s),B=!0)}if(s.select&&g!==void 0&&!Z)if(l&&g===(o==null?void 0:o.data)&&s.select===n(this,Se))g=n(this,fe);else try{p(this,Se,s.select),g=s.select(g),g=gt(l==null?void 0:l.data,g,s),p(this,fe,g),p(this,Y,null)}catch(A){p(this,Y,A)}n(this,Y)&&(K=n(this,Y),g=n(this,fe),D=Date.now(),j="error");const oe=f.fetchStatus==="fetching",Te=j==="pending",G=j==="error",xe=Te&&oe,ye=g!==void 0,P={status:j,fetchStatus:f.fetchStatus,isPending:Te,isSuccess:j==="success",isError:G,isInitialLoading:xe,isLoading:xe,data:g,dataUpdatedAt:f.dataUpdatedAt,error:K,errorUpdatedAt:D,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>S.dataUpdateCount||f.errorUpdateCount>S.errorUpdateCount,isFetching:oe,isRefetching:oe&&!Te,isLoadingError:G&&!ye,isPaused:f.fetchStatus==="paused",isPlaceholderData:B,isRefetchError:G&&ye,isStale:We(t,s),refetch:this.refetch,promise:n(this,V),isEnabled:Q(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=ue=>{P.status==="error"?ue.reject(P.error):P.data!==void 0&&ue.resolve(P.data)},ce=()=>{const ue=p(this,V,P.promise=xt());A(ue)},H=n(this,V);switch(H.status){case"pending":t.queryHash===a.queryHash&&A(H);break;case"fulfilled":(P.status==="error"||P.data!==H.value)&&ce();break;case"rejected":(P.status!=="error"||P.error!==H.reason)&&ce();break}}return P}updateResult(){const t=n(this,I),s=this.createResult(n(this,c),this.options);if(p(this,ie,n(this,c).state),p(this,de,this.options),n(this,ie).data!==void 0&&p(this,pe,n(this,c)),De(s,t))return;p(this,I,s);const a=()=>{if(!t)return!0;const{notifyOnChangeProps:h}=this.options,l=typeof h=="function"?h():h;if(l==="all"||!l&&!n(this,me).size)return!0;const o=new Set(l!=null?l:n(this,me));return this.options.throwOnError&&o.add("error"),Object.keys(n(this,I)).some(k=>{const x=k;return n(this,I)[x]!==t[x]&&o.has(x)})};m(this,d,At).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&m(this,d,Be).call(this)}},w=new WeakMap,c=new WeakMap,ve=new WeakMap,I=new WeakMap,ie=new WeakMap,de=new WeakMap,V=new WeakMap,Y=new WeakMap,Se=new WeakMap,fe=new WeakMap,pe=new WeakMap,ne=new WeakMap,ae=new WeakMap,W=new WeakMap,me=new WeakMap,d=new WeakSet,be=function(t){m(this,d,Ne).call(this);let s=n(this,c).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(Pe)),s},qe=function(){m(this,d,Ge).call(this);const t=je(this.options.staleTime,n(this,c));if(Ue||n(this,I).isStale||!yt(t))return;const a=cs(n(this,I).dataUpdatedAt,t)+1;p(this,ne,setTimeout(()=>{n(this,I).isStale||this.updateResult()},a))},_e=function(){var t;return(t=typeof this.options.refetchInterval=="function"?this.options.refetchInterval(n(this,c)):this.options.refetchInterval)!=null?t:!1},Le=function(t){m(this,d,He).call(this),p(this,W,t),!(Ue||Q(this.options.enabled,n(this,c))===!1||!yt(n(this,W))||n(this,W)===0)&&p(this,ae,setInterval(()=>{(this.options.refetchIntervalInBackground||us.isFocused())&&m(this,d,be).call(this)},n(this,W)))},Be=function(){m(this,d,qe).call(this),m(this,d,Le).call(this,m(this,d,_e).call(this))},Ge=function(){n(this,ne)&&(clearTimeout(n(this,ne)),p(this,ne,void 0))},He=function(){n(this,ae)&&(clearInterval(n(this,ae)),p(this,ae,void 0))},Ne=function(){const t=n(this,w).getQueryCache().build(n(this,w),this.options);if(t===n(this,c))return;const s=n(this,c);p(this,c,t),p(this,ve,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},At=function(t){Me.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(n(this,I))}),n(this,w).getQueryCache().notify({query:n(this,c),type:"observerResultsUpdated"})})},Tt);function ps(e,t){return Q(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function jt(e,t){return ps(e,t)||e.state.data!==void 0&&Ve(e,t,t.refetchOnMount)}function Ve(e,t,s){if(Q(t.enabled,e)!==!1&&je(t.staleTime,e)!=="static"){const a=typeof s=="function"?s(e):s;return a==="always"||a!==!1&&We(e,t)}return!1}function vt(e,t,s,a){return(e!==t||Q(a.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&We(e,s)}function We(e,t){return Q(t.enabled,e)!==!1&&e.isStaleByTime(je(t.staleTime,e))}function ms(e,t){return!De(e.getCurrentResult(),t)}var J,X,O,_,L,Ee,Ye,Rt,xs=(Rt=class extends It{constructor(t,s){super();y(this,L);y(this,J);y(this,X);y(this,O);y(this,_);p(this,J,t),this.setOptions(s),this.bindMethods(),m(this,L,Ee).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var a;const s=this.options;this.options=n(this,J).defaultMutationOptions(t),De(this.options,s)||n(this,J).getMutationCache().notify({type:"observerOptionsUpdated",mutation:n(this,O),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&bt(s.mutationKey)!==bt(this.options.mutationKey)?this.reset():((a=n(this,O))==null?void 0:a.state.status)==="pending"&&n(this,O).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=n(this,O))==null||t.removeObserver(this)}onMutationUpdate(t){m(this,L,Ee).call(this),m(this,L,Ye).call(this,t)}getCurrentResult(){return n(this,X)}reset(){var t;(t=n(this,O))==null||t.removeObserver(this),p(this,O,void 0),m(this,L,Ee).call(this),m(this,L,Ye).call(this)}mutate(t,s){var a;return p(this,_,s),(a=n(this,O))==null||a.removeObserver(this),p(this,O,n(this,J).getMutationCache().build(n(this,J),this.options)),n(this,O).addObserver(this),n(this,O).execute(t)}},J=new WeakMap,X=new WeakMap,O=new WeakMap,_=new WeakMap,L=new WeakSet,Ee=function(){var s,a;const t=(a=(s=n(this,O))==null?void 0:s.state)!=null?a:ds();p(this,X,ke(N({},t),{isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}))},Ye=function(t){Me.batch(()=>{var s,a,h,l,o,k,x,S;if(n(this,_)&&this.hasListeners()){const T=n(this,X).variables,f=n(this,X).context;(t==null?void 0:t.type)==="success"?((a=(s=n(this,_)).onSuccess)==null||a.call(s,t.data,T,f),(l=(h=n(this,_)).onSettled)==null||l.call(h,t.data,null,T,f)):(t==null?void 0:t.type)==="error"&&((k=(o=n(this,_)).onError)==null||k.call(o,t.error,T,f),(S=(x=n(this,_)).onSettled)==null||S.call(x,void 0,t.error,T,f))}this.listeners.forEach(T=>{T(n(this,X))})})},Rt),wt=b.createContext(!1),ys=()=>b.useContext(wt);wt.Provider;function gs(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var bs=b.createContext(gs()),js=()=>b.useContext(bs),vs=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Ss=e=>{b.useEffect(()=>{e.clearReset()},[e])},Ts=({result:e,errorResetBoundary:t,throwOnError:s,query:a,suspense:h})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(h&&e.data===void 0||kt(s,[e.error,a])),Rs=e=>{if(e.suspense){const t=a=>a==="static"?a:Math.max(a!=null?a:1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>t(s(...a)):t(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Cs=(e,t)=>e.isLoading&&e.isFetching&&!t,Is=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,St=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function ks(e,t,s){var f,B,g,K,D;const a=ys(),h=js(),l=re(),o=l.defaultQueryOptions(e);(B=(f=l.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||B.call(f,o),o._optimisticResults=a?"isRestoring":"optimistic",Rs(o),vs(o,h),Ss(h);const k=!l.getQueryCache().get(o.queryHash),[x]=b.useState(()=>new t(l,o)),S=x.getOptimisticResult(o),T=!a&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(j=>{const Z=T?x.subscribe(Me.batchCalls(j)):Pe;return x.updateResult(),Z},[x,T]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),b.useEffect(()=>{x.setOptions(o)},[o,x]),Is(o,S))throw St(o,x,h);if(Ts({result:S,errorResetBoundary:h,throwOnError:o.throwOnError,query:l.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw S.error;if((K=(g=l.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||K.call(g,o,S),o.experimental_prefetchInRender&&!Ue&&Cs(S,a)){const j=k?St(o,x,h):(D=l.getQueryCache().get(o.queryHash))==null?void 0:D.promise;j==null||j.catch(Pe).finally(()=>{x.updateResult()})}return o.notifyOnChangeProps?S:x.trackResult(S)}function Fe(e,t){return ks(e,fs)}function le(e,t){const s=re(),[a]=b.useState(()=>new xs(s,e));b.useEffect(()=>{a.setOptions(e)},[a,e]);const h=b.useSyncExternalStore(b.useCallback(o=>a.subscribe(Me.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),l=b.useCallback((o,k)=>{a.mutate(o,k).catch(Pe)},[a]);if(h.error&&kt(a.options.throwOnError,[h.error]))throw h.error;return ke(N({},h),{mutate:l,mutateAsync:h.mutate})}const $={getAll:e=>{const t=new URLSearchParams;return e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.pageSize&&t.append("pageSize",e.pageSize.toString()),e!=null&&e.status&&t.append("status",e.status),e!=null&&e.search&&t.append("search",e.search),e!=null&&e.sortBy&&t.append("sortBy",e.sortBy),e!=null&&e.sortOrder&&t.append("sortOrder",e.sortOrder),F.get(`/api/master/tenants?${t.toString()}`)},getById:e=>F.get(`/api/master/tenants/${e}`),create:e=>F.post("/api/master/tenants",e),update:(e,t)=>F.put(`/api/master/tenants/${e}`,t),delete:e=>F.delete(`/api/master/tenants/${e}`),suspend:(e,t)=>F.post(`/api/master/tenants/${e}/suspend`,{reason:t}),activate:e=>F.post(`/api/master/tenants/${e}/activate`),resetPassword:e=>F.post(`/api/master/tenants/${e}/reset-password`),getUsageStats:e=>F.get(`/api/master/tenants/${e}/usage`),getActivityLog:e=>F.get(`/api/master/tenants/${e}/activity`),loginAsTenant:e=>F.post(`/api/master/tenants/${e}/impersonate`)},v={all:["master","tenants"],lists:()=>[...v.all,"list"],list:e=>[...v.lists(),e],details:()=>[...v.all,"detail"],detail:e=>[...v.details(),e],usage:e=>[...v.all,"usage",e],activity:e=>[...v.all,"activity",e]},As=e=>Fe({queryKey:v.list(e),queryFn:()=>$.getAll(e),staleTime:300*1e3}),ws=e=>Fe({queryKey:v.detail(e),queryFn:()=>$.getById(e),enabled:!!e}),Os=e=>Fe({queryKey:v.usage(e),queryFn:()=>$.getUsageStats(e),enabled:!!e}),Es=e=>Fe({queryKey:v.activity(e),queryFn:()=>$.getActivityLog(e),enabled:!!e}),Ds=()=>{const e=re();return le({mutationFn:t=>$.create(t),onSuccess:()=>{e.invalidateQueries({queryKey:v.lists()}),E.success("Tenant başarıyla oluşturuldu")},onError:t=>{var s,a;E.error(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Tenant oluşturulamadı")}})},Ps=()=>{const e=re();return le({mutationFn:({id:t,data:s})=>$.update(t,s),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:v.lists()}),e.invalidateQueries({queryKey:v.detail(s.id)}),E.success("Tenant başarıyla güncellendi")},onError:t=>{var s,a;E.error(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Tenant güncellenemedi")}})},Ms=()=>{const e=re();return le({mutationFn:t=>$.delete(t),onSuccess:()=>{e.invalidateQueries({queryKey:v.lists()}),E.success("Tenant başarıyla silindi")},onError:t=>{var s,a;E.error(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Tenant silinemedi")}})},Fs=()=>{const e=re();return le({mutationFn:({id:t,reason:s})=>$.suspend(t,s),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:v.lists()}),e.invalidateQueries({queryKey:v.detail(s.id)}),E.success("Tenant askıya alındı")},onError:t=>{var s,a;E.error(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Tenant askıya alınamadı")}})},Qs=()=>{const e=re();return le({mutationFn:t=>$.activate(t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:v.lists()}),e.invalidateQueries({queryKey:v.detail(s)}),E.success("Tenant aktifleştirildi")},onError:t=>{var s,a;E.error(((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Tenant aktifleştirilemedi")}})},$s=()=>le({mutationFn:e=>$.resetPassword(e),onSuccess:()=>{E.success("Şifre sıfırlama linki gönderildi")},onError:e=>{var t,s;E.error(((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"Şifre sıfırlama linki gönderilemedi")}}),Ks=()=>le({mutationFn:e=>$.loginAsTenant(e),onSuccess:e=>{E.success("Tenant paneline yönlendiriliyorsunuz..."),e.data&&(localStorage.setItem("impersonation_token",e.data.token),window.location.href=`/app/${e.data.tenantId}`)},onError:e=>{var t,s;E.error(((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||"Tenant paneline giriş yapılamadı")}}),{Search:zs}=z,{RangePicker:Gs}=os,{TabPane:Oe}=Ct,{Title:Hs,Text:q,Paragraph:Ns}=Xt,Vs=()=>{var Ze,et,tt,st,it;const[e,t]=b.useState(null),[s,a]=b.useState(!1),[h,l]=b.useState(!1),[o,k]=b.useState(""),[x,S]=b.useState("all"),[T,f]=b.useState(1),[B,g]=b.useState(10),[K]=M.useForm(),{data:D,isLoading:j,error:Z,refetch:oe}=As({page:T,pageSize:B,status:x==="all"?void 0:x,search:o}),{data:Te}=ws((e==null?void 0:e.id)||""),{data:G}=Os((e==null?void 0:e.id)||""),{data:xe}=Es((e==null?void 0:e.id)||""),ye=Ds(),Qe=Ps(),P=Ms(),Re=Fs(),A=Qs(),ce=$s(),H=Ks(),ue=r=>{t(r),a(!0)},Je=r=>{t(r),K.setFieldsValue(r),l(!0)},Ot=r=>{Ae.confirm({title:"Tenant'ı Askıya Al",content:`${r.name} adlı tenant'ı askıya almak istediğinizden emin misiniz?`,okText:"Askıya Al",okType:"danger",cancelText:"İptal",onOk:()=>{r.status==="suspended"?A.mutate(r.id):Re.mutate({id:r.id})}})},Et=r=>{P.mutate(r.id)},Dt=r=>{Ae.confirm({title:"Şifre Sıfırlama",content:`${r.contactEmail} adresine şifre sıfırlama linki gönderilecek.`,okText:"Gönder",cancelText:"İptal",onOk:()=>{ce.mutate(r.id)}})},Pt=r=>{H.mutate(r.id)},Mt=()=>{K.validateFields().then(r=>{e?Qe.mutate({id:e.id,data:r}):ye.mutate(r),l(!1)})},Ft=[{title:"Tenant",key:"tenant",render:(r,u)=>i.jsxs(we,{direction:"vertical",size:0,children:[i.jsx(q,{strong:!0,children:u.name}),i.jsxs(q,{type:"secondary",style:{fontSize:12},children:["Kod: ",u.code]}),u.domain&&i.jsxs(q,{type:"secondary",style:{fontSize:12},children:[i.jsx(Zt,{})," ",u.domain]})]})},{title:"İletişim",key:"contact",render:(r,u)=>i.jsxs(we,{direction:"vertical",size:0,children:[i.jsx(q,{children:u.contactName}),i.jsxs(q,{type:"secondary",style:{fontSize:12},children:[i.jsx(es,{})," ",u.contactEmail]}),u.contactPhone&&i.jsxs(q,{type:"secondary",style:{fontSize:12},children:[i.jsx(ts,{})," ",u.contactPhone]})]})},{title:"Plan",dataIndex:"subscriptionStatus",key:"plan",render:r=>{const u=r==="Active"?"green":r==="Trial"?"blue":"default";return i.jsx(ze,{color:u,children:r})}},{title:"Durum",key:"status",render:(r,u)=>{const Qt=u.isActive,nt={active:{color:"success",text:"Aktif",icon:i.jsx(ut,{})},inactive:{color:"error",text:"Pasif",icon:i.jsx(ht,{})}},$e=Qt?nt.active:nt.inactive;return i.jsx(ze,{color:$e.color,icon:$e.icon,children:$e.text})}},{title:"Kullanım",key:"usage",render:(r,u)=>i.jsx(we,{direction:"vertical",size:0,children:i.jsxs(q,{children:[i.jsx(dt,{})," ",u.userCount||0," kullanıcı"]})})},{title:"Tarihler",key:"dates",render:(r,u)=>i.jsxs(we,{direction:"vertical",size:0,children:[i.jsxs(q,{type:"secondary",style:{fontSize:12},children:["Kayıt: ",new Date(u.createdAt).toLocaleDateString("tr-TR")]}),u.updatedAt&&i.jsxs(q,{type:"secondary",style:{fontSize:12},children:["Güncelleme: ",new Date(u.updatedAt).toLocaleDateString("tr-TR")]})]})},{title:"İşlemler",key:"actions",fixed:"right",width:120,render:(r,u)=>i.jsx(ss,{menu:{items:[{key:"view",label:"Detayları Gör",icon:i.jsx(ns,{}),onClick:()=>ue(u)},{key:"edit",label:"Düzenle",icon:i.jsx(pt,{}),onClick:()=>Je(u)},{type:"divider"},{key:"login",label:"Tenant'a Giriş Yap",icon:i.jsx(as,{}),onClick:()=>Pt(u)},{key:"reset",label:"Şifre Sıfırla",icon:i.jsx(mt,{}),onClick:()=>Dt(u)},{type:"divider"},{key:"suspend",label:u.isActive?"Pasifleştir":"Aktifleştir",icon:u.isActive?i.jsx(mt,{}):i.jsx(rs,{}),danger:u.isActive,onClick:()=>Ot(u)},{key:"delete",label:"Sil",icon:i.jsx(ls,{}),danger:!0,onClick:()=>Et(u)}]},children:i.jsx(se,{icon:i.jsx(is,{})})})}],ee=((Ze=D==null?void 0:D.data)==null?void 0:Ze.data)||(D==null?void 0:D.data)||[],Xe=Array.isArray(ee)?ee.length:0,Ce={all:Xe,active:ee.filter(r=>r.isActive).length,inactive:ee.filter(r=>!r.isActive).length,trial:ee.filter(r=>r.subscriptionStatus==="Trial").length};return i.jsxs(Ut,{title:"Tenant Yönetimi",subTitle:"Tüm tenant'ları görüntüle ve yönet",extra:[i.jsx(se,{icon:i.jsx(Yt,{}),onClick:()=>oe(),loading:j,children:"Yenile"},"refresh"),i.jsx(se,{icon:i.jsx(Wt,{}),children:"Dışa Aktar"},"export"),i.jsx(se,{type:"primary",icon:i.jsx(Jt,{}),onClick:()=>{t(null),K.resetFields(),l(!0)},children:"Yeni Tenant"},"add")],children:[i.jsxs(he,{gutter:[16,16],style:{marginBottom:24},children:[i.jsx(R,{xs:24,sm:12,md:6,children:i.jsx(U,{children:i.jsx(te,{title:"Toplam Tenant",value:Ce.all,prefix:i.jsx(qt,{}),valueStyle:{color:"#1890ff"}})})}),i.jsx(R,{xs:24,sm:12,md:6,children:i.jsx(U,{children:i.jsx(te,{title:"Aktif",value:Ce.active,prefix:i.jsx(ut,{}),valueStyle:{color:"#52c41a"}})})}),i.jsx(R,{xs:24,sm:12,md:6,children:i.jsx(U,{children:i.jsx(te,{title:"Deneme",value:Ce.trial,prefix:i.jsx(_t,{}),valueStyle:{color:"#faad14"}})})}),i.jsx(R,{xs:24,sm:12,md:6,children:i.jsx(U,{children:i.jsx(te,{title:"Pasif",value:Ce.inactive,prefix:i.jsx(ht,{}),valueStyle:{color:"#ff4d4f"}})})})]}),i.jsx(U,{style:{marginBottom:24},children:i.jsxs(he,{gutter:[16,16],children:[i.jsx(R,{xs:24,sm:12,md:8,children:i.jsx(zs,{placeholder:"Tenant ara...",allowClear:!0,enterButton:i.jsx(Lt,{}),size:"large",onSearch:k,loading:j})}),i.jsx(R,{xs:24,sm:12,md:4,children:i.jsxs(ge,{style:{width:"100%"},size:"large",placeholder:"Durum",value:x,onChange:S,children:[i.jsx(ge.Option,{value:"all",children:"Tümü"}),i.jsx(ge.Option,{value:"active",children:"Aktif"}),i.jsx(ge.Option,{value:"inactive",children:"Pasif"}),i.jsx(ge.Option,{value:"trial",children:"Deneme"})]})})]})}),i.jsx(U,{children:Z?i.jsx(Bt,{message:"Hata",description:`Tenant'lar yüklenirken bir hata oluştu: ${Z}`,type:"error",showIcon:!0,action:i.jsx(se,{size:"small",danger:!0,onClick:()=>oe(),children:"Tekrar Dene"})}):j?i.jsx("div",{style:{textAlign:"center",padding:50},children:i.jsx(Gt,{size:"large"})}):ee.length===0?i.jsx(Ht,{description:"Tenant bulunamadı"}):i.jsx(Nt,{columns:Ft,dataSource:ee,rowKey:"id",pagination:{current:T,pageSize:B,total:Xe,onChange:(r,u)=>{f(r),g(u||10)},showSizeChanger:!0,showTotal:r=>`Toplam ${r} tenant`},scroll:{x:1200},loading:j})}),i.jsx(Ae,{title:"Tenant Detayları",open:s,onCancel:()=>a(!1),width:800,footer:[i.jsx(se,{onClick:()=>a(!1),children:"Kapat"},"close"),i.jsx(se,{type:"primary",icon:i.jsx(pt,{}),onClick:()=>{a(!1),Je(e)},children:"Düzenle"},"edit")],children:e&&i.jsxs(Ct,{defaultActiveKey:"1",children:[i.jsx(Oe,{tab:"Genel Bilgiler",children:i.jsxs(C,{bordered:!0,column:2,children:[i.jsx(C.Item,{label:"Tenant Adı",children:e.name}),i.jsx(C.Item,{label:"Kod",children:e.code}),i.jsx(C.Item,{label:"Domain",children:e.domain||"-"}),i.jsx(C.Item,{label:"Durum",children:i.jsx(ze,{color:e.isActive?"success":"error",children:e.isActive?"Aktif":"Pasif"})}),i.jsx(C.Item,{label:"Abonelik Durumu",children:e.subscriptionStatus||"-"}),i.jsx(C.Item,{label:"Kullanıcı Sayısı",children:e.userCount||0}),i.jsx(C.Item,{label:"Kayıt Tarihi",children:new Date(e.createdAt).toLocaleString("tr-TR")})]})},"1"),i.jsx(Oe,{tab:"İletişim Bilgileri",children:i.jsxs(C,{bordered:!0,column:1,children:[i.jsx(C.Item,{label:"İletişim Adı",children:e.contactName}),i.jsx(C.Item,{label:"E-posta",children:e.contactEmail}),i.jsx(C.Item,{label:"Telefon",children:e.contactPhone||"-"}),i.jsx(C.Item,{label:"Adres",children:e.address||"-"}),i.jsx(C.Item,{label:"Şehir",children:e.city||"-"}),i.jsx(C.Item,{label:"Ülke",children:e.country||"-"})]})},"2"),G&&i.jsx(Oe,{tab:"Kullanım İstatistikleri",children:i.jsxs(he,{gutter:[16,16],children:[i.jsx(R,{span:8,children:i.jsx(U,{children:i.jsx(te,{title:"Toplam Kullanıcı",value:((et=G.data)==null?void 0:et.userCount)||0,prefix:i.jsx(dt,{})})})}),i.jsx(R,{span:8,children:i.jsx(U,{children:i.jsx(te,{title:"Depolama",value:((tt=G.data)==null?void 0:tt.storageUsed)||0,suffix:"GB"})})}),i.jsx(R,{span:8,children:i.jsx(U,{children:i.jsx(te,{title:"API Çağrısı",value:((st=G.data)==null?void 0:st.apiCalls)||0})})})]})},"3"),xe&&i.jsx(Oe,{tab:"İşlem Geçmişi",children:i.jsx(ft,{children:(it=xe.data)==null?void 0:it.map((r,u)=>i.jsxs(ft.Item,{color:r.type==="success"?"green":r.type==="error"?"red":"blue",children:[r.description," - ",new Date(r.createdAt).toLocaleString("tr-TR")]},u))})},"4")]})}),i.jsx(Ae,{title:e?"Tenant Düzenle":"Yeni Tenant",open:h,onCancel:()=>l(!1),onOk:Mt,width:600,confirmLoading:ye.isPending||Qe.isPending,children:i.jsxs(M,{form:K,layout:"vertical",children:[i.jsxs(he,{gutter:16,children:[i.jsx(R,{span:12,children:i.jsx(M.Item,{name:"name",label:"Tenant Adı",rules:[{required:!0}],children:i.jsx(z,{})})}),i.jsx(R,{span:12,children:i.jsx(M.Item,{name:"code",label:"Kod",rules:[{required:!0}],children:i.jsx(z,{})})})]}),i.jsx(M.Item,{name:"domain",label:"Domain",children:i.jsx(z,{addonBefore:"https://",addonAfter:".stocker.app"})}),i.jsxs(he,{gutter:16,children:[i.jsx(R,{span:12,children:i.jsx(M.Item,{name:"contactName",label:"İletişim Adı",rules:[{required:!0}],children:i.jsx(z,{})})}),i.jsx(R,{span:12,children:i.jsx(M.Item,{name:"contactEmail",label:"E-posta",rules:[{required:!0,type:"email"}],children:i.jsx(z,{})})})]}),i.jsx(M.Item,{name:"contactPhone",label:"Telefon",children:i.jsx(z,{})}),i.jsxs(he,{gutter:16,children:[i.jsx(R,{span:12,children:i.jsx(M.Item,{name:"city",label:"Şehir",children:i.jsx(z,{})})}),i.jsx(R,{span:12,children:i.jsx(M.Item,{name:"country",label:"Ülke",children:i.jsx(z,{})})})]}),i.jsx(M.Item,{name:"address",label:"Adres",children:i.jsx(z.TextArea,{rows:2})}),i.jsx(M.Item,{name:"isActive",label:"Durum",valuePropName:"checked",children:i.jsx(Vt,{checkedChildren:"Aktif",unCheckedChildren:"Pasif"})})]})})]})};export{Vs as MasterTenantsPage};
