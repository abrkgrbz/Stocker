var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,r=(e,r)=>{for(var l in r||(r={}))a.call(r,l)&&n(e,l,r[l]);if(t)for(var l of t(r))s.call(r,l)&&n(e,l,r[l]);return e},l=(e,t,a)=>new Promise((s,n)=>{var r=e=>{try{i(a.next(e))}catch(t){n(t)}},l=e=>{try{i(a.throw(e))}catch(t){n(t)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,l);i((a=a.apply(e,t)).next())});import{aD as i,j as o,s as c,q as d,o as h,b5 as p,Z as x,S as m,b6 as u,b7 as g,c as j,b8 as y,ao as v,a2 as f,a3 as b,a5 as S,b9 as k,ba as w,bb as N,bc as C,bd as T,be as z,R as P,$ as A,aU as O,F as $,a4 as F,bf as I,A as R,Y as D,B,D as M,z as G,G as H,bg as E,aa as U,aZ as K}from"./chunk-_8T72CEH.js";import{r as L}from"./chunk-nBmrMGrr.js";import{C as W}from"./chunk-BHgm5-pG.js";import{b as Y}from"../index-jjMiGTG2.js";import{A as J,P as Z}from"./chunk-BbLPfhQC.js";import"./chunk-BsETiAjl.js";import"./chunk-BCxBuxyw.js";const q={getStats:()=>Y.get("/api/master/dashboard/stats"),getSystemHealth:()=>Y.get("/api/master/dashboard/system-health"),getRevenueChart:(e="monthly")=>Y.get(`/api/master/dashboard/revenue?period=${e}`),getRecentEvents:()=>Y.get("/api/master/dashboard/events")},Q={getAll:e=>{const t=new URLSearchParams;return(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.pageSize)&&t.append("pageSize",e.pageSize.toString()),(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.sortBy)&&t.append("sortBy",e.sortBy),(null==e?void 0:e.sortOrder)&&t.append("sortOrder",e.sortOrder),Y.get(`/api/master/tenants?${t.toString()}`)},getById:e=>Y.get(`/api/master/tenants/${e}`),create:e=>Y.post("/api/master/tenants",e),update:(e,t)=>Y.put(`/api/master/tenants/${e}`,t),delete:e=>Y.delete(`/api/master/tenants/${e}`),toggleStatus:e=>Y.post(`/api/master/tenants/${e}/toggle-status`).then(e=>e).catch(e=>{throw e}),suspend:(e,t)=>Y.post(`/api/master/tenants/${e}/toggle-status`).then(e=>e).catch(e=>{throw e}),activate:e=>Y.post(`/api/master/tenants/${e}/toggle-status`).then(e=>e).catch(e=>{throw e}),resetPassword:e=>Y.post(`/api/master/tenants/${e}/reset-password`),getUsageStats:e=>Y.get(`/api/master/tenants/${e}/statistics`),getActivityLog:e=>Promise.resolve({data:{data:[]}}),loginAsTenant:e=>Promise.resolve({data:{success:!0,data:{tenantId:e,message:"Impersonate feature is not implemented yet. Redirecting to tenant dashboard..."}}})},{Title:V,Text:X,Paragraph:_}=x,{RangePicker:ee}=g,te=()=>{const[e,t]=L.useState("month"),[a,s]=L.useState(!1),[n,x]=L.useState([]),[g,K]=L.useState(null),[Y,te]=L.useState(!0),[ae,se]=L.useState(!0);L.useEffect(()=>{ne(),re()},[]);const ne=()=>l(null,null,function*(){var e;try{te(!0);const t=yield Q.getAll();if(null==(e=t.data)?void 0:e.items){const e=t.data.items.slice(0,5).map((e,t)=>({key:e.id,rank:t+1,name:e.name||e.companyName,plan:e.subscriptionPlan||"Free",users:e.userCount||Math.floor(200*Math.random())+50,revenue:e.revenue||Math.floor(5e4*Math.random())+1e4,growth:40*Math.random()-10,status:e.isActive?"active":"suspended"}));x(e)}}catch(t){i.error("Failed to load tenants data")}finally{te(!1)}}),re=()=>l(null,null,function*(){try{se(!0);const e=yield q.getStats();e.data&&K(e.data)}catch(e){K({totalRevenue:524350,activeTenants:386,totalUsers:4823,conversionRate:68.3})}finally{se(!1)}}),le=[{title:"Toplam Gelir",value:(null==g?void 0:g.totalRevenue)||524350,prefix:"₺",change:(null==g?void 0:g.revenueChange)||12.5,changeType:((null==g?void 0:g.revenueChange)||12.5)>0?"increase":"decrease",icon:o.jsx(c,{}),color:"#667eea",bgColor:"rgba(102, 126, 234, 0.1)",description:"geçen aya göre"},{title:"Aktif Tenantlar",value:(null==g?void 0:g.activeTenants)||386,change:(null==g?void 0:g.tenantsChange)||8.3,changeType:((null==g?void 0:g.tenantsChange)||8.3)>0?"increase":"decrease",icon:o.jsx(d,{}),color:"#50cd89",bgColor:"rgba(80, 205, 137, 0.1)",description:"bu ay yeni"},{title:"Toplam Kullanıcı",value:(null==g?void 0:g.totalUsers)||4823,change:(null==g?void 0:g.usersChange)||15.7,changeType:((null==g?void 0:g.usersChange)||15.7)>0?"increase":"decrease",icon:o.jsx(h,{}),color:"#ffc700",bgColor:"rgba(255, 199, 0, 0.1)",description:"aktif kullanıcı"},{title:"Dönüşüm Oranı",value:(null==g?void 0:g.conversionRate)||68.3,suffix:"%",change:(null==g?void 0:g.conversionChange)||3.2,changeType:((null==g?void 0:g.conversionChange)||-3.2)>0?"increase":"decrease",icon:o.jsx(p,{}),color:"#f1416c",bgColor:"rgba(241, 65, 108, 0.1)",description:"denemelerden"}],ie={data:[{month:"Jan",revenue:32e4,profit:12e4},{month:"Feb",revenue:385e3,profit:145e3},{month:"Mar",revenue:412e3,profit:168e3},{month:"Apr",revenue:445e3,profit:178e3},{month:"May",revenue:478e3,profit:195e3},{month:"Jun",revenue:524350,profit:21e4}],xField:"month",yField:"revenue",height:300,smooth:!0,color:"l(0) 0:#667eea 1:#764ba2",areaStyle:{fillOpacity:.6},xAxis:{grid:null},yAxis:{label:{formatter:e=>`₺${parseInt(e)/1e3}k`},grid:{line:{style:{stroke:"#f0f0f0",lineWidth:1,lineDash:[4,4]}}}},tooltip:{customContent:(e,t)=>`<div style="padding: 8px;">\n          <div style="margin-bottom: 4px; font-weight: 600;">${e}</div>\n          ${t.map(e=>`<div style="color: ${e.color};">Gelir: ₺${e.data.revenue.toLocaleString("tr-TR")}</div>\n             <div style="color: ${e.color};">Kar: ₺${e.data.profit.toLocaleString("tr-TR")}</div>`).join("")}\n        </div>`}},oe={data:[{type:"Enterprise",value:45,percentage:11.6},{type:"Professional",value:125,percentage:32.4},{type:"Starter",value:186,percentage:48.2},{type:"Free Trial",value:30,percentage:7.8}],angleField:"value",colorField:"type",radius:.8,innerRadius:.6,height:300,label:{type:"inner",offset:"-50%",content:"{value}",style:{textAlign:"center",fontSize:14,fill:"#fff"}},color:["#667eea","#50cd89","#ffc700","#f1416c"],interactions:[{type:"element-active"}],statistic:{title:!1,content:{style:{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"24px",fontWeight:"bold"},content:"386\nTenant"}},legend:{position:"bottom",flipPage:!1}},ce=[{title:"#",dataIndex:"rank",key:"rank",width:60,fixed:"left",render:e=>{const t={1:o.jsx(U,{style:{color:"#ffd700",fontSize:16}}),2:o.jsx(U,{style:{color:"#c0c0c0",fontSize:16}}),3:o.jsx(U,{style:{color:"#cd7f32",fontSize:16}})};return o.jsxs(m,{size:"small",children:[t[e],o.jsxs("span",{children:["#",e]})]})}},{title:"Tenant",dataIndex:"name",key:"name",width:200,ellipsis:!0,render:(e,t)=>o.jsxs(m,{size:"small",children:[o.jsx(R,{size:"small",style:{backgroundColor:"#667eea"},children:e?e.substring(0,2).toUpperCase():"NA"}),o.jsxs("div",{style:{lineHeight:1.2},children:[o.jsx("div",{style:{fontWeight:500},children:e||"İsimsiz"}),o.jsx(D,{style:{marginTop:4,fontSize:11},color:"Enterprise"===t.plan?"purple":"Professional"===t.plan?"blue":"Starter"===t.plan?"green":"default",children:t.plan})]})]})},{title:"Kullanıcı",dataIndex:"users",key:"users",width:100,align:"center",render:e=>o.jsx(B,{count:e,showZero:!0,overflowCount:999,style:{backgroundColor:"#667eea"}})},{title:"Gelir",dataIndex:"revenue",key:"revenue",width:120,align:"right",render:e=>o.jsxs("span",{style:{color:"#50cd89",fontWeight:500},children:["₺",e.toLocaleString("tr-TR")]})},{title:"Büyüme",dataIndex:"growth",key:"growth",width:100,align:"center",render:e=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},children:[e>0?o.jsx(k,{style:{color:"#50cd89",fontSize:12}}):o.jsx(w,{style:{color:"#f1416c",fontSize:12}}),o.jsxs("span",{style:{color:e>0?"#50cd89":"#f1416c",fontWeight:500},children:[Math.abs(e).toFixed(1),"%"]})]})},{title:"Durum",dataIndex:"status",key:"status",width:90,align:"center",render:e=>o.jsx(D,{style:{margin:0,fontSize:11},color:"active"===e?"success":"error",children:"active"===e?"AKTİF":"ASKIDA"})},{title:"",key:"action",width:50,fixed:"right",render:()=>o.jsx(M,{menu:{items:[{key:"view",label:"Detaylar",icon:o.jsx(G,{})},{key:"edit",label:"Düzenle",icon:o.jsx(H,{})},{type:"divider"},{key:"delete",label:"Sil",icon:o.jsx(E,{}),danger:!0}]},trigger:["click"],placement:"bottomRight",children:o.jsx(j,{type:"text",size:"small",icon:o.jsx(C,{}),style:{padding:"4px 8px"}})})}];return o.jsxs("div",{className:"metronic-dashboard",children:[o.jsxs("div",{className:"dashboard-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsx(V,{level:3,className:"page-title",children:"Dashboard"}),o.jsx(_,{className:"page-description",children:"Hoş geldiniz! Platformunuzda bugün neler oluyor."})]}),o.jsx("div",{className:"header-actions",children:o.jsxs(m,{children:[o.jsxs(u,{value:e,onChange:t,style:{width:120},children:[o.jsx(u.Option,{value:"today",children:"Bugün"}),o.jsx(u.Option,{value:"week",children:"Bu Hafta"}),o.jsx(u.Option,{value:"month",children:"Bu Ay"}),o.jsx(u.Option,{value:"year",children:"Bu Yıl"})]}),o.jsx(ee,{}),o.jsx(j,{icon:o.jsx(y,{}),children:"Dışa Aktar"}),o.jsx(j,{type:"primary",icon:o.jsx(v,{}),onClick:()=>{s(!0),Promise.all([ne(),re()]).finally(()=>{s(!1),i.success("Dashboard refreshed")})},loading:a,children:"Yenile"})]})})]}),o.jsx(f,{gutter:[24,24],className:"stats-row",children:le.map((e,t)=>o.jsx(b,{xs:24,sm:12,lg:6,children:o.jsx(S,{className:"stat-card",loading:a,children:o.jsxs("div",{className:"stat-card-content",children:[o.jsx("div",{className:"stat-icon",style:{backgroundColor:e.bgColor,color:e.color},children:e.icon}),o.jsxs("div",{className:"stat-details",children:[o.jsx(X,{className:"stat-title",children:e.title}),o.jsxs("div",{className:"stat-value",children:[e.prefix,o.jsx(W,{end:e.value,duration:2,separator:",",decimals:"%"===e.suffix?1:0}),e.suffix]}),o.jsxs("div",{className:"stat-change",children:["increase"===e.changeType?o.jsx(k,{style:{color:"#50cd89"}}):o.jsx(w,{style:{color:"#f1416c"}}),o.jsxs("span",{className:`change-value ${e.changeType}`,children:[e.change,"%"]}),o.jsx("span",{className:"change-description",children:e.description})]})]})]})})},t))}),o.jsxs(f,{gutter:[24,24],className:"charts-row",children:[o.jsx(b,{xs:24,lg:16,children:o.jsx(S,{title:"Gelir Özeti",extra:o.jsxs(m,{children:[o.jsx(j,{type:"text",icon:o.jsx(N,{}),children:"Filtrele"}),o.jsx(j,{type:"text",icon:o.jsx(C,{})})]}),className:"chart-card",loading:a,children:o.jsx(J,r({},ie))})}),o.jsx(b,{xs:24,lg:8,children:o.jsx(S,{title:"Tenant Dağılımı",extra:o.jsx(j,{type:"text",icon:o.jsx(C,{})}),className:"chart-card",loading:a,children:o.jsx(Z,r({},oe))})})]}),o.jsxs(f,{gutter:[24,24],className:"tables-row",children:[o.jsx(b,{xs:24,lg:16,children:o.jsx(S,{title:"En İyi Performans Gösteren Tenantlar",extra:o.jsxs(m,{children:[o.jsx(j,{type:"text",children:"Tümünü Gör"}),o.jsx(j,{type:"text",icon:o.jsx(C,{})})]}),className:"table-card",children:o.jsx(T,{columns:ce,dataSource:n.length>0?n:[],pagination:!1,loading:Y,scroll:{x:800},size:"small",rowClassName:"table-row-hover"})})}),o.jsx(b,{xs:24,xl:8,lg:24,children:o.jsx(S,{title:"Son Aktiviteler",extra:o.jsx(j,{type:"text",children:"Tümünü Gör"}),className:"activity-card",loading:a,children:o.jsx(z,{children:[{type:"success",title:"Yeni tenant kaydı",description:"TechCorp Solutions platforma katıldı",time:"2 dakika önce",user:"John Doe",avatar:null},{type:"info",title:"Ödeme alındı",description:"Fatura #1234 ödendi",time:"1 saat önce",user:"Jane Smith",avatar:null},{type:"warning",title:"Abonelik sona eriyor",description:"CloudFirst Inc aboneliği 3 gün içinde sona erecek",time:"3 saat önce",user:"Sistem",avatar:null},{type:"error",title:"Ödeme başarısız",description:"StartupHub için ödeme işlenemedi",time:"5 saat önce",user:"Sistem",avatar:null}].map((e,t)=>o.jsx(z.Item,{color:"success"===e.type?"green":"info"===e.type?"blue":"warning"===e.type?"orange":"red",children:o.jsxs("div",{className:"activity-item",children:[o.jsx(X,{strong:!0,children:e.title}),o.jsx("br",{}),o.jsx(X,{type:"secondary",children:e.description}),o.jsx("br",{}),o.jsxs(m,{className:"activity-meta",children:[o.jsx(P,{}),o.jsx(X,{type:"secondary",style:{fontSize:12},children:e.time}),e.user&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"•"}),o.jsxs(X,{type:"secondary",style:{fontSize:12},children:[e.user," tarafından"]})]})]})]})},t))})})})]}),o.jsx(f,{gutter:[24,24],className:"quick-stats-row",children:o.jsx(b,{xs:24,children:o.jsx(S,{title:"Platform Performansı",className:"performance-card",children:o.jsxs(f,{gutter:[24,24],children:[o.jsx(b,{xs:24,sm:12,md:6,children:o.jsxs("div",{className:"performance-metric",children:[o.jsxs("div",{className:"metric-header",children:[o.jsx(X,{type:"secondary",children:"Sunucu Çalışma Süresi"}),o.jsx(A,{style:{color:"#50cd89"}})]}),o.jsx(O,{percent:99.9,strokeColor:"#50cd89"}),o.jsx(X,{strong:!0,children:"%99.9 Çalışma"})]})}),o.jsx(b,{xs:24,sm:12,md:6,children:o.jsxs("div",{className:"performance-metric",children:[o.jsxs("div",{className:"metric-header",children:[o.jsx(X,{type:"secondary",children:"Yanıt Süresi"}),o.jsx($,{style:{color:"#ffc700"}})]}),o.jsx(O,{percent:85,strokeColor:"#ffc700"}),o.jsx(X,{strong:!0,children:"245ms Ortalama"})]})}),o.jsx(b,{xs:24,sm:12,md:6,children:o.jsxs("div",{className:"performance-metric",children:[o.jsxs("div",{className:"metric-header",children:[o.jsx(X,{type:"secondary",children:"API Çağrıları"}),o.jsx(F,{style:{color:"#667eea"}})]}),o.jsx(O,{percent:68,strokeColor:"#667eea"}),o.jsx(X,{strong:!0,children:"Bugün 1.2M"})]})}),o.jsx(b,{xs:24,sm:12,md:6,children:o.jsxs("div",{className:"performance-metric",children:[o.jsxs("div",{className:"metric-header",children:[o.jsx(X,{type:"secondary",children:"Hata Oranı"}),o.jsx(I,{style:{color:"#f1416c"}})]}),o.jsx(O,{percent:2,strokeColor:"#f1416c"}),o.jsx(X,{strong:!0,children:"%0.02 Hata"})]})})]})})})})]})},{Title:ae,Text:se,Paragraph:ne}=x,{RangePicker:re}=g,{TabPane:le}=K,ie=()=>o.jsx(te,{});export{ie as MasterDashboard,te as MetronicDashboard};
