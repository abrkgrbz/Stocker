var j=(c,o,s)=>new Promise((D,g)=>{var f=r=>{try{m(s.next(r))}catch(h){g(h)}},N=r=>{try{m(s.throw(r))}catch(h){g(h)}},m=r=>r.done?D(r.value):Promise.resolve(r.value).then(f,N);m((s=s.apply(c,o)).next())});import{am as i,j as e,t as V,u as G,v as u,bo as q,bk as _,bp as L,aj as U,b5 as F,D as W,bc as X,T as J,M as k,N as l,O as b,F as Q,Y as p,aW as Z,B as ee,b9 as T,aX as se,aO as C,an as M,bi as ae,bq as te,br as ie,b6 as ne,w as re,aE as le,_ as de,a5 as ce}from"./chunk-CQugYT0Y.js";import{j as oe,u as me,r as v}from"./chunk-a6Wk6XzP.js";import{f as d,a as x}from"./chunk-03cX8L2l.js";import"../index-BEW7Pg8Q.js";import"./chunk-CX9aqCgN.js";const{Title:n,Text:a,Paragraph:I}=Q,ve=()=>{const{id:c}=oe(),o=me(),[s,D]=v.useState(null),[g,f]=v.useState(!0),[N,m]=v.useState(!1),[r,h]=v.useState(!1);v.useEffect(()=>{c&&P()},[c]);const P=()=>j(null,null,function*(){try{f(!0),D({id:c,invoiceNumber:"INV-2024-001",customerId:"1",customerName:"ABC Teknoloji A.Ş.",customerEmail:"muhasebe@abcteknoloji.com",customerPhone:"+90 212 555 0100",customerAddress:`Maslak Mah. Teknoloji Cad. No:15
Sarıyer/İstanbul`,customerTaxNumber:"1234567890",customerTaxOffice:"Sarıyer",invoiceDate:"2024-01-15T00:00:00",dueDate:"2024-02-15T00:00:00",subTotal:1e4,taxAmount:1800,discountAmount:500,totalAmount:11300,currency:"TRY",status:"Paid",paidDate:"2024-02-10T00:00:00",paymentMethod:"BankTransfer",notes:"Ödeme IBAN: TR12 0001 2345 6789 0123 4567 89",items:[{id:"1",productId:"1",productName:"Yazılım Lisansı - Pro",description:"Yıllık yazılım lisansı",quantity:2,unitPrice:3e3,taxRate:18,discountRate:5,totalPrice:5700},{id:"2",productId:"2",productName:"Destek Paketi",description:"7/24 teknik destek hizmeti",quantity:1,unitPrice:4e3,taxRate:18,discountRate:0,totalPrice:4720}],createdAt:"2024-01-15T10:30:00",createdBy:"Ahmet Yılmaz",updatedAt:"2024-02-10T14:20:00",updatedBy:"Mehmet Demir"})}catch(t){i.error("Fatura detayları yüklenemedi")}finally{f(!1)}}),R=()=>{window.print()},S=()=>j(null,null,function*(){try{i.loading("PDF oluşturuluyor..."),setTimeout(()=>{i.success("PDF başarıyla indirildi")},1500)}catch(t){i.error("PDF indirilemedi")}}),A=()=>j(null,null,function*(){m(!0)}),Y=()=>{o(`/app/${c}/invoices/${c}/edit`)},B=()=>j(null,null,function*(){try{i.success("Fatura başarıyla silindi"),o(-1)}catch(t){i.error("Fatura silinemedi")}}),z=()=>{i.info("Fatura kopyalandı"),o("/app/tenant/invoices/new")},w=()=>j(null,null,function*(){try{i.success("Fatura ödendi olarak işaretlendi"),P()}catch(t){i.error("İşlem başarısız")}}),$=t=>({Draft:"default",Sent:"processing",Paid:"success",Overdue:"error",Cancelled:"warning",PartiallyPaid:"warning"})[t]||"default",E=t=>({Draft:e.jsx(F,{}),Sent:e.jsx(ce,{}),Paid:e.jsx(de,{}),Overdue:e.jsx(le,{}),Cancelled:e.jsx(re,{})})[t]||null,O=[{key:"duplicate",label:"Kopyala",icon:e.jsx(ae,{}),onClick:z},{key:"share",label:"Paylaş",icon:e.jsx(te,{})},{key:"export-excel",label:"Excel Olarak İndir",icon:e.jsx(ie,{})},{type:"divider"},{key:"delete",label:"Sil",icon:e.jsx(ne,{}),danger:!0,onClick:()=>h(!0)}],H=[{title:"#",dataIndex:"index",key:"index",width:50,render:(t,y,K)=>K+1},{title:"Ürün/Hizmet",dataIndex:"productName",key:"productName",render:(t,y)=>e.jsxs("div",{children:[e.jsx(a,{strong:!0,children:t}),y.description&&e.jsx("div",{children:e.jsx(a,{type:"secondary",style:{fontSize:12},children:y.description})})]})},{title:"Miktar",dataIndex:"quantity",key:"quantity",width:100,align:"center"},{title:"Birim Fiyat",dataIndex:"unitPrice",key:"unitPrice",width:120,align:"right",render:t=>x(t)},{title:"İndirim %",dataIndex:"discountRate",key:"discountRate",width:100,align:"center",render:t=>t>0?`%${t}`:"-"},{title:"KDV %",dataIndex:"taxRate",key:"taxRate",width:100,align:"center",render:t=>`%${t}`},{title:"Toplam",dataIndex:"totalPrice",key:"totalPrice",width:150,align:"right",render:t=>e.jsx(a,{strong:!0,children:x(t)})}];return g?e.jsx("div",{className:"invoice-detail-loading",children:e.jsx(V,{size:"large"})}):s?e.jsxs("div",{className:"invoice-detail-page",children:[e.jsx(q,{ghost:!1,onBack:()=>o(-1),title:`Fatura #${s.invoiceNumber}`,tags:e.jsx(J,{color:$(s.status),icon:E(s.status),children:s.status==="Paid"?"Ödendi":s.status==="Overdue"?"Gecikmiş":s.status==="Sent"?"Gönderildi":s.status==="Draft"?"Taslak":s.status==="Cancelled"?"İptal":s.status}),extra:[e.jsx(u,{icon:e.jsx(_,{}),onClick:R,children:"Yazdır"},"print"),e.jsx(u,{icon:e.jsx(L,{}),onClick:S,children:"PDF İndir"},"download"),e.jsx(u,{type:"primary",icon:e.jsx(U,{}),onClick:A,children:"Email Gönder"},"send"),e.jsx(u,{icon:e.jsx(F,{}),onClick:Y,children:"Düzenle"},"edit"),e.jsx(W,{menu:{items:O},placement:"bottomRight",children:e.jsx(u,{icon:e.jsx(X,{})})},"more")]}),e.jsx("div",{className:"invoice-detail-content",children:e.jsxs(k,{gutter:[24,24],children:[e.jsx(l,{xs:24,lg:16,children:e.jsxs(b,{className:"invoice-main-card",children:[e.jsxs("div",{className:"invoice-header",children:[e.jsxs("div",{className:"invoice-logo",children:[e.jsx(n,{level:3,children:"STOCKER"}),e.jsx(a,{type:"secondary",children:"Profesyonel Fatura"})]}),e.jsxs("div",{className:"invoice-header-info",children:[e.jsx(n,{level:2,style:{margin:0},children:"FATURA"}),e.jsxs(a,{strong:!0,style:{fontSize:16},children:["#",s.invoiceNumber]})]})]}),e.jsx(p,{}),e.jsxs(k,{gutter:48,children:[e.jsx(l,{span:12,children:e.jsxs("div",{className:"info-section",children:[e.jsx(a,{type:"secondary",children:"Faturayı Kesen:"}),e.jsx(n,{level:5,children:"Stocker Yazılım A.Ş."}),e.jsxs(I,{children:["Teknoloji Mah. İnovasyon Cad. No:42",e.jsx("br",{}),"Şişli/İstanbul",e.jsx("br",{}),"Tel: +90 212 555 0200",e.jsx("br",{}),"Email: fatura@stocker.com"]})]})}),e.jsx(l,{span:12,children:e.jsxs("div",{className:"info-section",children:[e.jsx(a,{type:"secondary",children:"Fatura Edilen:"}),e.jsx(n,{level:5,children:s.customerName}),e.jsxs(I,{children:[s.customerAddress,e.jsx("br",{}),"Tel: ",s.customerPhone,e.jsx("br",{}),"Email: ",s.customerEmail,e.jsx("br",{}),s.customerTaxNumber&&e.jsxs(e.Fragment,{children:["VKN: ",s.customerTaxNumber,e.jsx("br",{}),"V.D.: ",s.customerTaxOffice]})]})]})})]}),e.jsx(p,{}),e.jsxs(k,{gutter:48,style:{marginBottom:24},children:[e.jsx(l,{span:8,children:e.jsxs("div",{className:"detail-item",children:[e.jsx(a,{type:"secondary",children:"Fatura Tarihi:"}),e.jsx("div",{children:e.jsx(a,{strong:!0,children:d(s.invoiceDate)})})]})}),e.jsx(l,{span:8,children:e.jsxs("div",{className:"detail-item",children:[e.jsx(a,{type:"secondary",children:"Vade Tarihi:"}),e.jsx("div",{children:e.jsx(a,{strong:!0,children:d(s.dueDate)})})]})}),e.jsx(l,{span:8,children:e.jsxs("div",{className:"detail-item",children:[e.jsx(a,{type:"secondary",children:"Ödeme Yöntemi:"}),e.jsx("div",{children:e.jsx(a,{strong:!0,children:s.paymentMethod==="BankTransfer"?"Banka Havalesi":s.paymentMethod==="CreditCard"?"Kredi Kartı":s.paymentMethod==="Cash"?"Nakit":s.paymentMethod})})]})})]}),e.jsx(Z,{dataSource:s.items,columns:H,pagination:!1,rowKey:"id",className:"invoice-items-table"}),e.jsx(k,{justify:"end",style:{marginTop:24},children:e.jsx(l,{span:10,children:e.jsxs("div",{className:"invoice-summary",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx(a,{children:"Ara Toplam:"}),e.jsx(a,{children:x(s.subTotal)})]}),s.discountAmount>0&&e.jsxs("div",{className:"summary-item",children:[e.jsx(a,{children:"İndirim:"}),e.jsxs(a,{type:"danger",children:["-",x(s.discountAmount)]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx(a,{children:"KDV (%18):"}),e.jsx(a,{children:x(s.taxAmount)})]}),e.jsx(p,{style:{margin:"12px 0"}}),e.jsxs("div",{className:"summary-item total",children:[e.jsx(n,{level:4,children:"Genel Toplam:"}),e.jsx(n,{level:4,style:{color:"#1890ff"},children:x(s.totalAmount)})]})]})})}),s.notes&&e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsxs("div",{className:"invoice-notes",children:[e.jsx(n,{level:5,children:"Notlar:"}),e.jsx(I,{children:s.notes})]})]}),e.jsx(p,{}),e.jsx("div",{className:"invoice-footer",children:e.jsxs(a,{type:"secondary",children:["Bu fatura ",d(s.createdAt,"DD.MM.YYYY HH:mm")," tarihinde oluşturulmuştur."]})})]})}),e.jsxs(l,{xs:24,lg:8,children:[e.jsxs(b,{className:"status-card",style:{marginBottom:16},children:[e.jsx(n,{level:5,children:"Fatura Durumu"}),e.jsxs("div",{className:"status-content",children:[e.jsx(ee,{status:s.status==="Paid"?"success":"processing",text:e.jsx(a,{strong:!0,style:{fontSize:16},children:s.status==="Paid"?"Ödendi":s.status==="Overdue"?"Gecikmiş":s.status==="Sent"?"Gönderildi":s.status})}),s.paidDate&&e.jsxs("div",{style:{marginTop:12},children:[e.jsx(a,{type:"secondary",children:"Ödeme Tarihi:"}),e.jsx("div",{children:e.jsx(a,{children:d(s.paidDate)})})]})]}),s.status!=="Paid"&&e.jsx(u,{type:"primary",block:!0,style:{marginTop:16},onClick:w,children:"Ödendi Olarak İşaretle"})]}),e.jsxs(b,{className:"payment-info-card",style:{marginBottom:16},children:[e.jsx(n,{level:5,children:"Ödeme Bilgileri"}),e.jsxs(T,{column:1,size:"small",children:[e.jsx(T.Item,{label:"Toplam Tutar",children:e.jsx(a,{strong:!0,style:{fontSize:18,color:"#1890ff"},children:x(s.totalAmount)})}),e.jsx(T.Item,{label:"Ödeme Yöntemi",children:s.paymentMethod==="BankTransfer"?"Banka Havalesi":s.paymentMethod==="CreditCard"?"Kredi Kartı":s.paymentMethod}),e.jsx(T.Item,{label:"Vade Tarihi",children:d(s.dueDate)})]})]}),e.jsxs(b,{className:"activity-card",children:[e.jsx(n,{level:5,children:"İşlem Geçmişi"}),e.jsx(se,{items:[{color:"green",children:e.jsxs(e.Fragment,{children:[e.jsx(a,{strong:!0,children:"Ödeme alındı"}),e.jsx("div",{children:e.jsx(a,{type:"secondary",style:{fontSize:12},children:d(s.paidDate,"DD.MM.YYYY HH:mm")})})]})},{color:"blue",children:e.jsxs(e.Fragment,{children:[e.jsx(a,{strong:!0,children:"Fatura gönderildi"}),e.jsx("div",{children:e.jsx(a,{type:"secondary",style:{fontSize:12},children:d(s.invoiceDate,"DD.MM.YYYY HH:mm")})})]})},{color:"gray",children:e.jsxs(e.Fragment,{children:[e.jsx(a,{strong:!0,children:"Fatura oluşturuldu"}),e.jsx("div",{children:e.jsxs(a,{type:"secondary",style:{fontSize:12},children:[s.createdBy," • ",d(s.createdAt,"DD.MM.YYYY HH:mm")]})})]})}]})]})]})]})}),e.jsx(C,{title:"Fatura Gönder",open:N,onOk:()=>{i.success("Fatura email ile gönderildi"),m(!1)},onCancel:()=>m(!1),okText:"Gönder",cancelText:"İptal",children:e.jsx(M,{message:"Fatura müşteriye email olarak gönderilecek",description:`${s.customerEmail} adresine fatura gönderilecektir.`,type:"info",showIcon:!0})}),e.jsx(C,{title:"Faturayı Sil",open:r,onOk:B,onCancel:()=>h(!1),okText:"Sil",cancelText:"İptal",okButtonProps:{danger:!0},children:e.jsx(M,{message:"Bu işlem geri alınamaz!",description:"Faturayı silmek istediğinizden emin misiniz?",type:"warning",showIcon:!0})})]}):e.jsx(G,{status:"404",title:"Fatura Bulunamadı",subTitle:"Aradığınız fatura bulunamadı veya silinmiş olabilir.",extra:e.jsx(u,{type:"primary",onClick:()=>o(-1),children:"Geri Dön"})})};export{ve as InvoiceDetail,ve as default};
