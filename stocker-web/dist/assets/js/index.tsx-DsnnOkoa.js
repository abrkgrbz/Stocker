var e=Object.defineProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(a,s,t)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,r=(e,r)=>{for(var l in r||(r={}))s.call(r,l)&&n(e,l,r[l]);if(a)for(var l of a(r))t.call(r,l)&&n(e,l,r[l]);return e},l=(e,a,s)=>new Promise((t,n)=>{var r=e=>{try{i(s.next(e))}catch(a){n(a)}},l=e=>{try{i(s.throw(e))}catch(a){n(a)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,l);i((s=s.apply(e,a)).next())});import{aD as i,j as c,s as o,q as d,o as h,b5 as x,Z as u,S as p,b6 as m,b7 as j,c as g,b8 as y,ao as v,a2 as f,a3 as b,a5 as k,b9 as N,ba as S,bb as w,bc as C,bd as T,be as z,R as P,$ as A,aU as O,F as D,a4 as F,bf as R,A as I,Y as $,B as G,D as H,z as U,G as B,bg as E,aa as K,aZ as W}from"./chunk-CStMECKG.js";import{r as Y}from"./chunk-nBmrMGrr.js";import{C as J}from"./chunk-BHgm5-pG.js";import{a as M}from"./chunk-BsETiAjl.js";import{A as L,P as Z}from"./chunk-DldQRy11.js";import"./chunk-DLZ_fto-.js";const q="https://api.stoocker.app/api".replace(/\/$/,""),Q={get:()=>l(null,null,function*(){return M.get(`${q}/api/master/dashboard/stats`)})},V={get:()=>l(null,null,function*(){return M.get(`${q}/api/master/dashboard/top-tenants`)})},{Title:X,Text:_,Paragraph:ee}=u,{RangePicker:ae}=j,se=()=>{const[e,a]=Y.useState("month"),[s,t]=Y.useState(!1),[n,u]=Y.useState([]),[j,W]=Y.useState(null),[M,q]=Y.useState(!0),[se,te]=Y.useState(!0);Y.useEffect(()=>{ne(),re()},[]);const ne=()=>l(null,null,function*(){var e,a;try{q(!0);const s=yield V.get();if((null==(e=s.data)?void 0:e.success)&&(null==(a=s.data)?void 0:a.data)){const e=s.data.data.map((e,a)=>({key:e.id,rank:a+1,name:e.name,plan:e.plan,users:e.users,revenue:e.revenue,growth:e.growth,status:e.status}));u(e)}}catch(s){i.error("Failed to load tenants data")}finally{q(!1)}}),re=()=>l(null,null,function*(){var e,a;try{te(!0);const s=yield Q.get();if((null==(e=s.data)?void 0:e.success)&&(null==(a=s.data)?void 0:a.data)){const e=s.data.data;W({totalRevenue:e.totalRevenue,activeTenants:e.activeTenants,totalUsers:e.totalUsers,activeUsers:e.activeUsers,conversionRate:68.3,revenueChange:e.growth.revenue,tenantsChange:e.growth.tenants,usersChange:e.growth.users,systemHealth:e.systemHealth,packageDistribution:e.packageDistribution})}}catch(s){W({totalRevenue:524350,activeTenants:386,totalUsers:4823,conversionRate:68.3})}finally{te(!1)}}),le=[{title:"Toplam Gelir",value:(null==j?void 0:j.totalRevenue)||524350,prefix:"₺",change:(null==j?void 0:j.revenueChange)||12.5,changeType:((null==j?void 0:j.revenueChange)||12.5)>0?"increase":"decrease",icon:c.jsx(o,{}),color:"#667eea",bgColor:"rgba(102, 126, 234, 0.1)",description:"geçen aya göre"},{title:"Aktif Tenantlar",value:(null==j?void 0:j.activeTenants)||386,change:(null==j?void 0:j.tenantsChange)||8.3,changeType:((null==j?void 0:j.tenantsChange)||8.3)>0?"increase":"decrease",icon:c.jsx(d,{}),color:"#50cd89",bgColor:"rgba(80, 205, 137, 0.1)",description:"bu ay yeni"},{title:"Toplam Kullanıcı",value:(null==j?void 0:j.totalUsers)||4823,change:(null==j?void 0:j.usersChange)||15.7,changeType:((null==j?void 0:j.usersChange)||15.7)>0?"increase":"decrease",icon:c.jsx(h,{}),color:"#ffc700",bgColor:"rgba(255, 199, 0, 0.1)",description:"aktif kullanıcı"},{title:"Dönüşüm Oranı",value:(null==j?void 0:j.conversionRate)||68.3,suffix:"%",change:(null==j?void 0:j.conversionChange)||3.2,changeType:((null==j?void 0:j.conversionChange)||-3.2)>0?"increase":"decrease",icon:c.jsx(x,{}),color:"#f1416c",bgColor:"rgba(241, 65, 108, 0.1)",description:"denemelerden"}],ie={data:[{month:"Jan",revenue:32e4,profit:12e4},{month:"Feb",revenue:385e3,profit:145e3},{month:"Mar",revenue:412e3,profit:168e3},{month:"Apr",revenue:445e3,profit:178e3},{month:"May",revenue:478e3,profit:195e3},{month:"Jun",revenue:524350,profit:21e4}],xField:"month",yField:"revenue",height:300,smooth:!0,color:"l(0) 0:#667eea 1:#764ba2",areaStyle:{fillOpacity:.6},xAxis:{grid:null},yAxis:{label:{formatter:e=>`₺${parseInt(e)/1e3}k`},grid:{line:{style:{stroke:"#f0f0f0",lineWidth:1,lineDash:[4,4]}}}},tooltip:{customContent:(e,a)=>`<div style="padding: 8px;">\n          <div style="margin-bottom: 4px; font-weight: 600;">${e}</div>\n          ${a.map(e=>`<div style="color: ${e.color};">Gelir: ₺${e.data.revenue.toLocaleString("tr-TR")}</div>\n             <div style="color: ${e.color};">Kar: ₺${e.data.profit.toLocaleString("tr-TR")}</div>`).join("")}\n        </div>`}},ce={data:[{type:"Enterprise",value:45,percentage:11.6},{type:"Professional",value:125,percentage:32.4},{type:"Starter",value:186,percentage:48.2},{type:"Free Trial",value:30,percentage:7.8}],angleField:"value",colorField:"type",radius:.8,innerRadius:.6,height:300,label:{type:"inner",offset:"-50%",content:"{value}",style:{textAlign:"center",fontSize:14,fill:"#fff"}},color:["#667eea","#50cd89","#ffc700","#f1416c"],interactions:[{type:"element-active"}],statistic:{title:!1,content:{style:{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"24px",fontWeight:"bold"},content:"386\nTenant"}},legend:{position:"bottom",flipPage:!1}},oe=[{title:"#",dataIndex:"rank",key:"rank",width:60,fixed:"left",render:e=>{const a={1:c.jsx(K,{style:{color:"#ffd700",fontSize:16}}),2:c.jsx(K,{style:{color:"#c0c0c0",fontSize:16}}),3:c.jsx(K,{style:{color:"#cd7f32",fontSize:16}})};return c.jsxs(p,{size:"small",children:[a[e],c.jsxs("span",{children:["#",e]})]})}},{title:"Tenant",dataIndex:"name",key:"name",width:200,ellipsis:!0,render:(e,a)=>c.jsxs(p,{size:"small",children:[c.jsx(I,{size:"small",style:{backgroundColor:"#667eea"},children:e?e.substring(0,2).toUpperCase():"NA"}),c.jsxs("div",{style:{lineHeight:1.2},children:[c.jsx("div",{style:{fontWeight:500},children:e||"İsimsiz"}),c.jsx($,{style:{marginTop:4,fontSize:11},color:"Enterprise"===a.plan?"purple":"Professional"===a.plan?"blue":"Starter"===a.plan?"green":"default",children:a.plan})]})]})},{title:"Kullanıcı",dataIndex:"users",key:"users",width:100,align:"center",render:e=>c.jsx(G,{count:e,showZero:!0,overflowCount:999,style:{backgroundColor:"#667eea"}})},{title:"Gelir",dataIndex:"revenue",key:"revenue",width:120,align:"right",render:e=>c.jsxs("span",{style:{color:"#50cd89",fontWeight:500},children:["₺",e.toLocaleString("tr-TR")]})},{title:"Büyüme",dataIndex:"growth",key:"growth",width:100,align:"center",render:e=>c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},children:[e>0?c.jsx(N,{style:{color:"#50cd89",fontSize:12}}):c.jsx(S,{style:{color:"#f1416c",fontSize:12}}),c.jsxs("span",{style:{color:e>0?"#50cd89":"#f1416c",fontWeight:500},children:[Math.abs(e).toFixed(1),"%"]})]})},{title:"Durum",dataIndex:"status",key:"status",width:90,align:"center",render:e=>c.jsx($,{style:{margin:0,fontSize:11},color:"active"===e?"success":"error",children:"active"===e?"AKTİF":"ASKIDA"})},{title:"",key:"action",width:50,fixed:"right",render:()=>c.jsx(H,{menu:{items:[{key:"view",label:"Detaylar",icon:c.jsx(U,{})},{key:"edit",label:"Düzenle",icon:c.jsx(B,{})},{type:"divider"},{key:"delete",label:"Sil",icon:c.jsx(E,{}),danger:!0}]},trigger:["click"],placement:"bottomRight",children:c.jsx(g,{type:"text",size:"small",icon:c.jsx(C,{}),style:{padding:"4px 8px"}})})}];return c.jsxs("div",{className:"metronic-dashboard",children:[c.jsxs("div",{className:"dashboard-header",children:[c.jsxs("div",{className:"header-content",children:[c.jsx(X,{level:3,className:"page-title",children:"Dashboard"}),c.jsx(ee,{className:"page-description",children:"Hoş geldiniz! Platformunuzda bugün neler oluyor."})]}),c.jsx("div",{className:"header-actions",children:c.jsxs(p,{children:[c.jsxs(m,{value:e,onChange:a,style:{width:120},children:[c.jsx(m.Option,{value:"today",children:"Bugün"}),c.jsx(m.Option,{value:"week",children:"Bu Hafta"}),c.jsx(m.Option,{value:"month",children:"Bu Ay"}),c.jsx(m.Option,{value:"year",children:"Bu Yıl"})]}),c.jsx(ae,{}),c.jsx(g,{icon:c.jsx(y,{}),children:"Dışa Aktar"}),c.jsx(g,{type:"primary",icon:c.jsx(v,{}),onClick:()=>{t(!0),Promise.all([ne(),re()]).finally(()=>{t(!1),i.success("Dashboard refreshed")})},loading:s,children:"Yenile"})]})})]}),c.jsx(f,{gutter:[24,24],className:"stats-row",children:le.map((e,a)=>c.jsx(b,{xs:24,sm:12,lg:6,children:c.jsx(k,{className:"stat-card",loading:s,children:c.jsxs("div",{className:"stat-card-content",children:[c.jsx("div",{className:"stat-icon",style:{backgroundColor:e.bgColor,color:e.color},children:e.icon}),c.jsxs("div",{className:"stat-details",children:[c.jsx(_,{className:"stat-title",children:e.title}),c.jsxs("div",{className:"stat-value",children:[e.prefix&&c.jsx("span",{className:"currency-symbol",children:e.prefix}),c.jsx(J,{end:e.value,duration:2,separator:",",decimals:"%"===e.suffix?1:0}),e.suffix&&c.jsx("span",{className:"stat-suffix",children:e.suffix})]}),c.jsxs("div",{className:"stat-change",children:["increase"===e.changeType?c.jsx(N,{style:{color:"#50cd89"}}):c.jsx(S,{style:{color:"#f1416c"}}),c.jsxs("span",{className:`change-value ${e.changeType}`,children:[e.change,"%"]}),c.jsx("span",{className:"change-description",children:e.description})]})]})]})})},a))}),c.jsxs(f,{gutter:[24,24],className:"charts-row",children:[c.jsx(b,{xs:24,lg:16,children:c.jsx(k,{title:"Gelir Özeti",extra:c.jsxs(p,{children:[c.jsx(g,{type:"text",icon:c.jsx(w,{}),children:"Filtrele"}),c.jsx(g,{type:"text",icon:c.jsx(C,{})})]}),className:"chart-card",loading:s,children:c.jsx(L,r({},ie))})}),c.jsx(b,{xs:24,lg:8,children:c.jsx(k,{title:"Tenant Dağılımı",extra:c.jsx(g,{type:"text",icon:c.jsx(C,{})}),className:"chart-card",loading:s,children:c.jsx(Z,r({},ce))})})]}),c.jsxs(f,{gutter:[24,24],className:"tables-row",children:[c.jsx(b,{xs:24,lg:16,children:c.jsx(k,{title:"En İyi Performans Gösteren Tenantlar",extra:c.jsxs(p,{children:[c.jsx(g,{type:"text",children:"Tümünü Gör"}),c.jsx(g,{type:"text",icon:c.jsx(C,{})})]}),className:"table-card",children:c.jsx(T,{columns:oe,dataSource:n.length>0?n:[],pagination:!1,loading:M,scroll:{x:800},size:"small",rowClassName:"table-row-hover"})})}),c.jsx(b,{xs:24,xl:8,lg:24,children:c.jsx(k,{title:"Son Aktiviteler",extra:c.jsx(g,{type:"text",children:"Tümünü Gör"}),className:"activity-card",loading:s,children:c.jsx(z,{children:[{type:"success",title:"Yeni tenant kaydı",description:"TechCorp Solutions platforma katıldı",time:"2 dakika önce",user:"John Doe",avatar:null},{type:"info",title:"Ödeme alındı",description:"Fatura #1234 ödendi",time:"1 saat önce",user:"Jane Smith",avatar:null},{type:"warning",title:"Abonelik sona eriyor",description:"CloudFirst Inc aboneliği 3 gün içinde sona erecek",time:"3 saat önce",user:"Sistem",avatar:null},{type:"error",title:"Ödeme başarısız",description:"StartupHub için ödeme işlenemedi",time:"5 saat önce",user:"Sistem",avatar:null}].map((e,a)=>c.jsx(z.Item,{color:"success"===e.type?"green":"info"===e.type?"blue":"warning"===e.type?"orange":"red",children:c.jsxs("div",{className:"activity-item",children:[c.jsx(_,{strong:!0,children:e.title}),c.jsx("br",{}),c.jsx(_,{type:"secondary",children:e.description}),c.jsx("br",{}),c.jsxs(p,{className:"activity-meta",children:[c.jsx(P,{}),c.jsx(_,{type:"secondary",style:{fontSize:12},children:e.time}),e.user&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"•"}),c.jsxs(_,{type:"secondary",style:{fontSize:12},children:[e.user," tarafından"]})]})]})]})},a))})})})]}),c.jsx(f,{gutter:[24,24],className:"quick-stats-row",children:c.jsx(b,{xs:24,children:c.jsx(k,{title:"Platform Performansı",className:"performance-card",children:c.jsxs(f,{gutter:[24,24],children:[c.jsx(b,{xs:24,sm:12,md:6,children:c.jsxs("div",{className:"performance-metric",children:[c.jsxs("div",{className:"metric-header",children:[c.jsx(_,{type:"secondary",children:"Sunucu Çalışma Süresi"}),c.jsx(A,{style:{color:"#50cd89"}})]}),c.jsx(O,{percent:99.9,strokeColor:"#50cd89"}),c.jsx(_,{strong:!0,children:"%99.9 Çalışma"})]})}),c.jsx(b,{xs:24,sm:12,md:6,children:c.jsxs("div",{className:"performance-metric",children:[c.jsxs("div",{className:"metric-header",children:[c.jsx(_,{type:"secondary",children:"Yanıt Süresi"}),c.jsx(D,{style:{color:"#ffc700"}})]}),c.jsx(O,{percent:85,strokeColor:"#ffc700"}),c.jsx(_,{strong:!0,children:"245ms Ortalama"})]})}),c.jsx(b,{xs:24,sm:12,md:6,children:c.jsxs("div",{className:"performance-metric",children:[c.jsxs("div",{className:"metric-header",children:[c.jsx(_,{type:"secondary",children:"API Çağrıları"}),c.jsx(F,{style:{color:"#667eea"}})]}),c.jsx(O,{percent:68,strokeColor:"#667eea"}),c.jsx(_,{strong:!0,children:"Bugün 1.2M"})]})}),c.jsx(b,{xs:24,sm:12,md:6,children:c.jsxs("div",{className:"performance-metric",children:[c.jsxs("div",{className:"metric-header",children:[c.jsx(_,{type:"secondary",children:"Hata Oranı"}),c.jsx(R,{style:{color:"#f1416c"}})]}),c.jsx(O,{percent:2,strokeColor:"#f1416c"}),c.jsx(_,{strong:!0,children:"%0.02 Hata"})]})})]})})})})]})},{Title:te,Text:ne,Paragraph:re}=u,{RangePicker:le}=j,{TabPane:ie}=W,ce=()=>c.jsx(se,{});export{ce as MasterDashboard,se as MetronicDashboard};
