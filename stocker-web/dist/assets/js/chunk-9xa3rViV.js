var e=(e,t,r)=>new Promise((o,a)=>{var n=e=>{try{l(r.next(e))}catch(t){a(t)}},s=e=>{try{l(r.throw(e))}catch(t){a(t)}},l=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,s);l((r=r.apply(e,t)).next())});import{a as t}from"./chunk-BsETiAjl.js";import{aD as r}from"./chunk-Bx2_2m46.js";const o=t.create({baseURL:"https://api.stoocker.app/api",timeout:6e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{const t=localStorage.getItem("stocker_token");t&&(e.headers.Authorization=`Bearer ${t}`);const r=localStorage.getItem("stocker_tenant");return r&&(e.headers["X-Tenant-Id"]=r),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,t=>e(null,null,function*(){var e,o;const{response:a}=t;if(a)switch(a.status){case 401:r.error("Oturumunuz sona erdi. Lütfen tekrar giriş yapın."),localStorage.removeItem("stocker_token"),localStorage.removeItem("stocker_refresh_token"),localStorage.removeItem("stocker_tenant"),window.location.href="/login";break;case 403:r.error("Bu işlem için yetkiniz bulunmamaktadır.");break;case 404:r.error("İstenen kaynak bulunamadı.");break;case 422:if(null==(e=a.data)?void 0:e.errors){const e=a.data.errors,t=Object.values(e).flat().join(", ");r.error(t)}else r.error("Girdiğiniz bilgileri kontrol edin.");break;case 500:r.error("Sunucu hatası oluştu. Lütfen daha sonra tekrar deneyin.");break;default:r.error((null==(o=a.data)?void 0:o.message)||"Bir hata oluştu.")}else t.request?r.error("Sunucuya bağlanılamıyor. İnternet bağlantınızı kontrol edin."):r.error("Beklenmeyen bir hata oluştu.");return Promise.reject(t)}));const a={get:(e,t)=>o.get(e,t),post:(e,t,r)=>o.post(e,t,r),put:(e,t,r)=>o.put(e,t,r),patch:(e,t,r)=>o.patch(e,t,r),delete:(e,t)=>o.delete(e,t),upload:(e,t,r)=>{const a=new FormData;return a.append("file",t),o.post(e,a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(r&&e.total){const t=Math.round(100*e.loaded/e.total);r(t)}}})},download:(t,a)=>e(null,null,function*(){try{const e=yield o.get(t,{responseType:"blob"}),r=new Blob([e.data]),n=window.URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=a||"download",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(n)}catch(e){throw r.error("Dosya indirilemedi."),e}})};export{a};
