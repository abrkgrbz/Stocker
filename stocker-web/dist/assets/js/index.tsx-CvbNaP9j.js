var e=(e,s,a)=>new Promise((l,r)=>{var i=e=>{try{t(a.next(e))}catch(s){r(s)}},n=e=>{try{t(a.throw(e))}catch(s){r(s)}},t=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,n);t((a=a.apply(e,s)).next())});import{ay as s,aD as a,j as l,N as r,S as i,Z as n,aQ as t,ae as c,J as d,a$ as o,$ as m,aZ as h,a5 as x,O as u,aj as j,aT as g,a2 as y,a3 as p,b0 as v,b1 as b,a0 as k,I as f,b2 as N,c as S,ai as T,b3 as z,T as w,aR as D,aX as I,aW as P,ac as C,C as A,as as B,aA as K,b4 as $}from"./chunk-Bx2_2m46.js";import{u as G,m as Y,r as F}from"./chunk-nBmrMGrr.js";import{b as L}from"../index-BqMev2MT.js";import"./chunk-BsETiAjl.js";const{Title:M,Text:E,Paragraph:V}=n,{Step:R}=c,{TabPane:_}=h,q=()=>{const n=G(),[R]=Y(),[q]=s.useForm(),[O,W]=F.useState("credit_card"),[H,X]=F.useState(0),[Z,J]=F.useState(!1),[Q,U]=F.useState(!1),[ee,se]=F.useState(""),[ae,le]=F.useState(180),[re,ie]=F.useState(!1),[ne,te]=F.useState(""),[ce,de]=F.useState(""),[oe,me]=F.useState(null),[he,xe]=F.useState(""),[ue,je]=F.useState(""),[ge,ye]=F.useState(""),[pe,ve]=F.useState(""),[be,ke]=F.useState(""),[fe,Ne]=F.useState(1);F.useEffect(()=>{const e={tenantId:R.get("tenantId")||"",packageId:R.get("packageId")||"",packageName:R.get("package")||"Profesyonel",amount:Number(R.get("amount"))||999,currency:"₺",billingPeriod:R.get("period")||"Monthly",companyName:R.get("company")||"Demo Şirket",contactEmail:R.get("email")||"demo@example.com"};me(e)},[R]),F.useEffect(()=>{if(Q&&ae>0){const e=setTimeout(()=>le(ae-1),1e3);return()=>clearTimeout(e)}0===ae&&(a.error("3D Secure doğrulama süresi doldu"),U(!1),le(180))},[Q,ae]);const Se=e=>{const s=(e=>{const s=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),a=s&&s[0]||"",l=[];for(let r=0,i=a.length;r<i;r+=4)l.push(a.substring(r,r+4));return l.length?l.join(" "):e})(e.target.value);xe(s),ke((e=>{const s=e.replace(/\s/g,"");return s.startsWith("4")?"visa":s.startsWith("5")?"mastercard":s.startsWith("3")?"amex":s.startsWith("6")?"troy":""})(s))},Te=()=>{if(!oe)return[];const e=oe.amount;return[{value:1,label:"Tek Çekim",amount:e},{value:2,label:"2 Taksit",amount:e/2},{value:3,label:"3 Taksit",amount:e/3},{value:6,label:"6 Taksit",amount:e/6},{value:9,label:"9 Taksit",amount:e/9},{value:12,label:"12 Taksit",amount:e/12}]},ze=s=>e(null,null,function*(){J(!0),X(1),yield new Promise(e=>setTimeout(e,2e3)),U(!0),J(!1)}),we=()=>e(null,null,function*(){if("123456"!==ee)return void a.error("Doğrulama kodu hatalı");J(!0),U(!1),X(2),yield new Promise(e=>setTimeout(e,3e3));const e=`TRX${Date.now()}`,s=`INV-${Date.now()}`;te(e),de(s);try{yield L.post("/api/public/process-payment",{tenantId:null==oe?void 0:oe.tenantId,packageId:null==oe?void 0:oe.packageId,amount:null==oe?void 0:oe.amount,currency:null==oe?void 0:oe.currency,paymentMethod:"credit_card",billingPeriod:null==oe?void 0:oe.billingPeriod,transactionId:e,invoiceNumber:s}),ie(!0),a.success("Ödeme başarıyla tamamlandı!")}catch(l){a.error("Ödeme işlemi başarısız")}finally{J(!1)}});return oe?l.jsxs("div",{className:"payment-page",children:[l.jsx("div",{className:"payment-header",children:l.jsxs("div",{className:"container",children:[l.jsxs(i,{size:"large",children:[l.jsx("img",{src:"/logo.png",alt:"Stocker",style:{height:40}}),l.jsx(M,{level:3,style:{margin:0,color:"#fff"},children:"Güvenli Ödeme"})]}),l.jsxs(i,{children:[l.jsx(t,{style:{fontSize:24,color:"#52c41a"}}),l.jsx(E,{style:{color:"#fff"},children:"256-bit SSL Güvenlik"})]})]})}),l.jsx("div",{className:"payment-content",children:l.jsxs("div",{className:"container",children:[l.jsx(c,{current:H,style:{marginBottom:32},items:[{title:"Ödeme Bilgileri",icon:l.jsx(d,{})},{title:"Doğrulama",icon:l.jsx(o,{})},{title:"Tamamlandı",icon:l.jsx(m,{})}]}),re?l.jsx(T,{status:"success",title:"Ödeme Başarılı!",subTitle:l.jsxs("div",{children:[l.jsx(V,{children:"Ödemeniz başarıyla alındı ve hesabınız aktif edildi."}),l.jsxs(i,{direction:"vertical",style:{width:"100%",marginTop:24},children:[l.jsxs("div",{className:"success-detail",children:[l.jsx(E,{type:"secondary",children:"İşlem No:"}),l.jsx(E,{strong:!0,copyable:!0,children:ne})]}),l.jsxs("div",{className:"success-detail",children:[l.jsx(E,{type:"secondary",children:"Fatura No:"}),l.jsx(E,{strong:!0,copyable:!0,children:ce})]}),l.jsxs("div",{className:"success-detail",children:[l.jsx(E,{type:"secondary",children:"Tutar:"}),l.jsxs(E,{strong:!0,children:[null==oe?void 0:oe.currency,null==oe?void 0:oe.amount]})]}),l.jsxs("div",{className:"success-detail",children:[l.jsx(E,{type:"secondary",children:"Tarih:"}),l.jsx(E,{strong:!0,children:(new Date).toLocaleString("tr-TR")})]})]})]}),extra:[l.jsx(S,{icon:l.jsx(z,{}),children:"Faturayı İndir"},"invoice"),l.jsx(S,{type:"primary",icon:l.jsx(m,{}),onClick:()=>n("/login"),children:"Panele Git"},"console")]}):l.jsx(l.Fragment,{children:l.jsxs(h,{activeKey:O,onChange:e=>W(e),size:"large",children:[l.jsx(_,{tab:l.jsxs(i,{children:[l.jsx(d,{}),"Kredi/Banka Kartı"]}),children:l.jsx("div",{className:"payment-form-container",children:l.jsxs(y,{gutter:[32,32],children:[l.jsxs(p,{xs:24,lg:14,children:[l.jsxs(x,{className:"payment-form-card",children:[l.jsxs(M,{level:4,children:[l.jsx(d,{})," Kart Bilgileri"]}),l.jsxs(s,{form:q,layout:"vertical",onFinish:ze,autoComplete:"off",children:[l.jsx(s.Item,{label:"Kart Numarası",name:"cardNumber",rules:[{required:!0,message:"Kart numarası zorunludur"},{pattern:/^[\d\s]{19}$/,message:"Geçerli bir kart numarası giriniz"}],children:l.jsx(f,{size:"large",placeholder:"1234 5678 9012 3456",value:he,onChange:Se,maxLength:19,prefix:l.jsx(d,{}),suffix:be&&l.jsx("img",{src:`/images/cards/${be}.png`,alt:be,style:{height:20}})})}),l.jsx(s.Item,{label:"Kart Üzerindeki İsim",name:"cardName",rules:[{required:!0,message:"Kart sahibi adı zorunludur"}],children:l.jsx(f,{size:"large",placeholder:"AD SOYAD",value:ue,onChange:e=>je(e.target.value.toUpperCase()),style:{textTransform:"uppercase"}})}),l.jsxs(y,{gutter:16,children:[l.jsx(p,{span:12,children:l.jsx(s.Item,{label:"Son Kullanma Tarihi",name:"expiry",rules:[{required:!0,message:"Son kullanma tarihi zorunludur"},{pattern:/^(0[1-9]|1[0-2])\/\d{2}$/,message:"AA/YY formatında giriniz"}],children:l.jsx(f,{size:"large",placeholder:"AA/YY",value:ge,onChange:e=>ye((e=>{const s=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"");return s.length>=2?s.substring(0,2)+"/"+s.substring(2,4):s})(e.target.value)),maxLength:5})})}),l.jsx(p,{span:12,children:l.jsx(s.Item,{label:l.jsxs(i,{children:["CVV",l.jsx(w,{title:"Kartınızın arkasındaki 3 haneli güvenlik kodu",children:l.jsx(D,{})})]}),name:"cvv",rules:[{required:!0,message:"CVV zorunludur"},{pattern:/^\d{3,4}$/,message:"3 veya 4 haneli CVV giriniz"}],children:l.jsx(f.Password,{size:"large",placeholder:"123",value:pe,onChange:e=>ve(e.target.value),maxLength:4})})})]}),l.jsx(s.Item,{label:"Taksit Seçenekleri",children:l.jsx(I.Group,{value:fe,onChange:e=>Ne(e.target.value),style:{width:"100%"},children:l.jsx(y,{gutter:[8,8],children:Te().map(e=>l.jsx(p,{span:8,children:l.jsx(I.Button,{value:e.value,style:{width:"100%",textAlign:"center"},children:l.jsxs("div",{children:[l.jsx(E,{strong:!0,children:e.label}),l.jsx("br",{}),l.jsxs(E,{type:"secondary",style:{fontSize:12},children:[null==oe?void 0:oe.currency,e.amount.toFixed(2)]})]})})},e.value))})})}),l.jsx(k,{}),l.jsx(s.Item,{name:"saveCard",valuePropName:"checked",children:l.jsx(P,{children:"Kartımı gelecek ödemeler için kaydet"})}),l.jsx(s.Item,{name:"agreement",valuePropName:"checked",rules:[{validator:(e,s)=>s?Promise.resolve():Promise.reject(new Error("Sözleşmeyi kabul etmelisiniz"))}],children:l.jsxs(P,{children:[l.jsx("a",{href:"#",target:"_blank",children:"Ön Bilgilendirme Formu"})," ve"," ",l.jsx("a",{href:"#",target:"_blank",children:"Mesafeli Satış Sözleşmesi"}),"'ni okudum ve kabul ediyorum"]})}),l.jsx(S,{type:"primary",htmlType:"submit",size:"large",block:!0,loading:Z,icon:l.jsx(C,{}),children:"Güvenli Ödeme Yap"})]}),l.jsx(k,{}),l.jsx("div",{className:"security-badges",children:l.jsxs(i,{size:"large",wrap:!0,children:[l.jsxs(i,{children:[l.jsx(t,{style:{fontSize:24,color:"#52c41a"}}),l.jsx(E,{children:"256-bit SSL"})]}),l.jsxs(i,{children:[l.jsx(o,{style:{fontSize:24,color:"#1890ff"}}),l.jsx(E,{children:"PCI DSS"})]}),l.jsxs(i,{children:[l.jsx(z,{style:{fontSize:24,color:"#722ed1"}}),l.jsx(E,{children:"3D Secure"})]})]})})]}),l.jsxs(x,{className:"bank-logos",style:{marginTop:16},children:[l.jsx(E,{type:"secondary",children:"Anlaşmalı Bankalar:"}),l.jsx("div",{className:"bank-logo-grid",children:["garanti","isbank","akbank","yapikredi","qnb","denizbank","teb","ing"].map(e=>l.jsx("div",{className:"bank-logo",children:l.jsx("img",{src:`/images/banks/${e}.png`,alt:e})},e))})]})]}),l.jsxs(p,{xs:24,lg:10,children:[l.jsx("div",{className:"credit-card-visual",children:l.jsx("div",{className:`credit-card ${be}`,children:l.jsxs("div",{className:"card-front",children:[l.jsx("div",{className:"card-chip"}),l.jsx("div",{className:"card-logo",children:be&&l.jsx("img",{src:`/images/cards/${be}-white.png`,alt:be})}),l.jsx("div",{className:"card-number",children:he||"•••• •••• •••• ••••"}),l.jsxs("div",{className:"card-info",children:[l.jsxs("div",{className:"card-holder",children:[l.jsx(E,{className:"label",children:"Card Holder"}),l.jsx(E,{className:"value",children:ue||"AD SOYAD"})]}),l.jsxs("div",{className:"card-expiry",children:[l.jsx(E,{className:"label",children:"Expires"}),l.jsx(E,{className:"value",children:ge||"AA/YY"})]})]})]})})}),l.jsxs(x,{className:"order-summary",style:{marginTop:24},children:[l.jsxs(M,{level:4,children:[l.jsx(A,{})," Sipariş Özeti"]}),l.jsxs("div",{className:"summary-item",children:[l.jsx(E,{children:"Şirket:"}),l.jsx(E,{strong:!0,children:null==oe?void 0:oe.companyName})]}),l.jsxs("div",{className:"summary-item",children:[l.jsx(E,{children:"Paket:"}),l.jsx(E,{strong:!0,children:null==oe?void 0:oe.packageName})]}),l.jsxs("div",{className:"summary-item",children:[l.jsx(E,{children:"Dönem:"}),l.jsx(E,{strong:!0,children:"Monthly"===(null==oe?void 0:oe.billingPeriod)?"Aylık":"Yıllık"})]}),fe>1&&l.jsxs("div",{className:"summary-item",children:[l.jsx(E,{children:"Taksit:"}),l.jsxs(E,{strong:!0,children:[fe," Taksit"]})]}),l.jsx(k,{}),l.jsxs("div",{className:"summary-total",children:[l.jsx(M,{level:5,children:"Toplam Tutar"}),l.jsxs(M,{level:3,style:{margin:0,color:"#52c41a"},children:[null==oe?void 0:oe.currency,null==oe?void 0:oe.amount]}),fe>1&&l.jsxs(E,{type:"secondary",children:[fe," x ",null==oe?void 0:oe.currency,((null==oe?void 0:oe.amount)||0)/fe]})]}),l.jsx(u,{message:"Güvenli Ödeme",description:"Tüm işlemleriniz 256-bit SSL ile korunmaktadır",type:"success",showIcon:!0,icon:l.jsx(t,{}),style:{marginTop:16}})]}),l.jsxs(x,{style:{marginTop:16},children:[l.jsx(M,{level:5,children:"Yardım ve Destek"}),l.jsxs(i,{direction:"vertical",style:{width:"100%"},children:[l.jsxs(E,{children:[l.jsx(B,{})," 0850 123 45 67"]}),l.jsxs(E,{children:[l.jsx(K,{})," destek@stocker.com"]}),l.jsxs(E,{children:[l.jsx($,{})," 7/24 Canlı Destek"]})]})]})]})]})})},"credit_card"),l.jsx(_,{tab:l.jsxs(i,{children:[l.jsx(g,{}),"Havale/EFT"]}),children:l.jsxs(x,{children:[l.jsx(u,{message:"Banka Havalesi Bilgileri",description:"Aşağıdaki hesap bilgilerine havale/EFT yapabilirsiniz.",type:"info",showIcon:!0,style:{marginBottom:24}}),l.jsx(j,{dataSource:[{bank:"Garanti BBVA",iban:"TR12 0006 2000 1234 0006 2345 67",branch:"Levent Şubesi"},{bank:"İş Bankası",iban:"TR34 0006 4000 0011 2345 6789 00",branch:"Maslak Şubesi"},{bank:"Akbank",iban:"TR56 0004 6000 5888 8000 1234 56",branch:"Sarıyer Şubesi"}],renderItem:e=>l.jsx(j.Item,{children:l.jsx(x,{style:{width:"100%"},children:l.jsxs(i,{direction:"vertical",style:{width:"100%"},children:[l.jsx(E,{strong:!0,children:e.bank}),l.jsx(E,{copyable:!0,children:e.iban}),l.jsx(E,{type:"secondary",children:e.branch})]})})})}),l.jsx(u,{message:"Önemli",description:`Açıklama kısmına "${oe.companyName} - ${ce}" yazınız.`,type:"warning",style:{marginTop:16}})]})},"bank_transfer"),l.jsx(_,{tab:l.jsxs(i,{children:[l.jsx(v,{}),"Dijital Cüzdan"]}),children:l.jsx(x,{children:l.jsx(y,{gutter:[16,16],children:["PayPal","Apple Pay","Google Pay","BKM Express"].map(e=>l.jsx(p,{span:12,children:l.jsx(x,{hoverable:!0,className:"wallet-card",onClick:()=>a.info(`${e} ile ödeme simülasyonu`),children:l.jsxs(i,{direction:"vertical",align:"center",style:{width:"100%"},children:[l.jsx(v,{style:{fontSize:48,color:"#1890ff"}}),l.jsx(E,{strong:!0,children:e})]})})},e))})})},"digital_wallet")]})})]})}),l.jsx(b,{title:l.jsxs(i,{children:[l.jsx(o,{style:{color:"#1890ff"}}),"3D Secure Doğrulama"]}),visible:Q,footer:null,closable:!1,width:500,children:l.jsxs("div",{className:"secure-3d-container",children:[l.jsx(u,{message:"Güvenlik Doğrulaması",description:"Bankanız tarafından cep telefonunuza SMS ile gönderilen 6 haneli doğrulama kodunu giriniz.",type:"info",showIcon:!0,style:{marginBottom:24}}),l.jsxs("div",{className:"bank-info",children:[l.jsx("img",{src:"/images/banks/bank-logo.png",alt:"Bank",style:{height:40}}),l.jsx(M,{level:5,style:{margin:"16px 0"},children:"DEMO BANK 3D Secure"})]}),l.jsxs("div",{className:"transaction-info",children:[l.jsxs("div",{className:"info-row",children:[l.jsx(E,{type:"secondary",children:"İşyeri:"}),l.jsx(E,{strong:!0,children:"Stocker SaaS Platform"})]}),l.jsxs("div",{className:"info-row",children:[l.jsx(E,{type:"secondary",children:"Tutar:"}),l.jsxs(E,{strong:!0,children:[null==oe?void 0:oe.currency,null==oe?void 0:oe.amount]})]}),l.jsxs("div",{className:"info-row",children:[l.jsx(E,{type:"secondary",children:"Tarih:"}),l.jsx(E,{strong:!0,children:(new Date).toLocaleString("tr-TR")})]}),l.jsxs("div",{className:"info-row",children:[l.jsx(E,{type:"secondary",children:"Kart:"}),l.jsxs(E,{strong:!0,children:["**** **** **** ",he.slice(-4)]})]})]}),l.jsx(k,{}),l.jsxs(s,{onFinish:we,children:[l.jsx(s.Item,{label:"SMS Doğrulama Kodu",name:"smsCode",rules:[{required:!0,message:"Doğrulama kodu zorunludur"}],extra:l.jsxs(i,{children:[l.jsx(E,{type:"secondary",children:"Demo için kod:"}),l.jsx(E,{type:"success",strong:!0,children:"123456"})]}),children:l.jsx(f,{size:"large",placeholder:"6 haneli kod",maxLength:6,value:ee,onChange:e=>se(e.target.value),prefix:l.jsx(N,{}),suffix:l.jsxs(E,{type:"secondary",children:[Math.floor(ae/60),":",(ae%60).toString().padStart(2,"0")]})})}),l.jsxs(y,{gutter:16,children:[l.jsx(p,{span:12,children:l.jsx(S,{size:"large",block:!0,onClick:()=>{U(!1),a.info("İşlem iptal edildi")},children:"İptal"})}),l.jsx(p,{span:12,children:l.jsx(S,{type:"primary",size:"large",block:!0,htmlType:"submit",loading:Z,children:"Doğrula ve Öde"})})]})]}),l.jsx(u,{message:"Test Ortamı",description:"Bu bir test işlemidir. Gerçek ödeme alınmayacaktır.",type:"warning",style:{marginTop:16}})]})})]}):l.jsx("div",{style:{textAlign:"center",padding:100},children:l.jsx(r,{size:"large"})})};export{q as PaymentPage};
