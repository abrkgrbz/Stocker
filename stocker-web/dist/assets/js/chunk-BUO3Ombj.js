var e=(e,t,r)=>new Promise((a,o)=>{var n=e=>{try{l(r.next(e))}catch(t){o(t)}},s=e=>{try{l(r.throw(e))}catch(t){o(t)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,s);l((r=r.apply(e,t)).next())});import{a as t}from"./chunk-BsETiAjl.js";import{aD as r}from"./chunk-BkH-3fqb.js";const a=t.create({baseURL:"https://api.stoocker.app/api",timeout:3e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{const t=localStorage.getItem("access_token");t&&(e.headers.Authorization=`Bearer ${t}`);const r=localStorage.getItem("tenant_id");return r&&(e.headers["X-Tenant-Id"]=r),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,t=>e(null,null,function*(){var e,a;const{response:o}=t;if(o)switch(o.status){case 401:r.error("Oturumunuz sona erdi. Lütfen tekrar giriş yapın."),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login";break;case 403:r.error("Bu işlem için yetkiniz bulunmamaktadır.");break;case 404:r.error("İstenen kaynak bulunamadı.");break;case 422:if(null==(e=o.data)?void 0:e.errors){const e=o.data.errors,t=Object.values(e).flat().join(", ");r.error(t)}else r.error("Girdiğiniz bilgileri kontrol edin.");break;case 500:r.error("Sunucu hatası oluştu. Lütfen daha sonra tekrar deneyin.");break;default:r.error((null==(a=o.data)?void 0:a.message)||"Bir hata oluştu.")}else t.request?r.error("Sunucuya bağlanılamıyor. İnternet bağlantınızı kontrol edin."):r.error("Beklenmeyen bir hata oluştu.");return Promise.reject(t)}));const o={get:(e,t)=>a.get(e,t),post:(e,t,r)=>a.post(e,t,r),put:(e,t,r)=>a.put(e,t,r),patch:(e,t,r)=>a.patch(e,t,r),delete:(e,t)=>a.delete(e,t),upload:(e,t,r)=>{const o=new FormData;return o.append("file",t),a.post(e,o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(r&&e.total){const t=Math.round(100*e.loaded/e.total);r(t)}}})},download:(t,o)=>e(null,null,function*(){try{const e=yield a.get(t,{responseType:"blob"}),r=new Blob([e.data]),n=window.URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=o||"download",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(n)}catch(e){throw r.error("Dosya indirilemedi."),e}})};export{o as a};
