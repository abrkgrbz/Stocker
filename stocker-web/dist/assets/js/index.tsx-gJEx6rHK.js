var e=(e,a,s)=>new Promise((i,t)=>{var n=e=>{try{l(s.next(e))}catch(a){t(a)}},r=e=>{try{l(s.throw(e))}catch(a){t(a)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,r);l((s=s.apply(e,a)).next())});import{aD as a,j as s,N as i,ai as t,c as n,bI as r,bH as l,bJ as d,aA as c,bn as o,D as m,bc as u,Y as x,a2 as h,a3 as j,a5 as y,Z as p,a0 as v,bd as g,B as k,by as b,be as f,b1 as T,O as N,bv as D,bK as P,bL as F,bg as Y,aE as A,aV as S,$ as z,R as C}from"./chunk-BxJbIkJM.js";import{j as B,u as M,r as w}from"./chunk-nBmrMGrr.js";import{f as I,a as R}from"./chunk-BJ_WNHo8.js";import"../index-0z4n-4se.js";import"./chunk-BsETiAjl.js";const{Title:H,Text:K,Paragraph:O}=p,E=()=>{const{id:p}=B(),E=M(),[G,V]=w.useState(null),[$,q]=w.useState(!0),[L,J]=w.useState(!1),[U,Z]=w.useState(!1);w.useEffect(()=>{p&&Q()},[p]);const Q=()=>e(null,null,function*(){try{q(!0);V({id:p,invoiceNumber:"INV-2024-001",customerId:"1",customerName:"ABC Teknoloji A.Ş.",customerEmail:"muhasebe@abcteknoloji.com",customerPhone:"+90 212 555 0100",customerAddress:"Maslak Mah. Teknoloji Cad. No:15\nSarıyer/İstanbul",customerTaxNumber:"1234567890",customerTaxOffice:"Sarıyer",invoiceDate:"2024-01-15T00:00:00",dueDate:"2024-02-15T00:00:00",subTotal:1e4,taxAmount:1800,discountAmount:500,totalAmount:11300,currency:"TRY",status:"Paid",paidDate:"2024-02-10T00:00:00",paymentMethod:"BankTransfer",notes:"Ödeme IBAN: TR12 0001 2345 6789 0123 4567 89",items:[{id:"1",productId:"1",productName:"Yazılım Lisansı - Pro",description:"Yıllık yazılım lisansı",quantity:2,unitPrice:3e3,taxRate:18,discountRate:5,totalPrice:5700},{id:"2",productId:"2",productName:"Destek Paketi",description:"7/24 teknik destek hizmeti",quantity:1,unitPrice:4e3,taxRate:18,discountRate:0,totalPrice:4720}],createdAt:"2024-01-15T10:30:00",createdBy:"Ahmet Yılmaz",updatedAt:"2024-02-10T14:20:00",updatedBy:"Mehmet Demir"})}catch(e){a.error("Fatura detayları yüklenemedi")}finally{q(!1)}}),W=[{key:"duplicate",label:"Kopyala",icon:s.jsx(D,{}),onClick:()=>{a.info("Fatura kopyalandı"),E("/app/tenant/invoices/new")}},{key:"share",label:"Paylaş",icon:s.jsx(P,{})},{key:"export-excel",label:"Excel Olarak İndir",icon:s.jsx(F,{})},{type:"divider"},{key:"delete",label:"Sil",icon:s.jsx(Y,{}),danger:!0,onClick:()=>Z(!0)}],X=[{title:"#",dataIndex:"index",key:"index",width:50,render:(e,a,s)=>s+1},{title:"Ürün/Hizmet",dataIndex:"productName",key:"productName",render:(e,a)=>s.jsxs("div",{children:[s.jsx(K,{strong:!0,children:e}),a.description&&s.jsx("div",{children:s.jsx(K,{type:"secondary",style:{fontSize:12},children:a.description})})]})},{title:"Miktar",dataIndex:"quantity",key:"quantity",width:100,align:"center"},{title:"Birim Fiyat",dataIndex:"unitPrice",key:"unitPrice",width:120,align:"right",render:e=>R(e)},{title:"İndirim %",dataIndex:"discountRate",key:"discountRate",width:100,align:"center",render:e=>e>0?`%${e}`:"-"},{title:"KDV %",dataIndex:"taxRate",key:"taxRate",width:100,align:"center",render:e=>`%${e}`},{title:"Toplam",dataIndex:"totalPrice",key:"totalPrice",width:150,align:"right",render:e=>s.jsx(K,{strong:!0,children:R(e)})}];return $?s.jsx("div",{className:"invoice-detail-loading",children:s.jsx(i,{size:"large"})}):G?s.jsxs("div",{className:"invoice-detail-page",children:[s.jsx(r,{ghost:!1,onBack:()=>E(-1),title:`Fatura #${G.invoiceNumber}`,tags:s.jsx(x,{color:(_=G.status,{Draft:"default",Sent:"processing",Paid:"success",Overdue:"error",Cancelled:"warning",PartiallyPaid:"warning"}[_]||"default"),icon:(e=>({Draft:s.jsx(o,{}),Sent:s.jsx(C,{}),Paid:s.jsx(z,{}),Overdue:s.jsx(S,{}),Cancelled:s.jsx(A,{})}[e]||null))(G.status),children:"Paid"===G.status?"Ödendi":"Overdue"===G.status?"Gecikmiş":"Sent"===G.status?"Gönderildi":"Draft"===G.status?"Taslak":"Cancelled"===G.status?"İptal":G.status}),extra:[s.jsx(n,{icon:s.jsx(l,{}),onClick:()=>{window.print()},children:"Yazdır"},"print"),s.jsx(n,{icon:s.jsx(d,{}),onClick:()=>e(null,null,function*(){try{a.loading("PDF oluşturuluyor..."),setTimeout(()=>{a.success("PDF başarıyla indirildi")},1500)}catch(e){a.error("PDF indirilemedi")}}),children:"PDF İndir"},"download"),s.jsx(n,{type:"primary",icon:s.jsx(c,{}),onClick:()=>e(null,null,function*(){J(!0)}),children:"Email Gönder"},"send"),s.jsx(n,{icon:s.jsx(o,{}),onClick:()=>{E(`/app/${p}/invoices/${p}/edit`)},children:"Düzenle"},"edit"),s.jsx(m,{menu:{items:W},placement:"bottomRight",children:s.jsx(n,{icon:s.jsx(u,{})})},"more")]}),s.jsx("div",{className:"invoice-detail-content",children:s.jsxs(h,{gutter:[24,24],children:[s.jsx(j,{xs:24,lg:16,children:s.jsxs(y,{className:"invoice-main-card",children:[s.jsxs("div",{className:"invoice-header",children:[s.jsxs("div",{className:"invoice-logo",children:[s.jsx(H,{level:3,children:"STOCKER"}),s.jsx(K,{type:"secondary",children:"Profesyonel Fatura"})]}),s.jsxs("div",{className:"invoice-header-info",children:[s.jsx(H,{level:2,style:{margin:0},children:"FATURA"}),s.jsxs(K,{strong:!0,style:{fontSize:16},children:["#",G.invoiceNumber]})]})]}),s.jsx(v,{}),s.jsxs(h,{gutter:48,children:[s.jsx(j,{span:12,children:s.jsxs("div",{className:"info-section",children:[s.jsx(K,{type:"secondary",children:"Faturayı Kesen:"}),s.jsx(H,{level:5,children:"Stocker Yazılım A.Ş."}),s.jsxs(O,{children:["Teknoloji Mah. İnovasyon Cad. No:42",s.jsx("br",{}),"Şişli/İstanbul",s.jsx("br",{}),"Tel: +90 212 555 0200",s.jsx("br",{}),"Email: fatura@stocker.com"]})]})}),s.jsx(j,{span:12,children:s.jsxs("div",{className:"info-section",children:[s.jsx(K,{type:"secondary",children:"Fatura Edilen:"}),s.jsx(H,{level:5,children:G.customerName}),s.jsxs(O,{children:[G.customerAddress,s.jsx("br",{}),"Tel: ",G.customerPhone,s.jsx("br",{}),"Email: ",G.customerEmail,s.jsx("br",{}),G.customerTaxNumber&&s.jsxs(s.Fragment,{children:["VKN: ",G.customerTaxNumber,s.jsx("br",{}),"V.D.: ",G.customerTaxOffice]})]})]})})]}),s.jsx(v,{}),s.jsxs(h,{gutter:48,style:{marginBottom:24},children:[s.jsx(j,{span:8,children:s.jsxs("div",{className:"detail-item",children:[s.jsx(K,{type:"secondary",children:"Fatura Tarihi:"}),s.jsx("div",{children:s.jsx(K,{strong:!0,children:I(G.invoiceDate)})})]})}),s.jsx(j,{span:8,children:s.jsxs("div",{className:"detail-item",children:[s.jsx(K,{type:"secondary",children:"Vade Tarihi:"}),s.jsx("div",{children:s.jsx(K,{strong:!0,children:I(G.dueDate)})})]})}),s.jsx(j,{span:8,children:s.jsxs("div",{className:"detail-item",children:[s.jsx(K,{type:"secondary",children:"Ödeme Yöntemi:"}),s.jsx("div",{children:s.jsx(K,{strong:!0,children:"BankTransfer"===G.paymentMethod?"Banka Havalesi":"CreditCard"===G.paymentMethod?"Kredi Kartı":"Cash"===G.paymentMethod?"Nakit":G.paymentMethod})})]})})]}),s.jsx(g,{dataSource:G.items,columns:X,pagination:!1,rowKey:"id",className:"invoice-items-table"}),s.jsx(h,{justify:"end",style:{marginTop:24},children:s.jsx(j,{span:10,children:s.jsxs("div",{className:"invoice-summary",children:[s.jsxs("div",{className:"summary-item",children:[s.jsx(K,{children:"Ara Toplam:"}),s.jsx(K,{children:R(G.subTotal)})]}),G.discountAmount>0&&s.jsxs("div",{className:"summary-item",children:[s.jsx(K,{children:"İndirim:"}),s.jsxs(K,{type:"danger",children:["-",R(G.discountAmount)]})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx(K,{children:"KDV (%18):"}),s.jsx(K,{children:R(G.taxAmount)})]}),s.jsx(v,{style:{margin:"12px 0"}}),s.jsxs("div",{className:"summary-item total",children:[s.jsx(H,{level:4,children:"Genel Toplam:"}),s.jsx(H,{level:4,style:{color:"#1890ff"},children:R(G.totalAmount)})]})]})})}),G.notes&&s.jsxs(s.Fragment,{children:[s.jsx(v,{}),s.jsxs("div",{className:"invoice-notes",children:[s.jsx(H,{level:5,children:"Notlar:"}),s.jsx(O,{children:G.notes})]})]}),s.jsx(v,{}),s.jsx("div",{className:"invoice-footer",children:s.jsxs(K,{type:"secondary",children:["Bu fatura ",I(G.createdAt,"DD.MM.YYYY HH:mm")," tarihinde oluşturulmuştur."]})})]})}),s.jsxs(j,{xs:24,lg:8,children:[s.jsxs(y,{className:"status-card",style:{marginBottom:16},children:[s.jsx(H,{level:5,children:"Fatura Durumu"}),s.jsxs("div",{className:"status-content",children:[s.jsx(k,{status:"Paid"===G.status?"success":"processing",text:s.jsx(K,{strong:!0,style:{fontSize:16},children:"Paid"===G.status?"Ödendi":"Overdue"===G.status?"Gecikmiş":"Sent"===G.status?"Gönderildi":G.status})}),G.paidDate&&s.jsxs("div",{style:{marginTop:12},children:[s.jsx(K,{type:"secondary",children:"Ödeme Tarihi:"}),s.jsx("div",{children:s.jsx(K,{children:I(G.paidDate)})})]})]}),"Paid"!==G.status&&s.jsx(n,{type:"primary",block:!0,style:{marginTop:16},onClick:()=>e(null,null,function*(){try{a.success("Fatura ödendi olarak işaretlendi"),Q()}catch(e){a.error("İşlem başarısız")}}),children:"Ödendi Olarak İşaretle"})]}),s.jsxs(y,{className:"payment-info-card",style:{marginBottom:16},children:[s.jsx(H,{level:5,children:"Ödeme Bilgileri"}),s.jsxs(b,{column:1,size:"small",children:[s.jsx(b.Item,{label:"Toplam Tutar",children:s.jsx(K,{strong:!0,style:{fontSize:18,color:"#1890ff"},children:R(G.totalAmount)})}),s.jsx(b.Item,{label:"Ödeme Yöntemi",children:"BankTransfer"===G.paymentMethod?"Banka Havalesi":"CreditCard"===G.paymentMethod?"Kredi Kartı":G.paymentMethod}),s.jsx(b.Item,{label:"Vade Tarihi",children:I(G.dueDate)})]})]}),s.jsxs(y,{className:"activity-card",children:[s.jsx(H,{level:5,children:"İşlem Geçmişi"}),s.jsx(f,{items:[{color:"green",children:s.jsxs(s.Fragment,{children:[s.jsx(K,{strong:!0,children:"Ödeme alındı"}),s.jsx("div",{children:s.jsx(K,{type:"secondary",style:{fontSize:12},children:I(G.paidDate,"DD.MM.YYYY HH:mm")})})]})},{color:"blue",children:s.jsxs(s.Fragment,{children:[s.jsx(K,{strong:!0,children:"Fatura gönderildi"}),s.jsx("div",{children:s.jsx(K,{type:"secondary",style:{fontSize:12},children:I(G.invoiceDate,"DD.MM.YYYY HH:mm")})})]})},{color:"gray",children:s.jsxs(s.Fragment,{children:[s.jsx(K,{strong:!0,children:"Fatura oluşturuldu"}),s.jsx("div",{children:s.jsxs(K,{type:"secondary",style:{fontSize:12},children:[G.createdBy," • ",I(G.createdAt,"DD.MM.YYYY HH:mm")]})})]})}]})]})]})]})}),s.jsx(T,{title:"Fatura Gönder",open:L,onOk:()=>{a.success("Fatura email ile gönderildi"),J(!1)},onCancel:()=>J(!1),okText:"Gönder",cancelText:"İptal",children:s.jsx(N,{message:"Fatura müşteriye email olarak gönderilecek",description:`${G.customerEmail} adresine fatura gönderilecektir.`,type:"info",showIcon:!0})}),s.jsx(T,{title:"Faturayı Sil",open:U,onOk:()=>e(null,null,function*(){try{a.success("Fatura başarıyla silindi"),E(-1)}catch(e){a.error("Fatura silinemedi")}}),onCancel:()=>Z(!1),okText:"Sil",cancelText:"İptal",okButtonProps:{danger:!0},children:s.jsx(N,{message:"Bu işlem geri alınamaz!",description:"Faturayı silmek istediğinizden emin misiniz?",type:"warning",showIcon:!0})})]}):s.jsx(t,{status:"404",title:"Fatura Bulunamadı",subTitle:"Aradığınız fatura bulunamadı veya silinmiş olabilir.",extra:s.jsx(n,{type:"primary",onClick:()=>E(-1),children:"Geri Dön"})});var _};export{E as InvoiceDetail,E as default};
