var e=(e,s,a)=>new Promise((i,t)=>{var n=e=>{try{l(a.next(e))}catch(s){t(s)}},r=e=>{try{l(a.throw(e))}catch(s){t(s)}},l=e=>e.done?i(e.value):Promise.resolve(e.value).then(n,r);l((a=a.apply(e,s)).next())});import{ar as s,j as a,t as i,X as t,v as n,br as r,bn as l,bs as d,ao as c,b8 as o,D as m,bf as u,T as x,L as h,M as j,N as y,E as p,Y as v,aZ as g,B as k,bc as f,a_ as b,aR as T,u as N,bl as D,bt as P,bu as F,b9 as Y,as as A,aI as M,_ as S,a5 as z}from"./chunk-CUCWWrQt.js";import{j as C,u as B,r as w}from"./chunk-nBmrMGrr.js";import{f as I,a as R}from"./chunk-CCTZOhNJ.js";import"../index-D8hn_cKL.js";import"./chunk-BsETiAjl.js";const{Title:E,Text:H,Paragraph:K}=p,O=()=>{const{id:p}=C(),O=B(),[G,V]=w.useState(null),[$,q]=w.useState(!0),[L,_]=w.useState(!1),[U,X]=w.useState(!1);w.useEffect(()=>{p&&Z()},[p]);const Z=()=>e(null,null,function*(){try{q(!0);V({id:p,invoiceNumber:"INV-2024-001",customerId:"1",customerName:"ABC Teknoloji A.Ş.",customerEmail:"muhasebe@abcteknoloji.com",customerPhone:"+90 212 555 0100",customerAddress:"Maslak Mah. Teknoloji Cad. No:15\nSarıyer/İstanbul",customerTaxNumber:"1234567890",customerTaxOffice:"Sarıyer",invoiceDate:"2024-01-15T00:00:00",dueDate:"2024-02-15T00:00:00",subTotal:1e4,taxAmount:1800,discountAmount:500,totalAmount:11300,currency:"TRY",status:"Paid",paidDate:"2024-02-10T00:00:00",paymentMethod:"BankTransfer",notes:"Ödeme IBAN: TR12 0001 2345 6789 0123 4567 89",items:[{id:"1",productId:"1",productName:"Yazılım Lisansı - Pro",description:"Yıllık yazılım lisansı",quantity:2,unitPrice:3e3,taxRate:18,discountRate:5,totalPrice:5700},{id:"2",productId:"2",productName:"Destek Paketi",description:"7/24 teknik destek hizmeti",quantity:1,unitPrice:4e3,taxRate:18,discountRate:0,totalPrice:4720}],createdAt:"2024-01-15T10:30:00",createdBy:"Ahmet Yılmaz",updatedAt:"2024-02-10T14:20:00",updatedBy:"Mehmet Demir"})}catch(e){s.error("Fatura detayları yüklenemedi")}finally{q(!1)}}),J=[{key:"duplicate",label:"Kopyala",icon:a.jsx(D,{}),onClick:()=>{s.info("Fatura kopyalandı"),O("/app/tenant/invoices/new")}},{key:"share",label:"Paylaş",icon:a.jsx(P,{})},{key:"export-excel",label:"Excel Olarak İndir",icon:a.jsx(F,{})},{type:"divider"},{key:"delete",label:"Sil",icon:a.jsx(Y,{}),danger:!0,onClick:()=>X(!0)}],Q=[{title:"#",dataIndex:"index",key:"index",width:50,render:(e,s,a)=>a+1},{title:"Ürün/Hizmet",dataIndex:"productName",key:"productName",render:(e,s)=>a.jsxs("div",{children:[a.jsx(H,{strong:!0,children:e}),s.description&&a.jsx("div",{children:a.jsx(H,{type:"secondary",style:{fontSize:12},children:s.description})})]})},{title:"Miktar",dataIndex:"quantity",key:"quantity",width:100,align:"center"},{title:"Birim Fiyat",dataIndex:"unitPrice",key:"unitPrice",width:120,align:"right",render:e=>R(e)},{title:"İndirim %",dataIndex:"discountRate",key:"discountRate",width:100,align:"center",render:e=>e>0?`%${e}`:"-"},{title:"KDV %",dataIndex:"taxRate",key:"taxRate",width:100,align:"center",render:e=>`%${e}`},{title:"Toplam",dataIndex:"totalPrice",key:"totalPrice",width:150,align:"right",render:e=>a.jsx(H,{strong:!0,children:R(e)})}];return $?a.jsx("div",{className:"invoice-detail-loading",children:a.jsx(i,{size:"large"})}):G?a.jsxs("div",{className:"invoice-detail-page",children:[a.jsx(r,{ghost:!1,onBack:()=>O(-1),title:`Fatura #${G.invoiceNumber}`,tags:a.jsx(x,{color:(W=G.status,{Draft:"default",Sent:"processing",Paid:"success",Overdue:"error",Cancelled:"warning",PartiallyPaid:"warning"}[W]||"default"),icon:(e=>({Draft:a.jsx(o,{}),Sent:a.jsx(z,{}),Paid:a.jsx(S,{}),Overdue:a.jsx(M,{}),Cancelled:a.jsx(A,{})}[e]||null))(G.status),children:"Paid"===G.status?"Ödendi":"Overdue"===G.status?"Gecikmiş":"Sent"===G.status?"Gönderildi":"Draft"===G.status?"Taslak":"Cancelled"===G.status?"İptal":G.status}),extra:[a.jsx(n,{icon:a.jsx(l,{}),onClick:()=>{window.print()},children:"Yazdır"},"print"),a.jsx(n,{icon:a.jsx(d,{}),onClick:()=>e(null,null,function*(){try{s.loading("PDF oluşturuluyor..."),setTimeout(()=>{s.success("PDF başarıyla indirildi")},1500)}catch(e){s.error("PDF indirilemedi")}}),children:"PDF İndir"},"download"),a.jsx(n,{type:"primary",icon:a.jsx(c,{}),onClick:()=>e(null,null,function*(){_(!0)}),children:"Email Gönder"},"send"),a.jsx(n,{icon:a.jsx(o,{}),onClick:()=>{O(`/app/${p}/invoices/${p}/edit`)},children:"Düzenle"},"edit"),a.jsx(m,{menu:{items:J},placement:"bottomRight",children:a.jsx(n,{icon:a.jsx(u,{})})},"more")]}),a.jsx("div",{className:"invoice-detail-content",children:a.jsxs(h,{gutter:[24,24],children:[a.jsx(j,{xs:24,lg:16,children:a.jsxs(y,{className:"invoice-main-card",children:[a.jsxs("div",{className:"invoice-header",children:[a.jsxs("div",{className:"invoice-logo",children:[a.jsx(E,{level:3,children:"STOCKER"}),a.jsx(H,{type:"secondary",children:"Profesyonel Fatura"})]}),a.jsxs("div",{className:"invoice-header-info",children:[a.jsx(E,{level:2,style:{margin:0},children:"FATURA"}),a.jsxs(H,{strong:!0,style:{fontSize:16},children:["#",G.invoiceNumber]})]})]}),a.jsx(v,{}),a.jsxs(h,{gutter:48,children:[a.jsx(j,{span:12,children:a.jsxs("div",{className:"info-section",children:[a.jsx(H,{type:"secondary",children:"Faturayı Kesen:"}),a.jsx(E,{level:5,children:"Stocker Yazılım A.Ş."}),a.jsxs(K,{children:["Teknoloji Mah. İnovasyon Cad. No:42",a.jsx("br",{}),"Şişli/İstanbul",a.jsx("br",{}),"Tel: +90 212 555 0200",a.jsx("br",{}),"Email: fatura@stocker.com"]})]})}),a.jsx(j,{span:12,children:a.jsxs("div",{className:"info-section",children:[a.jsx(H,{type:"secondary",children:"Fatura Edilen:"}),a.jsx(E,{level:5,children:G.customerName}),a.jsxs(K,{children:[G.customerAddress,a.jsx("br",{}),"Tel: ",G.customerPhone,a.jsx("br",{}),"Email: ",G.customerEmail,a.jsx("br",{}),G.customerTaxNumber&&a.jsxs(a.Fragment,{children:["VKN: ",G.customerTaxNumber,a.jsx("br",{}),"V.D.: ",G.customerTaxOffice]})]})]})})]}),a.jsx(v,{}),a.jsxs(h,{gutter:48,style:{marginBottom:24},children:[a.jsx(j,{span:8,children:a.jsxs("div",{className:"detail-item",children:[a.jsx(H,{type:"secondary",children:"Fatura Tarihi:"}),a.jsx("div",{children:a.jsx(H,{strong:!0,children:I(G.invoiceDate)})})]})}),a.jsx(j,{span:8,children:a.jsxs("div",{className:"detail-item",children:[a.jsx(H,{type:"secondary",children:"Vade Tarihi:"}),a.jsx("div",{children:a.jsx(H,{strong:!0,children:I(G.dueDate)})})]})}),a.jsx(j,{span:8,children:a.jsxs("div",{className:"detail-item",children:[a.jsx(H,{type:"secondary",children:"Ödeme Yöntemi:"}),a.jsx("div",{children:a.jsx(H,{strong:!0,children:"BankTransfer"===G.paymentMethod?"Banka Havalesi":"CreditCard"===G.paymentMethod?"Kredi Kartı":"Cash"===G.paymentMethod?"Nakit":G.paymentMethod})})]})})]}),a.jsx(g,{dataSource:G.items,columns:Q,pagination:!1,rowKey:"id",className:"invoice-items-table"}),a.jsx(h,{justify:"end",style:{marginTop:24},children:a.jsx(j,{span:10,children:a.jsxs("div",{className:"invoice-summary",children:[a.jsxs("div",{className:"summary-item",children:[a.jsx(H,{children:"Ara Toplam:"}),a.jsx(H,{children:R(G.subTotal)})]}),G.discountAmount>0&&a.jsxs("div",{className:"summary-item",children:[a.jsx(H,{children:"İndirim:"}),a.jsxs(H,{type:"danger",children:["-",R(G.discountAmount)]})]}),a.jsxs("div",{className:"summary-item",children:[a.jsx(H,{children:"KDV (%18):"}),a.jsx(H,{children:R(G.taxAmount)})]}),a.jsx(v,{style:{margin:"12px 0"}}),a.jsxs("div",{className:"summary-item total",children:[a.jsx(E,{level:4,children:"Genel Toplam:"}),a.jsx(E,{level:4,style:{color:"#1890ff"},children:R(G.totalAmount)})]})]})})}),G.notes&&a.jsxs(a.Fragment,{children:[a.jsx(v,{}),a.jsxs("div",{className:"invoice-notes",children:[a.jsx(E,{level:5,children:"Notlar:"}),a.jsx(K,{children:G.notes})]})]}),a.jsx(v,{}),a.jsx("div",{className:"invoice-footer",children:a.jsxs(H,{type:"secondary",children:["Bu fatura ",I(G.createdAt,"DD.MM.YYYY HH:mm")," tarihinde oluşturulmuştur."]})})]})}),a.jsxs(j,{xs:24,lg:8,children:[a.jsxs(y,{className:"status-card",style:{marginBottom:16},children:[a.jsx(E,{level:5,children:"Fatura Durumu"}),a.jsxs("div",{className:"status-content",children:[a.jsx(k,{status:"Paid"===G.status?"success":"processing",text:a.jsx(H,{strong:!0,style:{fontSize:16},children:"Paid"===G.status?"Ödendi":"Overdue"===G.status?"Gecikmiş":"Sent"===G.status?"Gönderildi":G.status})}),G.paidDate&&a.jsxs("div",{style:{marginTop:12},children:[a.jsx(H,{type:"secondary",children:"Ödeme Tarihi:"}),a.jsx("div",{children:a.jsx(H,{children:I(G.paidDate)})})]})]}),"Paid"!==G.status&&a.jsx(n,{type:"primary",block:!0,style:{marginTop:16},onClick:()=>e(null,null,function*(){try{s.success("Fatura ödendi olarak işaretlendi"),Z()}catch(e){s.error("İşlem başarısız")}}),children:"Ödendi Olarak İşaretle"})]}),a.jsxs(y,{className:"payment-info-card",style:{marginBottom:16},children:[a.jsx(E,{level:5,children:"Ödeme Bilgileri"}),a.jsxs(f,{column:1,size:"small",children:[a.jsx(f.Item,{label:"Toplam Tutar",children:a.jsx(H,{strong:!0,style:{fontSize:18,color:"#1890ff"},children:R(G.totalAmount)})}),a.jsx(f.Item,{label:"Ödeme Yöntemi",children:"BankTransfer"===G.paymentMethod?"Banka Havalesi":"CreditCard"===G.paymentMethod?"Kredi Kartı":G.paymentMethod}),a.jsx(f.Item,{label:"Vade Tarihi",children:I(G.dueDate)})]})]}),a.jsxs(y,{className:"activity-card",children:[a.jsx(E,{level:5,children:"İşlem Geçmişi"}),a.jsx(b,{items:[{color:"green",children:a.jsxs(a.Fragment,{children:[a.jsx(H,{strong:!0,children:"Ödeme alındı"}),a.jsx("div",{children:a.jsx(H,{type:"secondary",style:{fontSize:12},children:I(G.paidDate,"DD.MM.YYYY HH:mm")})})]})},{color:"blue",children:a.jsxs(a.Fragment,{children:[a.jsx(H,{strong:!0,children:"Fatura gönderildi"}),a.jsx("div",{children:a.jsx(H,{type:"secondary",style:{fontSize:12},children:I(G.invoiceDate,"DD.MM.YYYY HH:mm")})})]})},{color:"gray",children:a.jsxs(a.Fragment,{children:[a.jsx(H,{strong:!0,children:"Fatura oluşturuldu"}),a.jsx("div",{children:a.jsxs(H,{type:"secondary",style:{fontSize:12},children:[G.createdBy," • ",I(G.createdAt,"DD.MM.YYYY HH:mm")]})})]})}]})]})]})]})}),a.jsx(T,{title:"Fatura Gönder",open:L,onOk:()=>{s.success("Fatura email ile gönderildi"),_(!1)},onCancel:()=>_(!1),okText:"Gönder",cancelText:"İptal",children:a.jsx(N,{message:"Fatura müşteriye email olarak gönderilecek",description:`${G.customerEmail} adresine fatura gönderilecektir.`,type:"info",showIcon:!0})}),a.jsx(T,{title:"Faturayı Sil",open:U,onOk:()=>e(null,null,function*(){try{s.success("Fatura başarıyla silindi"),O(-1)}catch(e){s.error("Fatura silinemedi")}}),onCancel:()=>X(!1),okText:"Sil",cancelText:"İptal",okButtonProps:{danger:!0},children:a.jsx(N,{message:"Bu işlem geri alınamaz!",description:"Faturayı silmek istediğinizden emin misiniz?",type:"warning",showIcon:!0})})]}):a.jsx(t,{status:"404",title:"Fatura Bulunamadı",subTitle:"Aradığınız fatura bulunamadı veya silinmiş olabilir.",extra:a.jsx(n,{type:"primary",onClick:()=>O(-1),children:"Geri Dön"})});var W};export{O as InvoiceDetail,O as default};
