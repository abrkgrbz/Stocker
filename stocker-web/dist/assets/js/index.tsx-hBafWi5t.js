var e=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,r=(e,r)=>{for(var l in r||(r={}))a.call(r,l)&&n(e,l,r[l]);if(s)for(var l of s(r))t.call(r,l)&&n(e,l,r[l]);return e},l=(e,s,a)=>new Promise((t,n)=>{var r=e=>{try{i(a.next(e))}catch(s){n(s)}},l=e=>{try{i(a.throw(e))}catch(s){n(s)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,l);i((a=a.apply(e,s)).next())});import{aD as i,j as c,q as o,o as d,b5 as h,Z as x,S as u,b6 as m,b7 as p,c as j,b8 as g,ao as y,a2 as v,a3 as f,a5 as b,b9 as k,ba as S,bb as N,bc as w,bd as C,be as T,R as z,$ as P,aU as A,F as R,a4 as D,bf as O,A as F,Y as I,B as $,D as H,z as G,G as U,bg as B,aa as W,aZ as E}from"./chunk-BxJbIkJM.js";import{r as K}from"./chunk-nBmrMGrr.js";import{C as Y}from"./chunk-BHgm5-pG.js";import{a as J}from"./chunk-BsETiAjl.js";import{g as M}from"./chunk-DE96JLJq.js";import{A as L,P as Z}from"./chunk-B_Gr6Zh-.js";import"./chunk-Dr9HW9Qx.js";const q=M(),Q={get:()=>l(null,null,function*(){return J.get(`${q}/api/master/dashboard/stats`)})},V={get:()=>l(null,null,function*(){return J.get(`${q}/api/master/dashboard/top-tenants`)})},{Title:X,Text:_,Paragraph:ee}=x,{RangePicker:se}=p,ae=()=>{const[e,s]=K.useState("month"),[a,t]=K.useState(!1),[n,x]=K.useState([]),[p,E]=K.useState(null),[J,M]=K.useState(!0),[q,ae]=K.useState(!0);K.useEffect(()=>{te(),ne()},[]);const te=()=>l(null,null,function*(){var e,s;try{M(!0);const a=yield V.get();if((null==(e=a.data)?void 0:e.success)&&(null==(s=a.data)?void 0:s.data)){const e=a.data.data.map((e,s)=>({key:e.id,rank:s+1,name:e.name,plan:e.plan,users:e.users,revenue:e.revenue,growth:e.growth,status:e.status}));x(e)}}catch(a){i.error("Failed to load tenants data")}finally{M(!1)}}),ne=()=>l(null,null,function*(){var e,s;try{ae(!0);const a=yield Q.get();if((null==(e=a.data)?void 0:e.success)&&(null==(s=a.data)?void 0:s.data)){const e=a.data.data;E({totalRevenue:e.totalRevenue,activeTenants:e.activeTenants,totalUsers:e.totalUsers,activeUsers:e.activeUsers,conversionRate:68.3,revenueChange:e.growth.revenue,tenantsChange:e.growth.tenants,usersChange:e.growth.users,systemHealth:e.systemHealth,packageDistribution:e.packageDistribution})}}catch(a){E({totalRevenue:524350,activeTenants:386,totalUsers:4823,conversionRate:68.3})}finally{ae(!1)}}),re=[{title:"Toplam Gelir",value:(null==p?void 0:p.totalRevenue)||524350,prefix:"",change:(null==p?void 0:p.revenueChange)||12.5,changeType:((null==p?void 0:p.revenueChange)||12.5)>0?"increase":"decrease",icon:c.jsx("span",{style:{fontSize:24,fontWeight:600},children:"₺"}),color:"#667eea",bgColor:"rgba(102, 126, 234, 0.1)",description:"geçen aya göre"},{title:"Aktif Tenantlar",value:(null==p?void 0:p.activeTenants)||386,change:(null==p?void 0:p.tenantsChange)||8.3,changeType:((null==p?void 0:p.tenantsChange)||8.3)>0?"increase":"decrease",icon:c.jsx(o,{}),color:"#50cd89",bgColor:"rgba(80, 205, 137, 0.1)",description:"bu ay yeni"},{title:"Toplam Kullanıcı",value:(null==p?void 0:p.totalUsers)||4823,change:(null==p?void 0:p.usersChange)||15.7,changeType:((null==p?void 0:p.usersChange)||15.7)>0?"increase":"decrease",icon:c.jsx(d,{}),color:"#ffc700",bgColor:"rgba(255, 199, 0, 0.1)",description:"aktif kullanıcı"},{title:"Dönüşüm Oranı",value:(null==p?void 0:p.conversionRate)||68.3,suffix:"%",change:(null==p?void 0:p.conversionChange)||3.2,changeType:((null==p?void 0:p.conversionChange)||-3.2)>0?"increase":"decrease",icon:c.jsx(h,{}),color:"#f1416c",bgColor:"rgba(241, 65, 108, 0.1)",description:"denemelerden"}],le={data:[{month:"Jan",revenue:32e4,profit:12e4},{month:"Feb",revenue:385e3,profit:145e3},{month:"Mar",revenue:412e3,profit:168e3},{month:"Apr",revenue:445e3,profit:178e3},{month:"May",revenue:478e3,profit:195e3},{month:"Jun",revenue:524350,profit:21e4}],xField:"month",yField:"revenue",height:300,smooth:!0,color:"l(0) 0:#667eea 1:#764ba2",areaStyle:{fillOpacity:.6},xAxis:{grid:null},yAxis:{label:{formatter:e=>`₺${parseInt(e)/1e3}k`},grid:{line:{style:{stroke:"#f0f0f0",lineWidth:1,lineDash:[4,4]}}}},tooltip:{customContent:(e,s)=>`<div style="padding: 8px;">\n          <div style="margin-bottom: 4px; font-weight: 600;">${e}</div>\n          ${s.map(e=>`<div style="color: ${e.color};">Gelir: ₺${e.data.revenue.toLocaleString("tr-TR")}</div>\n             <div style="color: ${e.color};">Kar: ₺${e.data.profit.toLocaleString("tr-TR")}</div>`).join("")}\n        </div>`}},ie={data:[{type:"Enterprise",value:45,percentage:11.6},{type:"Professional",value:125,percentage:32.4},{type:"Starter",value:186,percentage:48.2},{type:"Free Trial",value:30,percentage:7.8}],angleField:"value",colorField:"type",radius:.8,innerRadius:.6,height:300,label:{type:"inner",offset:"-50%",content:"{value}",style:{textAlign:"center",fontSize:14,fill:"#fff"}},color:["#667eea","#50cd89","#ffc700","#f1416c"],interactions:[{type:"element-active"}],statistic:{title:!1,content:{style:{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"24px",fontWeight:"bold"},content:"386\nTenant"}},legend:{position:"bottom",flipPage:!1}},ce=[{title:"#",dataIndex:"rank",key:"rank",width:60,fixed:"left",render:e=>{const s={1:c.jsx(W,{style:{color:"#ffd700",fontSize:16}}),2:c.jsx(W,{style:{color:"#c0c0c0",fontSize:16}}),3:c.jsx(W,{style:{color:"#cd7f32",fontSize:16}})};return c.jsxs(u,{size:"small",children:[s[e],c.jsxs("span",{children:["#",e]})]})}},{title:"Tenant",dataIndex:"name",key:"name",width:200,ellipsis:!0,render:(e,s)=>c.jsxs(u,{size:"small",children:[c.jsx(F,{size:"small",style:{backgroundColor:"#667eea"},children:e?e.substring(0,2).toUpperCase():"NA"}),c.jsxs("div",{style:{lineHeight:1.2},children:[c.jsx("div",{style:{fontWeight:500},children:e||"İsimsiz"}),c.jsx(I,{style:{marginTop:4,fontSize:11},color:"Enterprise"===s.plan?"purple":"Professional"===s.plan?"blue":"Starter"===s.plan?"green":"default",children:s.plan})]})]})},{title:"Kullanıcı",dataIndex:"users",key:"users",width:100,align:"center",render:e=>c.jsx($,{count:e,showZero:!0,overflowCount:999,style:{backgroundColor:"#667eea"}})},{title:"Gelir",dataIndex:"revenue",key:"revenue",width:120,align:"right",render:e=>c.jsxs("span",{style:{color:"#50cd89",fontWeight:500},children:["₺",e.toLocaleString("tr-TR")]})},{title:"Büyüme",dataIndex:"growth",key:"growth",width:100,align:"center",render:e=>c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},children:[e>0?c.jsx(k,{style:{color:"#50cd89",fontSize:12}}):c.jsx(S,{style:{color:"#f1416c",fontSize:12}}),c.jsxs("span",{style:{color:e>0?"#50cd89":"#f1416c",fontWeight:500},children:[Math.abs(e).toFixed(1),"%"]})]})},{title:"Durum",dataIndex:"status",key:"status",width:90,align:"center",render:e=>c.jsx(I,{style:{margin:0,fontSize:11},color:"active"===e?"success":"error",children:"active"===e?"AKTİF":"ASKIDA"})},{title:"",key:"action",width:50,fixed:"right",render:()=>c.jsx(H,{menu:{items:[{key:"view",label:"Detaylar",icon:c.jsx(G,{})},{key:"edit",label:"Düzenle",icon:c.jsx(U,{})},{type:"divider"},{key:"delete",label:"Sil",icon:c.jsx(B,{}),danger:!0}]},trigger:["click"],placement:"bottomRight",children:c.jsx(j,{type:"text",size:"small",icon:c.jsx(w,{}),style:{padding:"4px 8px"}})})}];return c.jsxs("div",{className:"metronic-dashboard",children:[c.jsxs("div",{className:"dashboard-header",children:[c.jsxs("div",{className:"header-content",children:[c.jsx(X,{level:3,className:"page-title",children:"Dashboard"}),c.jsx(ee,{className:"page-description",children:"Hoş geldiniz! Platformunuzda bugün neler oluyor."})]}),c.jsx("div",{className:"header-actions",children:c.jsxs(u,{children:[c.jsxs(m,{value:e,onChange:s,style:{width:120},children:[c.jsx(m.Option,{value:"today",children:"Bugün"}),c.jsx(m.Option,{value:"week",children:"Bu Hafta"}),c.jsx(m.Option,{value:"month",children:"Bu Ay"}),c.jsx(m.Option,{value:"year",children:"Bu Yıl"})]}),c.jsx(se,{}),c.jsx(j,{icon:c.jsx(g,{}),children:"Dışa Aktar"}),c.jsx(j,{type:"primary",icon:c.jsx(y,{}),onClick:()=>{t(!0),Promise.all([te(),ne()]).finally(()=>{t(!1),i.success("Dashboard refreshed")})},loading:a,children:"Yenile"})]})})]}),c.jsx(v,{gutter:[24,24],className:"stats-row",children:re.map((e,s)=>c.jsx(f,{xs:24,sm:12,lg:6,children:c.jsx(b,{className:"stat-card",loading:a,children:c.jsxs("div",{className:"stat-card-content",children:[c.jsx("div",{className:"stat-icon",style:{backgroundColor:e.bgColor,color:e.color},children:e.icon}),c.jsxs("div",{className:"stat-details",children:[c.jsx(_,{className:"stat-title",children:e.title}),c.jsxs("div",{className:"stat-value",children:[e.prefix&&c.jsx("span",{className:"currency-symbol",children:e.prefix}),c.jsx(Y,{end:e.value,duration:2,separator:",",decimals:"%"===e.suffix?1:0}),e.suffix&&c.jsx("span",{className:"stat-suffix",children:e.suffix})]}),c.jsxs("div",{className:"stat-change",children:["increase"===e.changeType?c.jsx(k,{style:{color:"#50cd89"}}):c.jsx(S,{style:{color:"#f1416c"}}),c.jsxs("span",{className:`change-value ${e.changeType}`,children:[e.change,"%"]}),c.jsx("span",{className:"change-description",children:e.description})]})]})]})})},s))}),c.jsxs(v,{gutter:[24,24],className:"charts-row",children:[c.jsx(f,{xs:24,lg:16,children:c.jsx(b,{title:"Gelir Özeti",extra:c.jsxs(u,{children:[c.jsx(j,{type:"text",icon:c.jsx(N,{}),children:"Filtrele"}),c.jsx(j,{type:"text",icon:c.jsx(w,{})})]}),className:"chart-card",loading:a,children:c.jsx(L,r({},le))})}),c.jsx(f,{xs:24,lg:8,children:c.jsx(b,{title:"Tenant Dağılımı",extra:c.jsx(j,{type:"text",icon:c.jsx(w,{})}),className:"chart-card",loading:a,children:c.jsx(Z,r({},ie))})})]}),c.jsxs(v,{gutter:[24,24],className:"tables-row",children:[c.jsx(f,{xs:24,lg:16,children:c.jsx(b,{title:"En İyi Performans Gösteren Tenantlar",extra:c.jsxs(u,{children:[c.jsx(j,{type:"text",children:"Tümünü Gör"}),c.jsx(j,{type:"text",icon:c.jsx(w,{})})]}),className:"table-card",children:c.jsx(C,{columns:ce,dataSource:n.length>0?n:[],pagination:!1,loading:J,scroll:{x:800},size:"small",rowClassName:"table-row-hover"})})}),c.jsx(f,{xs:24,xl:8,lg:24,children:c.jsx(b,{title:"Son Aktiviteler",extra:c.jsx(j,{type:"text",children:"Tümünü Gör"}),className:"activity-card",loading:a,children:c.jsx(T,{children:[{type:"success",title:"Yeni tenant kaydı",description:"TechCorp Solutions platforma katıldı",time:"2 dakika önce",user:"John Doe",avatar:null},{type:"info",title:"Ödeme alındı",description:"Fatura #1234 ödendi",time:"1 saat önce",user:"Jane Smith",avatar:null},{type:"warning",title:"Abonelik sona eriyor",description:"CloudFirst Inc aboneliği 3 gün içinde sona erecek",time:"3 saat önce",user:"Sistem",avatar:null},{type:"error",title:"Ödeme başarısız",description:"StartupHub için ödeme işlenemedi",time:"5 saat önce",user:"Sistem",avatar:null}].map((e,s)=>c.jsx(T.Item,{color:"success"===e.type?"green":"info"===e.type?"blue":"warning"===e.type?"orange":"red",children:c.jsxs("div",{className:"activity-item",children:[c.jsx(_,{strong:!0,children:e.title}),c.jsx("br",{}),c.jsx(_,{type:"secondary",children:e.description}),c.jsx("br",{}),c.jsxs(u,{className:"activity-meta",children:[c.jsx(z,{}),c.jsx(_,{type:"secondary",style:{fontSize:12},children:e.time}),e.user&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"•"}),c.jsxs(_,{type:"secondary",style:{fontSize:12},children:[e.user," tarafından"]})]})]})]})},s))})})})]}),c.jsx(v,{gutter:[24,24],className:"quick-stats-row",children:c.jsx(f,{xs:24,children:c.jsx(b,{title:"Platform Performansı",className:"performance-card",children:c.jsxs(v,{gutter:[24,24],children:[c.jsx(f,{xs:24,sm:12,md:6,children:c.jsxs("div",{className:"performance-metric",children:[c.jsxs("div",{className:"metric-header",children:[c.jsx(_,{type:"secondary",children:"Sunucu Çalışma Süresi"}),c.jsx(P,{style:{color:"#50cd89"}})]}),c.jsx(A,{percent:99.9,strokeColor:"#50cd89"}),c.jsx(_,{strong:!0,children:"%99.9 Çalışma"})]})}),c.jsx(f,{xs:24,sm:12,md:6,children:c.jsxs("div",{className:"performance-metric",children:[c.jsxs("div",{className:"metric-header",children:[c.jsx(_,{type:"secondary",children:"Yanıt Süresi"}),c.jsx(R,{style:{color:"#ffc700"}})]}),c.jsx(A,{percent:85,strokeColor:"#ffc700"}),c.jsx(_,{strong:!0,children:"245ms Ortalama"})]})}),c.jsx(f,{xs:24,sm:12,md:6,children:c.jsxs("div",{className:"performance-metric",children:[c.jsxs("div",{className:"metric-header",children:[c.jsx(_,{type:"secondary",children:"API Çağrıları"}),c.jsx(D,{style:{color:"#667eea"}})]}),c.jsx(A,{percent:68,strokeColor:"#667eea"}),c.jsx(_,{strong:!0,children:"Bugün 1.2M"})]})}),c.jsx(f,{xs:24,sm:12,md:6,children:c.jsxs("div",{className:"performance-metric",children:[c.jsxs("div",{className:"metric-header",children:[c.jsx(_,{type:"secondary",children:"Hata Oranı"}),c.jsx(O,{style:{color:"#f1416c"}})]}),c.jsx(A,{percent:2,strokeColor:"#f1416c"}),c.jsx(_,{strong:!0,children:"%0.02 Hata"})]})})]})})})})]})},{Title:te,Text:ne,Paragraph:re}=x,{RangePicker:le}=p,{TabPane:ie}=E,ce=()=>c.jsx(ae,{});export{ce as MasterDashboard,ae as MetronicDashboard};
