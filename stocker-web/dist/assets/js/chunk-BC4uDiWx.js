var e=Object.defineProperty,r=(r,t,n)=>((r,t,n)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n)(r,"symbol"!=typeof t?t+"":t,n),t=(e,r,t)=>new Promise((n,a)=>{var o=e=>{try{s(t.next(e))}catch(r){a(r)}},i=e=>{try{s(t.throw(e))}catch(r){a(r)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,i);s((t=t.apply(e,r)).next())});import{a as n}from"./chunk-BsETiAjl.js";import{am as a}from"./chunk-DMHx2Wdf.js";const o=n.create({baseURL:"http://95.217.219.4:5000/api",timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{const r=localStorage.getItem("access_token");r&&(e.headers.Authorization=`Bearer ${r}`);const t=localStorage.getItem("tenant_id");return t&&(e.headers["X-Tenant-Id"]=t),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>t(null,null,function*(){var r,t;const{response:n}=e;if(n)switch(n.status){case 401:a.error("Oturumunuz sona erdi. Lütfen tekrar giriş yapın."),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login";break;case 403:a.error("Bu işlem için yetkiniz bulunmamaktadır.");break;case 404:a.error("İstenen kaynak bulunamadı.");break;case 422:if(null==(r=n.data)?void 0:r.errors){const e=n.data.errors,r=Object.values(e).flat().join(", ");a.error(r)}else a.error("Girdiğiniz bilgileri kontrol edin.");break;case 500:a.error("Sunucu hatası oluştu. Lütfen daha sonra tekrar deneyin.");break;default:a.error((null==(t=n.data)?void 0:t.message)||"Bir hata oluştu.")}else e.request?a.error("Sunucuya bağlanılamıyor. İnternet bağlantınızı kontrol edin."):a.error("Beklenmeyen bir hata oluştu.");return Promise.reject(e)}));const i=(e,r)=>o.get(e,r),s=(e,r,t)=>o.post(e,r,t),l=(e,r,t)=>o.put(e,r,t),u=(e,r)=>o.delete(e,r);const c=new class{constructor(){r(this,"baseUrl","/tenant/invoices")}getInvoices(e){return t(this,null,function*(){const r=new URLSearchParams;e&&Object.entries(e).forEach(([e,t])=>{null!=t&&r.append(e,t.toString())});return(yield i(`${this.baseUrl}?${r.toString()}`)).data})}getInvoice(e){return t(this,null,function*(){return(yield i(`${this.baseUrl}/${e}`)).data})}createInvoice(e){return t(this,null,function*(){return(yield s(this.baseUrl,e)).data})}sendInvoice(e){return t(this,null,function*(){yield s(`${this.baseUrl}/${e}/send`)})}markAsPaid(e,r){return t(this,null,function*(){yield s(`${this.baseUrl}/${e}/mark-paid`,r)})}cancelInvoice(e,r){return t(this,null,function*(){yield s(`${this.baseUrl}/${e}/cancel`,{reason:r})})}updateInvoice(e,r){return t(this,null,function*(){return(yield l(`${this.baseUrl}/${e}`,r)).data})}deleteInvoice(e){return t(this,null,function*(){yield u(`${this.baseUrl}/${e}`)})}getStatusColor(e){return{Draft:"default",Sent:"processing",Paid:"success",Overdue:"error",Cancelled:"warning"}[e]||"default"}getStatusIcon(e){return{Draft:"edit",Sent:"send",Paid:"check-circle",Overdue:"warning",Cancelled:"close-circle"}[e]||"info-circle"}formatCurrency(e,r="TRY"){return new Intl.NumberFormat("tr-TR",{style:"currency",currency:r}).format(e)}calculateDaysOverdue(e){const r=new Date(e),t=(new Date).getTime()-r.getTime();return Math.floor(t/864e5)}};export{c as i};
