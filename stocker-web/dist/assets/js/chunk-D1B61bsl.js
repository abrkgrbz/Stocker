var n=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,i,o)=>i in t?n(t,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[i]=o,s=(n,t,i)=>l(n,"symbol"!=typeof t?t+"":t,i),c=(n,t,i)=>new Promise((o,e)=>{var a=n=>{try{s(i.next(n))}catch(t){e(t)}},l=n=>{try{s(i.throw(n))}catch(t){e(t)}},s=n=>n.done?o(n.value):Promise.resolve(n.value).then(a,l);s((i=i.apply(n,t)).next())});import{r}from"./chunk-nBmrMGrr.js";import{A as h}from"../index-BHkRay6m.js";import{H as d,a as u,b as C,L as k}from"./chunk-FkXcRIdw.js";const m=new class{constructor(){s(this,"validationConnection",null),s(this,"notificationConnection",null),s(this,"baseUrl",h)}startValidationConnection(){return c(this,null,function*(){var n;if((null==(n=this.validationConnection)?void 0:n.state)!==d.Connected){this.validationConnection=(new u).withUrl(`${this.baseUrl}/hubs/validation`,{transport:C.LongPolling}).withAutomaticReconnect([0,2e3,5e3,1e4,3e4]).configureLogging(k.Debug).build(),this.validationConnection.onreconnecting(()=>{}),this.validationConnection.onreconnected(()=>{}),this.validationConnection.onclose(()=>{});try{yield this.validationConnection.start()}catch(t){throw t}}})}startNotificationConnection(n){return c(this,null,function*(){var s;if((null==(s=this.notificationConnection)?void 0:s.state)===d.Connected)return;const c={withCredentials:!0};var r,h;n&&(c.accessTokenFactory=()=>n),this.notificationConnection=(new u).withUrl(`${this.baseUrl}/hubs/notification`,(r=((n,t)=>{for(var i in t||(t={}))e.call(t,i)&&l(n,i,t[i]);if(o)for(var i of o(t))a.call(t,i)&&l(n,i,t[i]);return n})({},c),h={transport:C.LongPolling},t(r,i(h)))).withAutomaticReconnect([0,2e3,5e3,1e4,3e4]).configureLogging(k.Debug).build(),this.notificationConnection.onreconnecting(()=>{}),this.notificationConnection.onreconnected(()=>{}),this.notificationConnection.onclose(()=>{});try{yield this.notificationConnection.start()}catch(m){throw m}})}validateEmail(n){return c(this,null,function*(){return this.validationConnection&&this.validationConnection.state===d.Connected||(yield this.startValidationConnection()),this.validationConnection.invoke("ValidateEmail",n)})}onEmailValidated(n){var t;null==(t=this.validationConnection)||t.on("EmailValidated",n)}checkPasswordStrength(n){return c(this,null,function*(){return this.validationConnection&&this.validationConnection.state===d.Connected||(yield this.startValidationConnection()),this.validationConnection.invoke("CheckPasswordStrength",n)})}onPasswordStrengthChecked(n){var t;null==(t=this.validationConnection)||t.on("PasswordStrengthChecked",n)}checkDomain(n){return c(this,null,function*(){return this.validationConnection&&this.validationConnection.state===d.Connected||(yield this.startValidationConnection()),this.validationConnection.invoke("CheckDomain",n)})}onDomainChecked(n){var t;null==(t=this.validationConnection)||t.on("DomainChecked",n)}validatePhone(n,t="TR"){return c(this,null,function*(){return this.validationConnection&&this.validationConnection.state===d.Connected||(yield this.startValidationConnection()),this.validationConnection.invoke("ValidatePhone",n,t)})}onPhoneValidated(n){var t;null==(t=this.validationConnection)||t.on("PhoneValidated",n)}checkCompanyName(n){return c(this,null,function*(){return this.validationConnection&&this.validationConnection.state===d.Connected||(yield this.startValidationConnection()),this.validationConnection.invoke("CheckCompanyName",n)})}onCompanyNameChecked(n){var t;null==(t=this.validationConnection)||t.on("CompanyNameChecked",n)}onNotificationReceived(n){var t;null==(t=this.notificationConnection)||t.on("ReceiveNotification",n)}onConnected(n){var t,i;null==(t=this.validationConnection)||t.on("Connected",n),null==(i=this.notificationConnection)||i.on("Connected",n)}onValidationError(n){var t;null==(t=this.validationConnection)||t.on("ValidationError",n)}stopValidationConnection(){return c(this,null,function*(){this.validationConnection&&(yield this.validationConnection.stop(),this.validationConnection=null)})}stopNotificationConnection(){return c(this,null,function*(){this.notificationConnection&&(yield this.notificationConnection.stop(),this.notificationConnection=null)})}stopAllConnections(){return c(this,null,function*(){yield this.stopValidationConnection(),yield this.stopNotificationConnection()})}};const f=new class{constructor(){s(this,"emailCallbacks",[]),s(this,"passwordCallbacks",[]),s(this,"domainCallbacks",[]),s(this,"phoneCallbacks",[]),s(this,"companyCallbacks",[]),s(this,"notificationCallbacks",[]),s(this,"connectedCallbacks",[]),s(this,"errorCallbacks",[])}startValidationConnection(){return c(this,null,function*(){yield new Promise(n=>setTimeout(n,500)),this.connectedCallbacks.forEach(n=>n({connectionId:"mock-connection-id"}))})}startNotificationConnection(n){return c(this,null,function*(){yield new Promise(n=>setTimeout(n,500)),this.connectedCallbacks.forEach(t=>t({connectionId:"mock-notification-id",token:n}))})}validateEmail(n){return c(this,null,function*(){setTimeout(()=>{const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),i={isValid:t,message:t?"Email adresi geçerli":"Geçersiz email formatı",details:{format:t?"valid":"invalid",domain:n.split("@")[1]||"",suggestion:t||n.includes("@")?"":"@ işareti eksik"}};this.emailCallbacks.forEach(n=>n(i))},300)})}onEmailValidated(n){this.emailCallbacks.push(n)}checkPasswordStrength(n){return c(this,null,function*(){setTimeout(()=>{let t=0;const i=[];n.length>=8?t++:i.push("En az 8 karakter kullanın"),n.length>=12&&t++,/[A-Z]/.test(n)?t++:i.push("Büyük harf ekleyin"),/[a-z]/.test(n)?t++:i.push("Küçük harf ekleyin"),/\d/.test(n)?t++:i.push("Rakam ekleyin"),/[!@#$%^&*(),.?":{}|<>]/.test(n)?t++:i.push("Özel karakter ekleyin (!@#$%^&*)");const o=Math.min(Math.floor(t/1.5),4),e={score:Math.min(t,5),level:["VeryWeak","Weak","Fair","Strong","VeryStrong"][o],color:["#ff4d4f","#faad14","#fadb14","#52c41a","#389e0d"][o],suggestions:i};this.passwordCallbacks.forEach(n=>n(e))},200)})}onPasswordStrengthChecked(n){this.passwordCallbacks.push(n)}checkDomain(n){return c(this,null,function*(){setTimeout(()=>{const t=!["test.stocker.app","demo.stocker.app","example.stocker.app"].includes(n.toLowerCase()),i=n.split(".")[0],o={isAvailable:t,message:t?"Domain kullanılabilir":"Bu domain zaten kullanılıyor",suggestions:t?[]:[`${i}1.stocker.app`,`${i}-company.stocker.app`,`${i}2024.stocker.app`]};this.domainCallbacks.forEach(n=>n(o))},400)})}onDomainChecked(n){this.domainCallbacks.push(n)}validatePhone(n,t="TR"){return c(this,null,function*(){setTimeout(()=>{const i=n.replace(/\D/g,""),o="TR"===t?/^(90)?5\d{9}$/.test(i)||/^5\d{9}$/.test(i):i.length>=10,e={isValid:o,message:o?"Telefon numarası geçerli":"Geçersiz telefon numarası formatı",details:{countryCode:t,format:o?"valid":"invalid",suggestion:"TR"!==t||o?"":"Türkiye telefon numarası 5XX XXX XX XX formatında olmalı"}};this.phoneCallbacks.forEach(n=>n(e))},300)})}onPhoneValidated(n){this.phoneCallbacks.push(n)}checkCompanyName(n){return c(this,null,function*(){setTimeout(()=>{const t=!["ABC Teknoloji","XYZ Yazılım","Test Company"].some(t=>t.toLowerCase()===n.toLowerCase()),i={isValid:t,message:t?"Şirket adı kullanılabilir":"Bu şirket adı zaten kayıtlı",details:{available:t?"yes":"no",suggestion:t?"":"Şirket adına bir numara veya ayırt edici kelime ekleyin"}};this.companyCallbacks.forEach(n=>n(i))},350)})}onCompanyNameChecked(n){this.companyCallbacks.push(n)}onNotificationReceived(n){this.notificationCallbacks.push(n),setTimeout(()=>{n({id:"mock-1",title:"Hoş Geldiniz",message:"SignalR Mock Service aktif",type:"Info",priority:"Normal",createdAt:new Date,icon:"info"})},2e3)}onConnected(n){this.connectedCallbacks.push(n)}onValidationError(n){this.errorCallbacks.push(n)}stopValidationConnection(){return c(this,null,function*(){this.emailCallbacks=[],this.passwordCallbacks=[],this.domainCallbacks=[],this.phoneCallbacks=[],this.companyCallbacks=[],this.connectedCallbacks=[],this.errorCallbacks=[]})}stopNotificationConnection(){return c(this,null,function*(){this.notificationCallbacks=[]})}stopAllConnections(){return c(this,null,function*(){yield this.stopValidationConnection(),yield this.stopNotificationConnection()})}},p=()=>{const[n,t]=r.useState(!1),[i,o]=r.useState(null),[e,a]=r.useState(null),[l,s]=r.useState(null),[h,d]=r.useState(null),[u,C]=r.useState(null),[k,p]=r.useState(null),[v,y]=r.useState(!1);r.useEffect(()=>(c(null,null,function*(){const n=v?f:m;try{v?yield f.startValidationConnection():yield m.startValidationConnection(),t(!0),n.onEmailValidated(n=>{o(n)}),n.onPasswordStrengthChecked(n=>{a(n)}),n.onDomainChecked(n=>{s(n)}),n.onPhoneValidated(n=>{d(n)}),n.onCompanyNameChecked(n=>{C(n)}),n.onValidationError(n=>{p(n)}),n.onConnected(n=>{})}catch(i){v?(p("Failed to connect to validation service"),t(!1)):(y(!0),p("Using mock validation service (API not available)"))}}),()=>{v?f.stopValidationConnection():m.stopValidationConnection()}),[v]);const b=v?f:m;return{isConnected:n,emailValidation:i,passwordStrength:e,domainCheck:l,phoneValidation:h,companyNameCheck:u,error:k,validateEmail:r.useCallback(n=>c(null,null,function*(){p(null),o(null);try{yield b.validateEmail(n)}catch(t){p("Failed to validate email")}}),[b]),checkPasswordStrength:r.useCallback(n=>c(null,null,function*(){p(null),a(null);try{yield b.checkPasswordStrength(n)}catch(t){p("Failed to check password strength")}}),[b]),checkDomain:r.useCallback(n=>c(null,null,function*(){p(null),s(null);try{yield b.checkDomain(n)}catch(t){p("Failed to check domain")}}),[b]),validatePhone:r.useCallback((n,t="TR")=>c(null,null,function*(){p(null),d(null);try{yield b.validatePhone(n,t)}catch(i){p("Failed to validate phone")}}),[b]),checkCompanyName:r.useCallback(n=>c(null,null,function*(){p(null),C(null);try{yield b.checkCompanyName(n)}catch(t){p("Failed to check company name")}}),[b])}};export{p as u};
