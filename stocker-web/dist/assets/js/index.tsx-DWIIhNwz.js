import{ay as e,j as s,e as i,Z as a,I as l,az as n,aA as r,ac as o,c as t,aB as c,S as d}from"./chunk-Bx2_2m46.js";import{u as m}from"../index-C40P1pGL.js";import{c as p}from"./chunk-BlMk_3fG.js";import{s as u,a as h}from"./chunk-CXGarPR9.js";import{S as g}from"./chunk-Bs-FQgGV.js";import{u as x,i as j}from"./chunk-nBmrMGrr.js";import"./chunk-BsETiAjl.js";import"./chunk-9xa3rViV.js";const{Title:y,Text:f}=a,v=()=>{const a=x(),v=j(),{login:k,isLoading:N}=m(),[b]=e.useForm();return s.jsxs("div",{className:"login-page",children:[s.jsxs("div",{className:"login-background",children:[s.jsx("div",{className:"login-bg-shape login-bg-shape-1"}),s.jsx("div",{className:"login-bg-shape login-bg-shape-2"}),s.jsx("div",{className:"login-bg-shape login-bg-shape-3"}),s.jsx("div",{className:"login-bg-shape login-bg-shape-4"})]}),s.jsx("div",{className:"login-container",children:s.jsxs("div",{className:"login-box",children:[s.jsx("div",{className:"login-logo",children:s.jsx(i,{style:{fontSize:48,color:"#667eea"}})}),s.jsxs("div",{className:"login-header",children:[s.jsx(y,{level:2,style:{margin:0,color:"#1a1a1a"},children:"Hoş Geldiniz"}),s.jsx(f,{type:"secondary",style:{fontSize:16},children:"Stocker'a devam etmek için giriş yapın"})]}),s.jsxs(e,{form:b,name:"login",onFinish:e=>{return s=null,i=null,l=function*(){var s,i,l,n,r,o;u.loading("Giriş yapılıyor...");try{e.tenantCode&&localStorage.setItem("X-Tenant-Code",e.tenantCode);const c={email:e.email,password:e.password,tenantCode:e.tenantCode};yield k(c),g.close(),yield new Promise(e=>setTimeout(e,100));const d=m.getState(),x=(null==(s=d.user)?void 0:s.firstName)||(null==(i=d.user)?void 0:i.email)||"Kullanıcı",j=null==(n=null==(l=d.user)?void 0:l.roles)?void 0:n[0],y=null==(o=null==(r=v.state)?void 0:r.from)?void 0:o.pathname;if(h(x),"SystemAdmin"!==j)try{if(!(yield p.checkCompanyExists()))return u.info("Şirket bilgilerinizi tamamlamanız gerekiyor. Yönlendiriliyorsunuz...","Şirket Kurulumu"),void setTimeout(()=>{a("/company-setup",{replace:!0})},1e3)}catch(t){}a(y||("SystemAdmin"===j?"/master":"TenantAdmin"===j||"Admin"===j?"/admin":"/app/default"),{replace:!0})}catch(c){g.close(),c.response?u.error(c,"Giriş başarısız"):c.message?u.error({response:{data:{message:c.message}}},"Giriş başarısız"):u.error({response:{data:{message:"Beklenmeyen bir hata oluştu. Lütfen tekrar deneyin."}}},"Giriş başarısız")}},new Promise((e,a)=>{var n=e=>{try{o(l.next(e))}catch(s){a(s)}},r=e=>{try{o(l.throw(e))}catch(s){a(s)}},o=s=>s.done?e(s.value):Promise.resolve(s.value).then(n,r);o((l=l.apply(s,i)).next())});var s,i,l},layout:"vertical",size:"large",className:"login-form",children:[s.jsx(e.Item,{name:"tenantCode",rules:[{required:!1,message:"Lütfen kiracı kodunu girin!"}],children:s.jsx(l,{prefix:s.jsx(n,{style:{color:"#667eea"}}),placeholder:"Kiracı Kodu (örn: test)",autoComplete:"organization",className:"login-input"})}),s.jsx(e.Item,{name:"email",rules:[{required:!0,message:"Lütfen email adresinizi girin!"},{type:"email",message:"Lütfen geçerli bir email adresi girin!"}],children:s.jsx(l,{prefix:s.jsx(r,{style:{color:"#667eea"}}),placeholder:"Email adresi",autoComplete:"email",type:"email",className:"login-input"})}),s.jsx(e.Item,{name:"password",rules:[{required:!0,message:"Lütfen şifrenizi girin!"}],children:s.jsx(l.Password,{prefix:s.jsx(o,{style:{color:"#667eea"}}),placeholder:"Şifre",autoComplete:"current-password",className:"login-input"})}),s.jsx(e.Item,{style:{marginBottom:16},children:s.jsx(t,{type:"primary",htmlType:"submit",loading:N,block:!0,size:"large",icon:s.jsx(c,{}),className:"login-button",children:"Giriş Yap"})}),s.jsxs("div",{className:"login-links",children:[s.jsx("a",{href:"/forgot-password",children:"Şifremi unuttum"}),s.jsx("span",{className:"separator",children:"•"}),s.jsx("a",{href:"/register",children:"Hesap oluştur"})]})]}),s.jsxs("div",{className:"demo-section",children:[s.jsx(f,{type:"secondary",style:{fontSize:12,textAlign:"center",display:"block",marginBottom:12},children:"DEMO HESAPLARI"}),s.jsxs(d,{direction:"vertical",style:{width:"100%"},size:"small",children:[s.jsxs("div",{className:"demo-credential",onClick:()=>{b.setFieldsValue({email:"admin@stocker.com",password:"Admin@123456"})},children:[s.jsx("div",{className:"demo-icon",children:"👨‍💼"}),s.jsxs("div",{className:"demo-info",children:[s.jsx(f,{strong:!0,style:{fontSize:13},children:"Sistem Yöneticisi"}),s.jsx(f,{type:"secondary",style:{fontSize:11,display:"block"},children:"admin@stocker.com"})]}),s.jsx(f,{className:"demo-hint",children:"Doldurmak için tıkla"})]}),s.jsxs("div",{className:"demo-credential",onClick:()=>{b.setFieldsValue({email:"tenant@example.com",password:"Tenant@123456"})},children:[s.jsx("div",{className:"demo-icon",children:"👤"}),s.jsxs("div",{className:"demo-info",children:[s.jsx(f,{strong:!0,style:{fontSize:13},children:"Kiracı Yöneticisi"}),s.jsx(f,{type:"secondary",style:{fontSize:11,display:"block"},children:"tenant@example.com"})]}),s.jsx(f,{className:"demo-hint",children:"Doldurmak için tıkla"})]})]})]})]})})]})};export{v as LoginPage};
