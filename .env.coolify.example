# ================================================
# COOLIFY ENVIRONMENT VARIABLES TEMPLATE
# ================================================
# Copy these to Coolify UI → Service → Environment Variables
# Replace all placeholder values with actual values

# ================================================
# API SERVICE ENVIRONMENT VARIABLES
# ================================================

# ----- Database Configuration -----
DB_HOST=database
DB_USER=sa
DB_PASSWORD=YourStrongPassword123!
DB_NAME=StockerTenantDb
MASTER_DB_NAME=StockerMasterDb
TENANT_DB_NAME=StockerTenantDb

# Connection Strings (auto-generated from above)
ConnectionStrings__DefaultConnection=Server=${DB_HOST};Database=${DB_NAME};User Id=${DB_USER};Password=${DB_PASSWORD};TrustServerCertificate=True;MultipleActiveResultSets=true
ConnectionStrings__MasterConnection=Server=${DB_HOST};Database=${MASTER_DB_NAME};User Id=${DB_USER};Password=${DB_PASSWORD};TrustServerCertificate=True;MultipleActiveResultSets=true
ConnectionStrings__TenantConnection=Server=${DB_HOST};Database=${TENANT_DB_NAME};User Id=${DB_USER};Password=${DB_PASSWORD};TrustServerCertificate=True;MultipleActiveResultSets=true

# Database Settings for dynamic tenant creation
DatabaseSettings__ServerName=${DB_HOST}
DatabaseSettings__UserId=${DB_USER}
DatabaseSettings__Password=${DB_PASSWORD}

# ----- JWT Authentication -----
JWT_SECRET=ThisIsAVerySecureSecretKeyThatShouldBeAtLeast256BitsLongForHS256Algorithm2024!
JWT_ISSUER=https://api.stoocker.app
JWT_AUDIENCE=https://stoocker.app
JWT_ACCESS_EXPIRATION=60
JWT_REFRESH_EXPIRATION=7

JwtSettings__Secret=${JWT_SECRET}
JwtSettings__Issuer=${JWT_ISSUER}
JwtSettings__Audience=${JWT_AUDIENCE}
JwtSettings__AccessTokenExpirationMinutes=${JWT_ACCESS_EXPIRATION}
JwtSettings__RefreshTokenExpirationDays=${JWT_REFRESH_EXPIRATION}

# ----- Email Configuration (SendGrid) -----
SENDGRID_API_KEY=${SECRET_SENDGRID_API_KEY}
FROM_EMAIL=info@stoocker.app
FROM_NAME=Stoocker
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_ENABLE_SSL=true
SMTP_USE_STARTTLS=true
ENABLE_EMAIL=true
BASE_URL=https://stoocker.app
EMAIL_TIMEOUT=30000

EmailSettings__SmtpHost=${SMTP_HOST}
EmailSettings__SmtpPort=${SMTP_PORT}
EmailSettings__SmtpUsername=${SMTP_USERNAME}
EmailSettings__SmtpPassword=${SENDGRID_API_KEY}
EmailSettings__EnableSsl=${SMTP_ENABLE_SSL}
EmailSettings__FromEmail=${FROM_EMAIL}
EmailSettings__FromName=${FROM_NAME}
EmailSettings__UseStartTls=${SMTP_USE_STARTTLS}
EmailSettings__EnableEmail=${ENABLE_EMAIL}
EmailSettings__BaseUrl=${BASE_URL}
EmailSettings__TemplatesPath=EmailTemplates
EmailSettings__Timeout=${EMAIL_TIMEOUT}

# ----- Redis Cache -----
REDIS_CONNECTION=redis:6379
Redis__ConnectionString=${REDIS_CONNECTION}
ConnectionStrings__Redis=${REDIS_CONNECTION}

# ----- Hangfire Background Jobs -----
HANGFIRE_SERVER_NAME=Stocker-Production
HANGFIRE_WORKERS=8
HANGFIRE_RETRY=3

Hangfire__DashboardPath=/hangfire
Hangfire__ServerName=${HANGFIRE_SERVER_NAME}
Hangfire__WorkerCount=${HANGFIRE_WORKERS}
Hangfire__Queues__0=critical
Hangfire__Queues__1=default
Hangfire__Queues__2=low
Hangfire__RetryAttempts=${HANGFIRE_RETRY}
Hangfire__JobExpirationCheckInterval=01:00:00
Hangfire__CountersAggregateInterval=00:05:00

# ----- Seq Logging -----
SEQ_URL=http://seq:5341
SEQ_API_KEY=
LOG_LEVEL=Information

Logging__Seq__ServerUrl=${SEQ_URL}
Logging__Seq__ApiKey=${SEQ_API_KEY}
Logging__Seq__MinimumLevel=${LOG_LEVEL}

# ----- ASP.NET Core -----
ASPNETCORE_ENVIRONMENT=Production
ASPNETCORE_URLS=http://+:5000

# ================================================
# WEB FRONTEND ENVIRONMENT VARIABLES
# ================================================

VITE_API_URL=https://api.stoocker.app
VITE_APP_NAME=Stoocker

# ================================================
# MINIO OBJECT STORAGE
# ================================================

MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=${SECRET_MINIO_ROOT_PASSWORD}
MINIO_APP_USER=stockerapp
MINIO_APP_PASSWORD=${SECRET_MINIO_APP_PASSWORD}
MINIO_REGION=us-east-1

# ================================================
# RABBITMQ MESSAGE QUEUE
# ================================================

RABBITMQ_USER=admin
RABBITMQ_PASSWORD=${SECRET_RABBITMQ_PASSWORD}
RABBITMQ_APP_USER=stockerapp
RABBITMQ_APP_PASSWORD=${SECRET_RABBITMQ_APP_PASSWORD}
RABBITMQ_VHOST=stocker

# ================================================
# ELASTICSEARCH
# ================================================

ELASTIC_USERNAME=elastic
ELASTIC_PASSWORD=${SECRET_ELASTIC_PASSWORD}

# ================================================
# GRAFANA MONITORING
# ================================================

GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=${SECRET_GRAFANA_PASSWORD}
GRAFANA_SMTP_ENABLED=true

# ================================================
# BACKUP SOLUTION
# ================================================

RESTIC_PASSWORD=${SECRET_RESTIC_PASSWORD}
RESTIC_USERNAME=admin
BACKUP_DB_USER=restic
BACKUP_DB_PASSWORD=${SECRET_BACKUP_DB_PASSWORD}
BACKUP_SCHEDULE=0 2 * * *

# ================================================
# COOLIFY SECRETS (Add these in Coolify → Project → Secrets)
# ================================================
# SECRET_SENDGRID_API_KEY=SG.actual-api-key-here
# SECRET_MINIO_ROOT_PASSWORD=GenerateSecurePassword
# SECRET_MINIO_APP_PASSWORD=GenerateSecurePassword
# SECRET_RABBITMQ_PASSWORD=GenerateSecurePassword
# SECRET_RABBITMQ_APP_PASSWORD=GenerateSecurePassword
# SECRET_ELASTIC_PASSWORD=GenerateSecurePassword
# SECRET_GRAFANA_PASSWORD=GenerateSecurePassword
# SECRET_RESTIC_PASSWORD=GenerateSecurePassword
# SECRET_BACKUP_DB_PASSWORD=GenerateSecurePassword